/**
  * CopperCube player implemented using the CopperLicht 3D Engine, (c) by Nikolaus Gebhardt, Ambiera e.U.
  * http://www.ambiera.com/coppercube
  */
function aa(){return function(){}}function ca(a){return function(b){this[a]=b}}function ea(a){return function(){return this[a]}}function k(a){return function(){return a}}var l,n={};function fa(a,b){this.qe=this.dj=this.dh=null;a=document.getElementById(a);if(a==null)n.Ul=false;else{if(this.dh=a.parentNode){this.vh=document.createElement("div");this.dh.appendChild(this.vh);this.$o=a=document.createTextNode("Loading...");this.vh.appendChild(a)}b&&ga(this)}}function ga(a){if(a.dj==null){a.dj=document.createElement("div");a.dh.appendChild(a.dj);var b=document.createTextNode("FPS: 0");a.Cm=b;a.dj.appendChild(b);a.frames=0;a.am=(new Date).getTime()}}
fa.prototype.print=function(a){n.Ul!=false&&ha(this,a,false)};function ka(a,b){if(a.vh)if(b==null)a.vh.style.display="none";else{a.vh.style.display="block";a.$o.nodeValue=b}}function la(a,b,c){ha(a,b,true,c)}function ma(a,b){setTimeout(function(){throw new Error(b);},0)}
function ha(a,b,c,d){if(!(n.Ul==false&&c!=true)){if(a.qe==null){a.qe=document.createElement("div");a.qe.className="cldebug";a.dh.appendChild(a.qe)}if(d){a.qe.appendChild(document.createElement("br"));c=document.createElement("div");a.qe.appendChild(c);c.innerHTML=b}else{a.qe.appendChild(document.createElement("br"));b=document.createTextNode(b);a.qe.appendChild(b)}}}n.Ul=true;n.na=null;function na(a,b){this.ej=a;this.nb=false;this.tq=b;if(!this.nb&&typeof XMLHttpRequest!="undefined")try{this.nb=new XMLHttpRequest}catch(c){this.nb=false}if(!this.nb&&window.Gp)try{this.nb=window.Gp()}catch(d){this.nb=false}this.load=function(e,f){if(this.nb==false)la(n.na,"Your browser doesn't support AJAX");else{var g=this;try{this.nb.open("GET",this.ej,true);if(this.tq)this.nb.responseType="arraybuffer"}catch(i){if(f)f(i.message);else{la(n.na,"Could not open file "+this.ej+": "+i.message);var j=
navigator.appVersion;j!=null&&j.indexOf("Trident")!=-1&&la(n.na,"<i>Use a web server to run files in IE. Or start them from CopperCube.</i>",true)}return}this.nb.onreadystatechange=function(){if(g.nb.readyState==4){var o=false;if(g.nb.status!=200&&g.nb.status!=0&&g.nb.status!=null)if(f){f("");o=true}else la(n.na,"Could not open file "+g.ej+" (status:"+g.nb.status+")");!o&&e&&e(g.nb.response)}};try{this.nb.send(null)}catch(m){f?f(""):la(n.na,"Could not open file "+g.ej)}}};this.abort=function(){try{this.nb.abort()}catch(e){}}}
;n.PI=3.14159265359;n.Gq=1/3.14159265359;n.Cq=1.570796326795;n.Fq=3.141592653589793;n.yd=3.14159265359/180;n.me=57.29577951307855;n.wp=1.0E-8;n.wi=function(a){return a*n.me};n.Mn=function(a){return a*n.yd};n.pa=function(a){return a<1.0E-8&&a>-1.0E-8};n.ye=function(a){return a+1.0E-8>=1&&a-1.0E-8<=1};n.D=function(a,b){return a+1.0E-8>=b&&a-1.0E-8<=b};n.lc=function(a,b,c){if(a<b)return b;if(a>c)return c;return a};n.Jp=function(a){return a-Math.floor(a)};
n.Wp=function(a,b,c){if(a>b){if(a>c)return a;return c}if(b>c)return b;return c};n.Rq=function(a,b,c){if(a<b){if(a<c)return a;return c}if(b<c)return b;return c};n.xe=function(a){return(a&4278190080)>>>24};n.nd=function(a){return(a&16711680)>>16};n.md=function(a){return(a&65280)>>8};n.ld=function(a){return a&255};n.mi=function(a,b,c,d){a&=255;b&=255;c&=255;d&=255;return a<<24|b<<16|c<<8|d};
n.Wn=function(a,b,c){var d=1-c;return n.mi(n.xe(a)*c+n.xe(b)*d,n.nd(a)*c+n.nd(b)*d,n.md(a)*c+n.md(b)*d,n.ld(a)*c+n.ld(b)*d)};n.Bo=function(a){if(a>0)return 1;if(a<0)return-1;return 0};function ra(){this.Ec=this.Hc=this.Kc=this.Pg=1}l=ra.prototype;l.e=function(){var a=new ra;a.Pg=this.Pg;a.Kc=this.Kc;a.Hc=this.Hc;a.Ec=this.Ec;return a};l.Pg=1;l.Kc=1;l.Hc=1;l.Ec=1;function q(){return(new Date).getTime()};function s(a,b,c){if(a!=null){this.c=a;this.b=b;this.d=c}}l=s.prototype;l.c=0;l.b=0;l.d=0;l.set=function(a,b,c){this.c=a;this.b=b;this.d=c};l.e=function(){return new s(this.c,this.b,this.d)};l.Ba=function(a){a.c=this.c;a.b=this.b;a.d=this.d};l.substract=function(a){return new s(this.c-a.c,this.b-a.b,this.d-a.d)};function ta(a,b){a.c-=b.c;a.b-=b.b;a.d-=b.d}s.prototype.add=function(a){return new s(this.c+a.c,this.b+a.b,this.d+a.d)};s.prototype.ta=function(a){this.c+=a.c;this.b+=a.b;this.d+=a.d};
function ua(a,b){a.c+=b.c;a.b+=b.b;a.d+=b.d;return a}s.prototype.normalize=function(){var a=this.c*this.c+this.b*this.b+this.d*this.d;if(!(a>-1.0E-7&&a<1.0E-7)){a=1/Math.sqrt(a);this.c*=a;this.b*=a;this.d*=a}};function va(a,b){var c=a.c*a.c+a.b*a.b+a.d*a.d;if(!(c>-1.0E-7&&c<1.0E-7)){c=b/Math.sqrt(c);a.c*=c;a.b*=c;a.d*=c}}function wa(a,b){a.c=b.c;a.b=b.b;a.d=b.d}s.prototype.D=function(a){return n.D(this.c,a.c)&&n.D(this.b,a.b)&&n.D(this.d,a.d)};
function xa(a){return n.pa(a.c)&&n.pa(a.b)&&n.pa(a.d)}s.prototype.getLength=function(){return Math.sqrt(this.c*this.c+this.b*this.b+this.d*this.d)};s.prototype.tb=function(a){var b=a.c-this.c,c=a.b-this.b;a=a.d-this.d;return Math.sqrt(b*b+c*c+a*a)};function ya(a,b){var c=b.c-a.c,d=b.b-a.b;a=b.d-a.d;return c*c+d*d+a*a}function za(a){return a.c*a.c+a.b*a.b+a.d*a.d}function w(a,b){return new s(a.c*b,a.b*b,a.d*b)}function Ca(a,b){a.c*=b;a.b*=b;a.d*=b}function Da(a,b){a.c*=b;a.b*=b;a.d*=b;return a}
function Ea(a,b){a.c*=b.c;a.b*=b.b;a.d*=b.d}function Fa(a,b){return new s(a.c*b.c,a.b*b.b,a.d*b.d)}function Ha(a,b){return new s(a.c/b.c,a.b/b.b,a.d/b.d)}function Ia(a,b){return new s(a.b*b.d-a.d*b.b,a.d*b.c-a.c*b.d,a.c*b.b-a.b*b.c)}s.prototype.ka=function(a){return this.c*a.c+this.b*a.b+this.d*a.d};
function Ja(a){var b=new s;b.b=n.wi(Math.atan2(a.c,a.d));if(b.b<0)b.b+=360;if(b.b>=360)b.b-=360;var c=Math.sqrt(a.c*a.c+a.d*a.d);b.c=n.wi(Math.atan2(c,a.b))-90;if(b.c<0)b.c+=360;if(b.c>=360)b.c-=360;return b}function Ka(a,b){b*=n.yd;var c=Math.cos(b);b=Math.sin(b);a.c=a.c*c-a.d*b;a.d=a.c*b+a.d*c}function La(a,b,c){var d=1-c;return new s(b.c*d+a.c*c,b.b*d+a.b*c,b.d*d+a.d*c)}s.prototype.toString=function(){return"(x: "+this.c+" y:"+this.b+" z:"+this.d+")"};function Ma(){this.Z=new s;this.O=new s}
Ma.prototype.Z=null;Ma.prototype.O=null;function Na(a){return a.O.substract(a.Z)}Ma.prototype.getLength=function(){return Na(this).getLength()};function Qa(a,b){if(a==null)this.b=this.c=0;else{this.c=a;this.b=b}}Qa.prototype.c=0;Qa.prototype.b=0;Qa.prototype.set=function(a,b){this.c=a;this.b=b};function y(){this.C=new s;this.M=new s}y.prototype.C=null;y.prototype.M=null;y.prototype.e=function(){var a=new y;a.C=this.C.e();a.M=this.M.e();return a};function Ra(a){a=a.C.add(a.M);Ca(a,0.5);return a}function Sa(a){return a.M.substract(a.C)}
function Ta(a){var b=Ra(a);a=b.substract(a.M);var c=[];c.push(new s(b.c+a.c,b.b+a.b,b.d+a.d));c.push(new s(b.c+a.c,b.b-a.b,b.d+a.d));c.push(new s(b.c+a.c,b.b+a.b,b.d-a.d));c.push(new s(b.c+a.c,b.b-a.b,b.d-a.d));c.push(new s(b.c-a.c,b.b+a.b,b.d+a.d));c.push(new s(b.c-a.c,b.b-a.b,b.d+a.d));c.push(new s(b.c-a.c,b.b+a.b,b.d-a.d));c.push(new s(b.c-a.c,b.b-a.b,b.d-a.d));return c}
function Ua(a,b,c){var d=c.substract(b),e=d.getLength();d.normalize();b=w(b.add(c),0.5);c=e*0.5;e=w(Sa(a),0.5);a=Ra(a).substract(b);if(Math.abs(a.c)>e.c+c*Math.abs(d.c)||Math.abs(a.b)>e.b+c*Math.abs(d.b)||Math.abs(a.d)>e.d+c*Math.abs(d.d))d=false;else{b=e.b*Math.abs(d.d)+e.d*Math.abs(d.b);if(Math.abs(a.b*d.d-a.d*d.b)>b)d=false;else{b=e.c*Math.abs(d.d)+e.d*Math.abs(d.c);if(Math.abs(a.d*d.c-a.c*d.d)>b)d=false;else{b=e.c*Math.abs(d.b)+e.b*Math.abs(d.c);d=Math.abs(a.c*d.b-a.b*d.c)>b?false:true}}}return d}
function z(a,b){var c=b.c,d=b.b;b=b.d;if(c>a.M.c)a.M.c=c;if(d>a.M.b)a.M.b=d;if(b>a.M.d)a.M.d=b;if(c<a.C.c)a.C.c=c;if(d<a.C.b)a.C.b=d;if(b<a.C.d)a.C.d=b}function Va(a,b){return a.C.c<=b.M.c&&a.C.b<=b.M.b&&a.C.d<=b.M.d&&a.M.c>=b.C.c&&a.M.b>=b.C.b&&a.M.d>=b.C.d}y.prototype.Hg=function(a){return a.c>=this.C.c&&a.c<=this.M.c&&a.b>=this.C.b&&a.b<=this.M.b&&a.d>=this.C.d&&a.d<=this.M.d};y.prototype.reset=function(a,b,c){this.M.set(a,b,c);this.C.set(a,b,c)};function Wa(){this.j=new s(0,1,0);ab(this,new s(0,0,0))}Wa.prototype.Xa=0;Wa.prototype.j=null;Wa.prototype.e=function(){var a=new Wa(false);a.j=this.j.e();a.Xa=this.Xa;return a};function ab(a,b){a.Xa=-b.ka(a.j)}Wa.prototype.normalize=function(){var a=1/this.j.getLength();this.j=w(this.j,a);this.Xa*=a};
function bb(a,b,c,d){var e=new s,f=new s;var g=a.j.getLength(),i=a.j.ka(b.j),j=b.j.getLength(),m=g*j-i*i;if(Math.abs(m)<1.0E-8)b=false;else{m=1/m;j=(j*-a.Xa+i*b.Xa)*m;g=(g*-b.Xa+i*a.Xa)*m;Ia(a.j,b.j).Ba(f);a=w(a.j,j);b=w(b.j,g);a.add(b).Ba(e);b=true}if(b)return c.Wl(e,f,d);return false}Wa.prototype.Wl=function(a,b,c){var d=this.j.ka(b);if(d==0)return false;d=-(this.j.ka(a)+this.Xa)/d;a.add(w(b,d)).Ba(c);return true};Wa.prototype.tb=function(a){return a.ka(this.j)+this.Xa};
function cb(a,b){return a.j.ka(b)<=0};function C(a,b,c){this.U=a?a:new s;this.ca=b?b:new s;this.da=c?c:new s}C.prototype.U=null;C.prototype.ca=null;C.prototype.da=null;C.prototype.e=function(){return new C(this.U,this.ca,this.da)};function db(a){var b=new Wa(false),c=a.U,d=a.da;b.j=Ia(a.ca.substract(c),d.substract(c));b.j.normalize();ab(b,c);return b}C.prototype.Hg=function(a){return eb(this,a,this.U,this.ca,this.da)&&eb(this,a,this.ca,this.U,this.da)&&eb(this,a,this.da,this.U,this.ca)};
function eb(a,b,c,d,e){a=e.substract(d);b=Ia(a,b.substract(d));c=Ia(a,c.substract(d));return b.ka(c)>=0}function fb(a){return Ia(a.ca.substract(a.U),a.da.substract(a.U))}C.prototype.Wl=function(a,b){var c=fb(this);c.normalize();var d=c.ka(b);if(n.pa(d))a=null;else{var e=this.U.ka(c);c=-(c.ka(a)-e)/d;a=a.add(w(b,c))}if(a==null)return null;if(this.Hg(a))return a;return null};C.prototype.Ba=function(a){this.U.Ba(a.U);this.ca.Ba(a.ca);this.da.Ba(a.da)};function D(a){if(a==null)a=true;this.L=this.B=this.K=this.J=this.I=this.n=this.A=this.w=this.H=this.t=this.q=this.v=this.G=this.s=this.u=this.p=0;this.Ma=false;if(a){this.L=this.n=this.q=this.p=1;this.Ma=true}}function gb(a){if(a.Ma)return true;a.Ma=n.ye(a.p)&&n.pa(a.u)&&n.pa(a.s)&&n.pa(a.G)&&n.pa(a.v)&&n.ye(a.q)&&n.pa(a.t)&&n.pa(a.H)&&n.pa(a.w)&&n.pa(a.A)&&n.ye(a.n)&&n.pa(a.I)&&n.pa(a.J)&&n.pa(a.K)&&n.pa(a.B)&&n.ye(a.L);return a.Ma}
function hb(a){if(a.Ma)return true;return n.ye(a.p)&&n.pa(a.u)&&n.pa(a.s)&&n.pa(a.G)&&n.pa(a.v)&&n.ye(a.q)&&n.pa(a.t)&&n.pa(a.H)&&n.pa(a.w)&&n.pa(a.A)&&n.ye(a.n)&&n.pa(a.I)&&n.ye(a.L)}D.prototype.D=function(a){return n.D(this.p,a.p)&&n.D(this.u,a.u)&&n.D(this.s,a.s)&&n.D(this.G,a.G)&&n.D(this.v,a.v)&&n.D(this.q,a.q)&&n.D(this.t,a.t)&&n.D(this.H,a.H)&&n.D(this.w,a.w)&&n.D(this.A,a.A)&&n.D(this.n,a.n)&&n.D(this.I,a.I)&&n.D(this.J,a.J)&&n.D(this.K,a.K)&&n.D(this.B,a.B)&&n.D(this.L,a.L)};
function ib(a){return new s(a.p,a.q,a.n)}function jb(a,b){var c=b.e();b.c=c.c*a.p+c.b*a.v+c.d*a.w;b.b=c.c*a.u+c.b*a.q+c.d*a.A;b.d=c.c*a.s+c.b*a.t+c.d*a.n}function kb(a,b,c){b.c=c.c*a.p+c.b*a.v+c.d*a.w;b.b=c.c*a.u+c.b*a.q+c.d*a.A;b.d=c.c*a.s+c.b*a.t+c.d*a.n}function lb(a,b){return new s(b.c*a.p+b.b*a.v+b.d*a.w+a.J,b.c*a.u+b.b*a.q+b.d*a.A+a.K,b.c*a.s+b.b*a.t+b.d*a.n+a.B)}function mb(a,b){var c=b.c*a.u+b.b*a.q+b.d*a.A+a.K,d=b.c*a.s+b.b*a.t+b.d*a.n+a.B;b.c=b.c*a.p+b.b*a.v+b.d*a.w+a.J;b.b=c;b.d=d}
function nb(a,b){return new s(b.c+a.J,b.b+a.K,b.d+a.B)}
function E(a,b){var c=new D(false);if(a.Ma){b.Ba(c);return c}if(b.Ma){a.Ba(c);return c}c.p=a.p*b.p+a.v*b.u+a.w*b.s+a.J*b.G;c.u=a.u*b.p+a.q*b.u+a.A*b.s+a.K*b.G;c.s=a.s*b.p+a.t*b.u+a.n*b.s+a.B*b.G;c.G=a.G*b.p+a.H*b.u+a.I*b.s+a.L*b.G;c.v=a.p*b.v+a.v*b.q+a.w*b.t+a.J*b.H;c.q=a.u*b.v+a.q*b.q+a.A*b.t+a.K*b.H;c.t=a.s*b.v+a.t*b.q+a.n*b.t+a.B*b.H;c.H=a.G*b.v+a.H*b.q+a.I*b.t+a.L*b.H;c.w=a.p*b.w+a.v*b.A+a.w*b.n+a.J*b.I;c.A=a.u*b.w+a.q*b.A+a.A*b.n+a.K*b.I;c.n=a.s*b.w+a.t*b.A+a.n*b.n+a.B*b.I;c.I=a.G*b.w+a.H*b.A+
a.I*b.n+a.L*b.I;c.J=a.p*b.J+a.v*b.K+a.w*b.B+a.J*b.L;c.K=a.u*b.J+a.q*b.K+a.A*b.B+a.K*b.L;c.B=a.s*b.J+a.t*b.K+a.n*b.B+a.B*b.L;c.L=a.G*b.J+a.H*b.K+a.I*b.B+a.L*b.L;return c}
function pb(a,b){if(a.Ma){a.Ba(b);return true}var c=(a.p*a.q-a.u*a.v)*(a.n*a.L-a.I*a.B)-(a.p*a.t-a.s*a.v)*(a.A*a.L-a.I*a.K)+(a.p*a.H-a.G*a.v)*(a.A*a.B-a.n*a.K)+(a.u*a.t-a.s*a.q)*(a.w*a.L-a.I*a.J)-(a.u*a.H-a.G*a.q)*(a.w*a.B-a.n*a.J)+(a.s*a.H-a.G*a.t)*(a.w*a.K-a.A*a.J);if(c>-1.0E-7&&c<1.0E-7)return false;c=1/c;b.p=c*(a.q*(a.n*a.L-a.I*a.B)+a.t*(a.I*a.K-a.A*a.L)+a.H*(a.A*a.B-a.n*a.K));b.u=c*(a.A*(a.s*a.L-a.G*a.B)+a.n*(a.G*a.K-a.u*a.L)+a.I*(a.u*a.B-a.s*a.K));b.s=c*(a.K*(a.s*a.H-a.G*a.t)+a.B*(a.G*a.q-a.u*
a.H)+a.L*(a.u*a.t-a.s*a.q));b.G=c*(a.u*(a.H*a.n-a.t*a.I)+a.s*(a.q*a.I-a.H*a.A)+a.G*(a.t*a.A-a.q*a.n));b.v=c*(a.t*(a.w*a.L-a.I*a.J)+a.H*(a.n*a.J-a.w*a.B)+a.v*(a.I*a.B-a.n*a.L));b.q=c*(a.n*(a.p*a.L-a.G*a.J)+a.I*(a.s*a.J-a.p*a.B)+a.w*(a.G*a.B-a.s*a.L));b.t=c*(a.B*(a.p*a.H-a.G*a.v)+a.L*(a.s*a.v-a.p*a.t)+a.J*(a.G*a.t-a.s*a.H));b.H=c*(a.s*(a.H*a.w-a.v*a.I)+a.G*(a.v*a.n-a.t*a.w)+a.p*(a.t*a.I-a.H*a.n));b.w=c*(a.H*(a.w*a.K-a.A*a.J)+a.v*(a.A*a.L-a.I*a.K)+a.q*(a.I*a.J-a.w*a.L));b.A=c*(a.I*(a.p*a.K-a.u*a.J)+
a.w*(a.u*a.L-a.G*a.K)+a.A*(a.G*a.J-a.p*a.L));b.n=c*(a.L*(a.p*a.q-a.u*a.v)+a.J*(a.u*a.H-a.G*a.q)+a.K*(a.G*a.v-a.p*a.H));b.I=c*(a.G*(a.q*a.w-a.v*a.A)+a.p*(a.H*a.A-a.q*a.I)+a.u*(a.v*a.I-a.H*a.w));b.J=c*(a.v*(a.n*a.K-a.A*a.B)+a.q*(a.w*a.B-a.n*a.J)+a.t*(a.A*a.J-a.w*a.K));b.K=c*(a.w*(a.s*a.K-a.u*a.B)+a.A*(a.p*a.B-a.s*a.J)+a.n*(a.u*a.J-a.p*a.K));b.B=c*(a.J*(a.s*a.q-a.u*a.t)+a.K*(a.p*a.t-a.s*a.v)+a.B*(a.u*a.v-a.p*a.q));b.L=c*(a.p*(a.q*a.n-a.t*a.A)+a.u*(a.t*a.w-a.v*a.n)+a.s*(a.v*a.A-a.q*a.w));b.Ma=a.Ma;return true}
function qb(a){var b=new D(false);if(pb(a,b)){b.Ba(a);return true}return false}function rb(a){var b=new D(false);b.p=a.p;b.u=a.v;b.s=a.w;b.G=a.J;b.v=a.u;b.q=a.q;b.t=a.A;b.H=a.K;b.w=a.s;b.A=a.t;b.n=a.n;b.I=a.B;b.J=a.G;b.K=a.H;b.B=a.I;b.L=a.L;b.Ma=a.Ma;return b}
function sb(a,b,c){a.Ma=false;switch(b){case 0:a.p=c;break;case 1:a.u=c;break;case 2:a.s=c;break;case 3:a.G=c;break;case 4:a.v=c;break;case 5:a.q=c;break;case 6:a.t=c;break;case 7:a.H=c;break;case 8:a.w=c;break;case 9:a.A=c;break;case 10:a.n=c;break;case 11:a.I=c;break;case 12:a.J=c;break;case 13:a.K=c;break;case 14:a.B=c;break;case 15:a.L=c;break}}D.prototype.e=function(){var a=new D(false);this.Ba(a);return a};
D.prototype.Ba=function(a){a.p=this.p;a.u=this.u;a.s=this.s;a.G=this.G;a.v=this.v;a.q=this.q;a.t=this.t;a.H=this.H;a.w=this.w;a.A=this.A;a.n=this.n;a.I=this.I;a.J=this.J;a.K=this.K;a.B=this.B;a.L=this.L;a.Ma=this.Ma};function tb(a,b,c,d,e){b=1/Math.tan(b/2);a.p=b/c;a.u=0;a.s=0;a.G=0;a.v=0;a.q=b;a.t=0;a.H=0;a.w=0;a.A=0;a.n=e/(e-d);a.I=1;a.J=0;a.K=0;a.B=-d*e/(e-d);a.L=0;a.Ma=false}
function ub(a,b,c,d){c=c.substract(b);c.normalize();d=Ia(d,c);d.normalize();var e=Ia(c,d);a.p=d.c;a.u=e.c;a.s=c.c;a.G=0;a.v=d.b;a.q=e.b;a.t=c.b;a.H=0;a.w=d.d;a.A=e.d;a.n=c.d;a.I=0;a.J=-d.ka(b);a.K=-e.ka(b);a.B=-c.ka(b);a.L=1;a.Ma=false}function vb(a,b){var c=w(b,n.yd);b=Math.cos(c.c);var d=Math.sin(c.c),e=Math.cos(c.b),f=Math.sin(c.b),g=Math.cos(c.d);c=Math.sin(c.d);a.p=e*g;a.u=e*c;a.s=-f;var i=d*f;f=b*f;a.v=i*g-b*c;a.q=i*c+b*g;a.t=d*e;a.w=f*g+d*c;a.A=f*c-d*g;a.n=b*e;a.Ma=false}
function wb(a){var b=-Math.asin(a.s),c=Math.cos(b);b*=n.me;var d,e;if(Math.abs(c)>1.0E-8){var f=1/c;d=a.n*f;e=a.t*f;c=Math.atan2(e,d)*n.me;d=a.p*f;e=a.u*f}else{c=0;d=a.q;e=-a.v}a=Math.atan2(e,d)*n.me;if(c<0)c+=360;if(b<0)b+=360;if(a<0)a+=360;return new s(c,b,a)}function xb(a,b){a.J=b.c;a.K=b.b;a.B=b.d;a.Ma=false}function yb(a,b){a.p=b.c;a.q=b.b;a.n=b.d;a.Ma=false}function zb(a,b){var c=Ta(b),d;for(d=0;d<8;++d)mb(a,c[d]);a=c[0];b.C=a.e();b.M=a.e();for(d=1;d<8;++d)z(b,c[d])}
D.prototype.toString=function(){return this.p+" "+this.u+" "+this.s+" "+this.G+"\n"+this.v+" "+this.q+" "+this.t+" "+this.H+"\n"+this.w+" "+this.A+" "+this.n+" "+this.I+"\n"+this.J+" "+this.K+" "+this.B+" "+this.L};function Ab(a,b,c,d){this.d=this.b=this.c=0;this.ya=1;if(a!=null)this.c=a;if(b!=null)this.b=b;if(c!=null)this.d=c;if(d!=null)this.ya=d}l=Ab.prototype;l.c=0;l.b=0;l.d=0;l.ya=0;l.e=function(){var a=new Ab;this.Ba(a);return a};l.Ba=function(a){a.c=this.c;a.b=this.b;a.d=this.d;a.ya=this.ya};function Bb(a,b){return new Ab(a.c*b,a.b*b,a.d*b,a.ya*b)}Ab.prototype.ta=function(a){this.c+=a.c;this.b+=a.b;this.d+=a.d;this.ya+=a.ya;return this};
function Cb(a,b,c,d){var e=b.ka(c);if(e<0){b=Bb(b,-1);e*=-1}if(e+1>0.05)if(1-e>=0.05){var f=Math.acos(e),g=1/Math.sin(f);e=Math.sin(f*(1-d))*g;d=Math.sin(f*d)*g}else{e=1-d;d=d}else{c=new Ab(-b.b,b.c,-b.ya,b.d);e=Math.sin(n.PI*(0.5-d));d=Math.sin(n.PI*d)}b=Bb(b,e).ta(Bb(c,d));a.c=b.c;a.b=b.b;a.d=b.d;a.ya=b.ya}Ab.prototype.ka=function(a){return this.c*a.c+this.b*a.b+this.d*a.d+this.ya*a.ya};
function Db(a){var b=new D(false),c=a.c,d=a.b,e=a.d;a=a.ya;b.p=1-2*d*d-2*e*e;b.v=2*c*d+2*e*a;b.w=2*c*e-2*d*a;b.J=0;b.u=2*c*d-2*e*a;b.q=1-2*c*c-2*e*e;b.A=2*e*d+2*c*a;b.K=0;b.s=2*c*e+2*d*a;b.t=2*e*d-2*c*a;b.n=1-2*c*c-2*d*d;b.B=0;b.G=0;b.H=0;b.I=0;b.L=1;b.Ma=false;return b}function Eb(a,b){var c=a.ya*a.ya,d=a.c*a.c,e=a.b*a.b,f=a.d*a.d;b.d=Math.atan2(2*(a.c*a.b+a.d*a.ya),d-e-f+c);b.c=Math.atan2(2*(a.b*a.d+a.c*a.ya),-d-e+f+c);b.b=Math.asin(n.lc(-2*(a.c*a.d-a.b*a.ya),-1,1))}
function Fb(a,b,c,d){var e=b*0.5;b=Math.sin(e);var f=Math.cos(e);e=c*0.5;c=Math.sin(e);var g=Math.cos(e);e=d*0.5;d=Math.sin(e);var i=Math.cos(e);e=g*i;i=c*i;g=g*d;c=c*d;a.c=b*e-f*c;a.b=f*i+b*g;a.d=f*g-b*i;a.ya=f*e+b*c;a.normalize()}Ab.prototype.normalize=function(){var a=this.c*this.c+this.b*this.b+this.d*this.d+this.ya*this.ya;if(a!=1){a=a=1/Math.sqrt(a);this.c*=a;this.b*=a;this.d*=a;this.ya*=a}};Ab.prototype.toString=function(){return"(x: "+this.c+" y:"+this.b+" z:"+this.d+" w:"+this.ya+")"};function Gb(){this.Wa=[];for(var a=0;a<Hb;++a)this.Wa.push(new Wa)}Gb.prototype.Wa=null;var Hb=6;
Gb.prototype.nk=function(a){var b;b=this.Wa[2];b.j.c=a.G+a.p;b.j.b=a.H+a.v;b.j.d=a.I+a.w;b.Xa=a.L+a.J;b=this.Wa[3];b.j.c=a.G-a.p;b.j.b=a.H-a.v;b.j.d=a.I-a.w;b.Xa=a.L-a.J;b=this.Wa[5];b.j.c=a.G-a.u;b.j.b=a.H-a.q;b.j.d=a.I-a.A;b.Xa=a.L-a.K;b=this.Wa[4];b.j.c=a.G+a.u;b.j.b=a.H+a.q;b.j.d=a.I+a.A;b.Xa=a.L+a.K;b=this.Wa[0];b.j.c=a.G-a.s;b.j.b=a.H-a.t;b.j.d=a.I-a.n;b.Xa=a.L-a.B;b=this.Wa[1];b.j.c=a.s;b.j.b=a.t;b.j.d=a.n;b.Xa=a.B;for(a=a=0;a<Hb;++a){b=this.Wa[a];var c=-(1/b.j.getLength());b.j=w(b.j,c);b.Xa*=
c}};function Kb(a){var b=new s;bb(a.Wa[0],a.Wa[5],a.Wa[2],b);return b}function Lb(a){var b=new s;bb(a.Wa[0],a.Wa[5],a.Wa[3],b);return b}function Mb(a){var b=new s;bb(a.Wa[0],a.Wa[4],a.Wa[3],b);return b}function Nb(a){var b=new s;bb(a.Wa[0],a.Wa[4],a.Wa[2],b);return b}Gb.prototype.kb=function(a){var b=new y;b.reset(a.c,a.b,a.d);z(b,Kb(this));z(b,Lb(this));z(b,Nb(this));z(b,Mb(this));return b};
function Ob(a,b){b=Ta(b);for(var c=0;c<6;++c){for(var d=false,e=0;e<8;++e){var f;f=a.Wa[c];f=f.j.ka(b[e])+f.Xa;f=f<-1.0E-6?1:f>1.0E-6?0:2;if(f!=0){d=true;break}}if(!d)return false}return true};function Pb(a){if(a){this.f=new s;this.j=new s;this.Ca=4294967295;this.Aa=new Qa;this.vg=new Qa}}l=Pb.prototype;l.f=null;l.j=null;l.Ca=0;l.Aa=null;l.vg=null;function Qb(){this.l="";this.ec=false;this.cg=this.dg=this.$d=this.ae=this.Oh=this.Ga=this.fd=null}Qb.prototype.Ib=function(){if(this.fd)return this.fd.width;if(this.ae!=null)return this.ae;return 0};Qb.prototype.Hb=function(){if(this.fd)return this.fd.height;if(this.$d!=null)return this.$d;return 0};function Rb(){this.bb="";this.Ub=null;this.ba=false;this.i="SetOverlayText"}Rb.prototype.h=function(a,b){var c=new Rb;c.bb=this.bb;c.Ub=this.Ub;c.ba=this.ba;if(c.Ub==a)c.Ub=b;return c};
Rb.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.ba)c=a;else if(this.Ub!=-1)c=G(b,this.Ub);if(c&&c.jm){var d=this.bb.indexOf("$");if(d!=-1){a=this.bb;for(var e=0,f=true;f;){f=false;d=a.indexOf("$",e);if(d!=-1){e=d+1;var g=a.indexOf("$",d+1);if(g!=-1){f=true;var i=a.substr(d+1,g-(d+1));if(i=Sb(i,false,b)){d=a.substr(0,d);d+=Tb(i);e=d.length+1;d+=a.substr(g+1,a.length-g);a=d}}}}c.jm(a)}else c.jm(this.bb)}}};
function Ub(){this.kj=0;this.kf=null;this.ba=false;this.i="MakeSceneNodeInvisible"}Ub.prototype.h=function(a,b){var c=new Ub;c.kj=this.kj;c.kf=this.kf;c.ba=this.ba;if(c.kf==a)c.kf=b;return c};Ub.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.ba)c=a;else if(this.kf!=-1)c=G(b,this.kf);if(c)switch(this.kj){case 0:c.X=false;break;case 1:c.X=true;break;case 2:c.X=!c.X;break}}};function Vb(){this.Rc=this.Ld=false;this.i="ChangeSceneNodePosition"}
Vb.prototype.h=function(a,b){var c=new Vb;c.le=this.le;c.Nc=this.Nc;c.Mc=this.Mc;c.ba=this.ba;c.ff=this.ff;c.ha=this.ha?this.ha.e():null;c.Ki=this.Ki?this.Ki.e():null;c.Ld=this.Ld;c.Rc=this.Rc;if(c.Nc==a)c.Nc=b;if(c.Mc==a)c.Mc=b;return c};
Vb.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.ba)c=a;else if(this.Nc!=-1)c=G(b,this.Nc);if(c){var d=null;switch(this.le){case 0:d=this.ha.e();break;case 1:d=c.f.add(this.ha);break;case 2:var e=null;if(this.ff)e=a;else if(this.Mc!=-1)e=G(b,this.Mc);if(e)d=e.f.add(this.ha);break;case 3:d=this.ha.getLength();a=c.aa;b=new s(1,0,0);jb(a,b);if(c.k()=="camera")b=c.fa.substract(c.f);va(b,d);d=c.f.add(b);break;case 4:a=new y;a.reset(this.ha.c,this.ha.b,this.ha.d);z(a,this.Ki);d=new s;d.c=
a.C.c+Math.random()*(a.M.c-a.C.c);d.b=a.C.b+Math.random()*(a.M.b-a.C.b);d.d=a.C.d+Math.random()*(a.M.d-a.C.d);break;case 5:d=b.Ok.add(this.ha);break}if(d!=null)if(this.Ld&&this.Rc>0){a=new Wb;a.Z=c.f.e();a.O=d;a.kd=this.Rc;a.eh=true;Xb(a);Yb(c,a)}else c.f=d}}};function Zb(){this.i="ChangeSceneNodeRotation"}Zb.prototype.h=function(a,b){var c=new Zb;c.vl=this.vl;c.mg=this.mg;c.ba=this.ba;c.ha=this.ha?this.ha.e():null;c.Kj=this.Kj;c.Hl=this.Hl;if(c.mg==a)c.mg=b;return c};
Zb.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.ba)c=a;else if(this.mg!=-1)c=G(b,this.mg);if(c){b=null;switch(this.vl){case 0:b=this.ha.e();break;case 1:b=c.S.add(this.ha);break}if(b)if(this.Kj){a=new $b;b=b;var d=c.S,e=this.Hl;a.dn=true;a.oe=b.e();a.um=d.e();a.ul=a.Ka+e;Yb(c,a)}else c.S=b}}};function dc(){this.i="ChangeSceneNodeScale"}dc.prototype.h=function(a,b){var c=new dc;c.xl=this.xl;c.ng=this.ng;c.ba=this.ba;c.ha=this.ha?this.ha.e():null;if(c.ng==a)c.ng=b;return c};
dc.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.ba)c=a;else if(this.ng!=-1)c=G(b,this.ng);if(c)switch(this.xl){case 0:c.ma=this.ha.e();break;case 1:c.ma=Fa(c.ma,this.ha);break}}};function ec(){this.i="ChangeSceneNodeTexture"}ec.prototype.h=function(a,b){var c=new ec;c.jd=this.jd;c.Ub=this.Ub;c.ba=this.ba;c.yg=this.yg;c.Ik=this.Ik;if(c.Ub==a)c.Ub=b;return c};
ec.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.ba)c=a;else if(this.Ub!=-1)c=G(b,this.Ub);if(c)if(c.k()=="2doverlay")c.Ga=this.yg;else{a=c.Wc();if(this.jd==0)for(b=0;b<a;++b){var d=c.nc(b);d.ab=this.yg}else if(this.jd==1){d=c.nc(this.Ik);if(d!=null)d.ab=this.yg}}}};function fc(){this.i="ExecuteJavaScript"}fc.prototype.h=function(){var a=new fc;a.Lk=this.Lk;return a};fc.prototype.execute=function(){eval(this.Lk)};function gc(){this.i="OpenWebpage"}
gc.prototype.h=function(){var a=new gc;a.Kl=this.Kl;a.fa=this.fa;return a};gc.prototype.execute=function(){window.open(this.Kl,this.fa)};function hc(){this.i="SetSceneNodeAnimation"}hc.prototype.h=function(a,b){var c=new hc;c.lg=this.lg;c.ba=this.ba;c.Pb=this.Pb;c.tk=this.tk;if(c.lg==a)c.lg=b;return c};hc.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.ba)c=a;else if(this.lg!=-1)c=G(b,this.lg);if(c){a=c;a.k()=="animatedmesh"&&ic(a,this.tk,this.Pb)}}};
function jc(a){this.za=a;this.i="SwitchToScene"}jc.prototype.h=function(){var a=new jc;a.jf=this.jf;return a};jc.prototype.execute=function(){this.za&&kc(this.za,this.jf,true)};function lc(a){this.za=a;this.i="SetActiveCamera"}lc.prototype.h=function(a,b){var c=new lc;c.Hf=this.Hf;if(c.Hf==a)c.Hf=b;return c};lc.prototype.execute=function(a,b){if(a&&b){a=null;if(this.Hf!=-1)a=G(b,this.Hf);a!=null&&a.k()=="camera"&&this.za&&mc(this.za,a)}};
function nc(){this.Ld=false;this.Rc=0;this.i="SetCameraTarget"}nc.prototype.h=function(){var a=new nc;a.le=this.le;a.Nc=this.Nc;a.Mc=this.Mc;a.ba=this.ba;a.ff=this.ff;a.ha=this.ha?this.ha.e():null;a.Ld=this.Ld;a.Rc=this.Rc;return a};
nc.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.ba)c=a;else if(this.Nc!=-1)c=G(b,this.Nc);var d=c;if(d.k()=="camera"){var e=d.fa.e();switch(this.le){case 0:e=this.ha.e();break;case 1:e=c.f.add(this.ha);break;case 2:var f=null;if(this.ff)f=a;else if(this.Mc!=-1)f=G(b,this.Mc);if(f)e=f.f.add(this.ha);break}if(e!=null)if(this.Ld&&this.Rc>0){a=new Wb;a.Z=d.fa.e();a.O=e;a.kd=this.Rc;a.eh=true;a.Ug=true;Xb(a);Yb(c,a)}else{oc(d,e);c=N(d,"camerafps");c!=null&&pc(c,e)}}}};
function qc(){this.Pi=this.be=this.Vh=0;this.mf=-1;this.Sc=100;this.i="Shoot";this.lf=-1;this.Rj=false;this.Qg=this.Tg=null;this.Qj=new s}qc.prototype.h=function(a,b){var c=new qc;c.Vh=this.Vh;c.be=this.be;c.Pi=this.Pi;c.mf=this.mf;c.Sc=this.Sc;c.lf=this.lf;c.Rj=this.Rj;c.Tg=this.Tg;c.Qg=this.Qg?this.Qg.h(a,b):null;c.Qj=this.Qj.e();if(c.mf==a)c.mf=b;if(c.lf==a)c.lf=b;return c};
qc.prototype.execute=function(a,b){if(a&&b){var c=new Ma,d=false,e=null,f=null,g=rc(b,"gameai");if(this.lf!=-1){a=G(b,this.lf);if(a!=null){d=true;e=a;c.Z=Ra(a.kb());c.Z.ta(this.Qj);mb(a.aa,c.Z);f=b.ga;if(this.Rj&&f){a=new Ma;a.Z=O(f);a.O=f.fa;f=Na(a);va(f,this.Sc);a.O=a.Z.add(f);tc(this,a,g,this.Sc,b);uc(this,a,g,this.Sc,e,b);c.O=a.O}else{f=a.aa;if(this.Tg){a=new D;vb(a,this.Tg);f=E(f,a)}c.O.set(1,0,0);jb(f,c.O);c.O.ta(c.Z)}}}else if(a!=null){e=a;if((f=N(a,"gameai"))&&f.yk){c=f.zk;d=true}}if(!d)if(f=
b.ga){e=f;c.Z=O(f);c.O=f.fa;d=true}if(d){d=Na(c);va(d,this.Sc);c.O=c.Z.add(d);tc(this,c,g,this.Sc,b);if(this.Vh==1){g=null;if(this.mf!=-1)g=G(b,this.mf);if(g){g=g.h(b.Ja,-1,-1);vc(b.Ja,g);if(g!=null){g.f=c.Z;P(g);g.X=true;g.Ea=-1;g.l="";b=Na(c);b=Ja(b);g.S=b;b=this.Pi;if(b==0)b=1;d=new Wb;d.Z=c.Z;d.O=c.O;d.kd=c.getLength()/b;d.eh=true;Xb(d);d.rn=true;d.kn=e;d.jn=this.be;d.$i=true;d.Gf=this.Qg;d.ih=this.Sc/b;Yb(g,d)}}}else if(this.Vh==0){e=uc(this,c,g,this.Sc,e,b);if(e!=null){b.Ok=c.O.e();(c=N(e,"gameai"))&&
wc(c,this.be,e)}}}}};function tc(a,b,c,d,e){if(c.length!=0)if(a=N(c[0],"gameai"))if(a=a.ja){e=xc(yc.prototype,e,b.Z,b.O,a,true);if(e<d){d=Na(b);va(d,e);b.O=b.Z.add(d)}}}function uc(a,b,c,d,e,f){a=d;d=null;for(var g=0;g<c.length;++g)if(c[g]!==e){var i=N(c[g],"gameai");if(!(i&&!(i.Mb>0))){i={};i.Ha=0;if(zc(yc.prototype,f,c[g],b,false,false,null,i))if(i.Ha<a){a=i.Ha;d=c[g]}}}if(d){c=Na(b);va(c,a);b.O=b.Z.add(c)}return d}function Ac(){this.i="SetOrChangeAVariable"}
Ac.prototype.h=function(){var a=new Ac;a.Gb=this.Gb;a.hl=this.hl;a.vf=this.vf;a.Md=this.Md;return a};
Ac.prototype.execute=function(a,b){if(a&&b)if(this.Gb!=null){a=Sb(this.Gb,true,b);if(a!=null){var c=null;if(this.vf==1){c=Sb(this.Md,false,b);if(c==null)return}if(c==null){c=new Bc;Cc(c,this.Md)}switch(this.hl){case 0:c=c;if(c!=null){a.Yb=c.Yb;a.Qc=c.Qc;a.dc=c.dc;a.cc=c.cc}break;case 1:Dc(a,Q(a)+Q(c));break;case 2:Dc(a,Q(a)-Q(c));break;case 3:c=Q(c);Dc(a,c!=0?Q(a)/c:0);break;case 4:c=Q(c);Ec(a,c!=0?Math.floor(Q(a)/c):0);break;case 5:Dc(a,Q(a)*Q(c));break;case 6:Ec(a,Math.floor(Q(a)*Q(c)));break}Fc(a,
b)}}};function Gc(){this.i="IfVariable"}Gc.prototype.h=function(a,b){var c=new Gc;c.Gb=this.Gb;c.Ri=this.Ri;c.vf=this.vf;c.Md=this.Md;c.o=this.o?this.o.h(a,b):null;c.bi=this.bi?this.bi.h(a,b):null;return c};
Gc.prototype.execute=function(a,b){if(a&&b)if(this.Gb!=null){var c=Sb(this.Gb,true,b);if(c!=null){var d=null;if(this.vf==1){d=Sb(this.Md,false,b);if(d==null)return}if(d==null){d=new Bc;Cc(d,this.Md)}b=false;switch(this.Ri){case 0:case 1:b=c.Yb==0&&d.Yb==0?Tb(c)==Tb(d):n.D(Q(c),Q(d));if(this.Ri==1)b=!b;break;case 2:b=Q(c)>Q(d);break;case 3:b=Q(c)<Q(d);break}if(b)this.o&&this.o.execute(a);else this.bi&&this.bi.execute(a)}}};function Hc(){this.Uh=null;this.ba=false;this.i="RestartBehaviors"}
Hc.prototype.h=function(a,b){var c=new Hc;c.Uh=this.Uh;c.ba=this.ba;if(c.ba==a)c.ba=b;return c};Hc.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.ba)c=a;else if(this.Uh!=-1)c=G(b,this.Uh);if(c)for(a=0;a<c.ia.length;++a){b=c.ia[a];b!=null&&b.reset()}}};function Ic(){this.i="PlaySound"}Ic.prototype.h=function(a,b){var c=new Ic;c.Oc=this.Oc;c.gg=this.gg;c.kl=this.kl?this.kl.e():null;c.ie=this.ie;c.xh=this.xh;c.Ze=this.Ze;c.Bg=this.Bg;c.fg=this.fg;c.Eb=this.Eb;if(c.Oc==a)c.Oc=b;return c};
Ic.prototype.execute=function(a,b){if(!(b==null||this.Eb==null))this.Jc=Jc(n.Pd,this.Eb,this.Ze,this.Bg)};function Kc(){this.i="StopSpecificSound"}Kc.prototype.h=function(){var a=new Kc;a.Eb=this.Eb;return a};Kc.prototype.execute=function(a,b){b==null||this.Eb==null||Lc(n.Pd,this.Eb.l)};function Mc(){this.i="StopSound"}Mc.prototype.h=function(){var a=new Mc;a.nn=this.nn;a.up=this.up;return a};
Mc.prototype.execute=function(){for(var a=n.Pd,b=0;b<a.Ab.length;++b){var c=a.Ab[b];c.oi=true;c.src.Vb.pause()}a.Ab=[]};function Nc(){this.i="StoreLoadVariable"}Nc.prototype.h=function(){var a=new Nc;a.qj=this.qj;a.Gb=this.Gb;return a};function Oc(a,b,c,d){a=new Date;a.setDate(a.getDate()+d);c=escape(c)+("; expires="+a.toUTCString());document.cookie=b+"="+c}
function Pc(a,b){a=document.cookie.split(";");for(var c=0;c<a.length;++c){var d=a[c],e=d.indexOf("="),f=d.substr(0,e);f=f.replace(/^\s+|\s+$/g,"");if(f==b)return unescape(d.substr(e+1))}return null}Nc.prototype.execute=function(a,b){if(!(this.Gb==null||this.Gb=="")){a=Sb(this.Gb,this.qj,b);if(a!=null)try{this.qj?Cc(a,Pc(this,a.getName())):Oc(this,a.getName(),Tb(a),99)}catch(c){}}};function Qc(a){this.He=[];this.sa=a}
Qc.prototype.execute=function(a){for(var b=0;b<this.He.length;++b)this.He[b].execute(a,this.sa)};function Rc(a,b){b!=null&&a.He.push(b)}function Sc(a,b){for(var c=0;c<a.He.length;++c){var d=a.He[c];if(d.i==b)return d}return null}Qc.prototype.h=function(a,b){for(var c=new Qc(this.sa),d=0;d<this.He.length;++d){var e=this.He[d];e.h!=null&&Rc(c,e.h(a,b))}return c};function Tc(a){this.za=a;this.i="RestartScene"}Tc.prototype.h=function(){var a=new Tc;a.jf=this.jf;return a};
Tc.prototype.execute=function(){this.za&&this.za.gm(this.jf)};function Uc(){this.i="ActionDeleteSceneNode"}Uc.prototype.h=function(a,b){var c=new Uc;c.pg=this.pg;c.Ck=this.Ck;c.Dl=this.Dl;if(c.pg==a)c.pg=b;return c};Uc.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.Ck)c=a;else if(this.pg!=-1)c=G(b,this.pg);c!=null&&Vc(b,c,this.Dl)}};function Wc(){this.i="ActionCloneSceneNode"}
Wc.prototype.h=function(a,b){var c=new Wc;c.og=this.og;c.xk=this.xk;c.o=this.o?this.o.h(a,b):null;if(c.og==a)c.og=b;return c};Wc.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.xk)c=a;else if(this.og!=-1)c=G(b,this.og);if(c){a=c.Ea;var d=-1;d=Xc(b);a=c.h(c.sb,a,d);if(a!=null){a.Ea=d;vc(c.sb,a);b.xi(c,a);if(c=c.$a)if(c=c.h(a)){a.$a=c;b.wd&&Yc(b.wd,c)}this.o&&this.o.execute(a)}}}};function Zc(a){this.i="ActionPlayMovie";this.za=a}
Zc.prototype.h=function(a,b){var c=new Zc;c.Ze=this.Ze;c.Qi=this.Qi;c.Il=this.Il;c.Oc=this.Oc;c.gg=this.gg;c.Tk=this.Tk;c.Ii=this.Ii?this.Ii.h(a,b):null;c.Hi=this.Hi?this.Hi.h(a,b):null;if(c.Oc==a)c.Oc=b;return c};
Zc.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.gg)c=a;else if(this.Oc!=-1)c=G(b,this.Oc);a:{a=this.za;var d=this.Il;b=this.Ii;for(var e=this.Hi,f=0;f<a.Kg.length;++f){var g=a.Kg[f];if(g.filename==d){a=g;break a}}if(this.Qi==0){d=new $c(d,a.T);d.fk=b;d.gk=e;a.Kg.push(d);a=d}else a=null}if(a!=null)switch(this.Qi){case 0:a.play(this.Ze);if(c)if(c.k()=="2doverlay")c.Ga=a.Di;else{c=c.nc(this.Tk);if(c!=null)c.ab=a.Di}break;case 1:a.pause();break;case 2:a.stop();break}}};
function $c(a,b){this.filename=a;this.qd=null;this.hm=b;this.gk=this.fk=this.Di=null;this.Vq=this.ti=this.uo=false;this.state=0;this.Yl=this.oo=false;this.uq=function(){this.state=2;this.qd.play();this.uo=true;var c=this.Di,d=ad(this.hm,this.qd,true);c.Ga=d.Ga;c.ae=d.ae;c.$d=d.$d;c.dg=d.dg;c.cg=d.cg};this.vq=function(){this.state=0;this.ti=true};this.Hp=function(){this.state=0;this.Yl=this.ti=true};this.play=function(c){if(!(this.state==2||this.state==1)){if(this.qd)if(this.state==3){this.qd.play();
this.state=2;this.ti=false;return}else if(this.state==0){this.qd.currentTime=0;this.qd.play();this.state=2;this.ti=false;return}var d=document.createElement("video"),e=this;this.qd=d;this.oo=c;d.addEventListener("canplaythrough",function(){e.uq()},true);d.addEventListener("ended",function(){e.vq()},true);d.addEventListener("error",function(){e.Hp()},true);d.preload="auto";d.src=a;d.style.display="none";if(this.oo)d.loop=true;this.state=1;c=document.createElement("canvas");if(c!=null){c.width=16;c.height=
16;this.Di=ad(this.hm,c,true)}}};this.pause=function(){if(this.state==2){this.qd.pause();this.state=3}};this.stop=function(){if(this.state==2){this.qd.pause();this.state=0}};this.sq=function(){this.uo&&this.state==2&&bd(this.hm,this.Di,this.qd)};this.Rp=function(){if(this.state==0)return true;return this.ti}};function cd(){this.i=0;this.kc=this.ab=null;this.yf=true;this.yc=this.Kb=false;this.Zd=true}cd.prototype.nk=function(a){if(a){this.i=a.i;this.yf=a.yf;this.ab=a.ab;this.kc=a.kc;this.Kb=a.Kb;this.yc=a.yc;this.Zd=a.Zd}};cd.prototype.e=function(){var a=new cd;a.i=this.i;a.Ll=this.Ll;a.yf=this.yf;a.ab=this.ab;a.kc=this.kc;a.Kb=this.Kb;a.yc=this.yc;a.Zd=this.Zd;return a};function dd(a){return a.i==ed||a.i==fd||a.i==gd||a.i==hd}l=cd.prototype;l.i=0;l.ab=null;l.kc=null;l.yf=true;l.Ll=true;l.Kb=false;
l.Zd=true;l.yc=false;var ed=12,fd=13,hd=16,gd=14;function id(){this.g=new y;this.P=new cd;this.ea=[];this.m=[];this.Ua=null;this.Dj=this.Cj=false;this.vd=this.Kd=null}l=id.prototype;l.g=null;l.P=null;l.ea=null;l.m=null;l.Ua=null;l.Kd=null;l.vd=null;l.update=function(a,b){if(a)this.Cj=true;else if(b)this.Dj=true;else this.Ua=null};function jd(a){if(!a.m||a.m.length==0)a.g.reset(0,0,0);else{var b=a.m[0];a.g.C=b.f.e();a.g.M=b.f.e();for(var c=1;c<a.m.length;++c){b=a.m[c];z(a.g,b.f)}}}
id.prototype.h=function(){var a=new id;a.g=this.g.e();a.P=this.P.e();if(this.m)for(var b=0;b<this.m.length;++b)a.m.push(this.m[b]);if(this.ea)for(b=0;b<this.ea.length;++b)a.ea.push(this.ea[b]);if(this.Kd)for(b=0;b<this.Kd.length;++b)a.Kd.push(this.Kd[b].e());if(this.vd)for(b=0;b<this.vd.length;++b)a.vd.push(this.vd[b].e());return a};function kd(){this.g=new y;this.va=[]}kd.prototype.sd=function(a){this.va.push(a)};function ld(a){var b=0;if(a.va)for(var c=0;c<a.va.length;++c)if(a.va[c].ea)b+=a.va[c].ea.length;return b/3}kd.prototype.h=function(){var a=new kd;a.g=this.g.e();if(this.va)for(var b=0;b<this.va.length;++b)this.va[b]&&a.va.push(this.va[b].h());return a};n.ap=function(){this.Uk=[]};function md(a,b){for(var c=0;c<a.Uk.length;++c){var d=a.Uk[c];if(d.l==b)return d}return null}n.op=function(){this.l="";this.wh=new D;this.Y=[];this.Wg=[];this.df=[];this.pe=[];this.hf=[];this.xf=[];this.Yh=new y;this.gj=new D;this.Pe=new D;this.Vf=new D;this.qc=new s(0,0,0);this.Jb=new s(1,1,1);this.rc=new Ab;this.nh=new D;this.Fm=false;this.wo=this.xo=this.po=-1};n.sp=function(){this.Ci=this.Fi=this.li=0;this.pn=new s;this.on=new s};
n.rp=function(){this.frame=0;this.scale=new s};n.pp=function(){this.frame=0;this.position=new s};n.qp=function(){this.frame=0;this.rotation=new Ab};n.Fh=function(){this.l="";this.wc=this.O=this.ud=0};n.Fh.prototype.l="";n.Fh.prototype.ud=0;n.Fh.prototype.O=0;n.Fh.prototype.wc=0;n.zl=function(){this.l="";this.td=[];this.ad=0;this.Ya=[];this.qa=[];this.gf=[];this.Bk=0;this.Um=this.Ad=false;this.zq=this.Zo=this.Nk=0;this.ob=new y;this.Qf=1;this.Zj=[];this.nm=true;this.Yk=[]};n.zl.prototype.sd=function(a){this.Ya.push(a)};
n.zl.prototype.kb=ea("ob");function nd(a,b,c){if(!(b==null&&c!=null))if(b==null)for(b=0;b<a.gf.length;++b)nd(a,a.gf[b],null);else{b.gj=c==null?b.wh.e():E(c.gj,b.wh);b.Vf=b.wh.e();b.Pe=b.gj.e();if(gb(b.nh)){b.nh=b.gj.e();qb(b.nh)}for(c=0;c<b.Y.length;++c)nd(a,b.Y[c],b)}}
function od(a,b,c,d,e,f,g,i){var j=-1;e=j=-1;var m=c.df;e=c.pe;c=c.hf;var o;if(m.length){j=-1;if(j==-1)for(g=0;g<m.length;++g){o=m[g];if(o.frame>=b){j=g;break}}if(j!=-1)if(a.Qf==0||j==0){o=m[j];o.position.e()}else if(a.Qf==1){o=m[j];m=m[j-1];g=b-o.frame;j=m.frame-b;wa(d,ua(Da(Da(m.position.substract(o.position),1/(g+j)),g),o.position))}}if(e.length){j=-1;if(j==-1)for(g=0;g<e.length;++g){d=e[g];if(d.frame>=b){j=g;break}}if(j!=-1)if(a.Qf==0||j==0){d=e[j];d.scale.e()}else if(a.Qf==1){d=e[j];e=e[j-1];
g=b-d.frame;j=e.frame-b;wa(f,ua(Da(Da(e.scale.substract(d.scale),1/(g+j)),g),d.scale))}}if(c.length){e=-1;if(e==-1)for(g=0;g<c.length;++g){f=c[g];if(f.frame>=b){e=g;break}}if(e!=-1)if(a.Qf==0||e==0){f=c[e];f.rotation.e()}else if(a.Qf==1){f=c[e];a=c[e-1];g=b-f.frame;j=a.frame-b;Cb(i,f.rotation,a.rotation,g/(g+j))}}}function pd(a,b,c){if(b==null)for(b=0;b<a.gf.length;++b)pd(a,a.gf[b],null);else{b.Pe=c==null||b.Fm?b.Vf.e():E(c.Pe,b.Vf);for(c=0;c<b.Y.length;++c)pd(a,b.Y[c],b)}}
function qd(a,b,c,d){if(b.xf.length){c=E(b.Pe,b.nh);for(var e=new s,f=new s,g=a.Ya,i,j=0;j<b.xf.length;++j){var m=b.xf[j];i=m.pn;e.c=i.c*c.p+i.b*c.v+i.d*c.w+c.J;e.b=i.c*c.u+i.b*c.q+i.d*c.A+c.K;e.d=i.c*c.s+i.b*c.t+i.d*c.n+c.B;d&&kb(c,f,m.on);i=g[m.li];i=i.m[m.Fi];if(a.Zj[m.li][m.Fi]){i.f.ta(w(e,m.Ci));d&&i.j.ta(w(f,m.Ci))}else{a.Zj[m.li][m.Fi]=true;i.f=w(e,m.Ci);if(d)i.j=w(f,m.Ci)}}}for(c=0;c<b.Y.length;++c)qd(a,b.Y[c],b,d)}
function rd(a,b){if(!b)return null;var c=a.Yk.length;b=b.toLowerCase();for(var d=0;d<c;++d){var e=a.Yk[d];if(e.l&&e.l.toLowerCase()==b)return e}return null};function sd(){this.Va=[];this.T=null;this.Fj=""}
function td(a,b,c){if(b==null||b=="")return null;var d=ud(a,b);if(d!=null)return d;if(c){d=new Qb;d.l=b;vd(a,d);d.fd=new Image;d.fd.onload=function(){var e=d,f=a.T;if(f!=null){var g=f.$,i=g.createTexture(),j=e.fd;if((j.width&j.width-1)!=0||(j.height&j.height-1)!=0){var m=document.createElement("canvas");if(m!=null){m.width=wd(f,j.width);m.height=wd(f,j.height);m.getContext("2d").drawImage(j,0,0,j.width,j.height,0,0,m.width,m.height);j=m}}g.bindTexture(g.TEXTURE_2D,i);xd(f,i,j);g.generateMipmap(g.TEXTURE_2D);
g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.LINEAR);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.LINEAR_MIPMAP_NEAREST);g.bindTexture(g.TEXTURE_2D,null);f.pm=true;e.Ga=i;e.ec=true}};d.fd.src=d.l;return d}return null}function ud(a,b){for(var c=0;c<a.Va.length;++c){var d=a.Va[c];if(d.l==b)return d}return null}function vd(a,b){if(b!=null){ud(a,b.l)!=null&&n.na.print("ERROR! Cannot add the texture multiple times: "+b.l);a.Va.push(b)}};function yd(a){this.Cn=a;this.Cp=a.length;this.La=0;this.Jq=null;this.Kq=8;this.Gn=false}function zd(a){return a.Cp-a.La}function Ad(a,b){return a.Cn.charCodeAt(b)&255}function S(a){return Bd(a,1)!=0}function Cd(a,b){for(var c=0,d=a.La,e=d+b;e>d;)c=c*256+Ad(a,--e);a.La+=b;return c}function Bd(a,b){a=Cd(a,b);if(a&1<<b*8-1)a=(~a+1)*-1;return a}function V(a){return Bd(a,4)}
function W(a){var b;var c=a.Cn,d=a.La;b=c.charCodeAt(d+3)&255;var e=c.charCodeAt(d+2)&255,f=c.charCodeAt(d+1)&255;d=c.charCodeAt(d+0)&255;c=(b<<1&255|e>>7)-127;e=(e&127)<<16|f<<8|d;b=e==0&&c==-127?0:(1-2*(b>>7))*(1+e*Math.pow(2,-23))*Math.pow(2,c);a.La+=4;return b}yd.prototype.ua=function(a,b){this.Gn=a||0;this.buffer=[];if(b){for(var c=a=b.length,d=this.buffer=new Array(a);c;d[a-c]=b.charCodeAt(--c));this.Gn&&d.reverse()}};yd.prototype.reset=function(){this.La=0;return this};function Dd(){this.$=this.canvas=null;this.height=this.width=0;this.pm=false;this.jb=new D;this.Nd=new D;this.ja=new D;this.Zb=new ra;this.Zb.Kc=0;this.Zb.Hc=0;this.Zb.Ec=0;this.Tq=this.Uq=null;this.eb=[];this.qb=[];this.ib=[];this.rb=[];this.Xe=30;this.Sj=this.Gh=this.ll=this.Wm=this.Vm=null;this.Ve=[];this.Vc=this.bj=null;this.Nn=false;this.vi=true;this.Ui=null;this.lh=this.Rf=false;this.xc=new ra;this.kh=0.01}Dd.prototype.Gh=null;Dd.prototype.Ib=ea("width");
function Ed(a){var b=a.pm;a.pm=false;return b}Dd.prototype.Hb=ea("height");
function Fd(a,b){if(b!=null){var c=a.$;if(c!=null){var d=null;try{d=a.lh?b.yc?a.rb[b.i]:a.ib[b.i]:b.yc?a.qb[b.i]:a.eb[b.i]}catch(e){}if(d!=null){a.Vc=d;c.useProgram(d);if(a.Gh!=null)try{a.Gh(b.i)}catch(f){}d.km!=null&&d.km();if(d.In){c.enable(c.BLEND);c.blendFunc(d.Jn,d.Hn)}else c.disable(c.BLEND);!b.yf||b.i==ed||b.i==fd||b.i==hd?c.depthMask(false):c.depthMask(true);b.Ll?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST);c.depthFunc(a.Rf?c.GREATER:c.LEQUAL);b.Zd?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE);
if(b.ab&&b.ab.ec){c.activeTexture(c.TEXTURE0);c.bindTexture(c.TEXTURE_2D,b.ab.Ga);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,b.Kb?c.CLAMP_TO_EDGE:c.REPEAT);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,b.Kb?c.CLAMP_TO_EDGE:c.REPEAT)}else{c.activeTexture(c.TEXTURE0);c.bindTexture(c.TEXTURE_2D,null)}c.uniform1i(c.getUniformLocation(d,"texture1"),0);if(b.kc&&b.kc.ec){c.activeTexture(c.TEXTURE1);c.bindTexture(c.TEXTURE_2D,b.kc.Ga)}else{c.activeTexture(c.TEXTURE1);c.bindTexture(c.TEXTURE_2D,null)}c.uniform1i(c.getUniformLocation(d,
"texture2"),1)}}}}
function Gd(a,b,c){if(b!=null)if(a.$!=null){if(b.Ua==null)Hd(a,b);else if(b.Dj){if(!(b.m.length==0||b.ea.length==0))if(b.Ua.Ho<b.m.length||b.Ua.ik<b.ea.length){b.Ua=null;Hd(a,b)}else if(b.Ua!=null){for(var d=a.$,e=b.m.length,f=b.Ua.qo,g=b.Ua.Fp,i=0;i<e;++i){var j=b.m[i];f[i*3+0]=j.f.c;f[i*3+1]=j.f.b;f[i*3+2]=j.f.d;g[i*4+0]=n.nd(j.Ca)/255;g[i*4+1]=n.md(j.Ca)/255;g[i*4+2]=n.ld(j.Ca)/255;g[i*4+3]=n.xe(j.Ca)/255}d.bindBuffer(d.ARRAY_BUFFER,b.Ua.lk);d.bufferSubData(d.ARRAY_BUFFER,0,f);d.bindBuffer(d.ARRAY_BUFFER,
b.Ua.Ql);d.bufferSubData(d.ARRAY_BUFFER,0,g);if(b.Ua.ik<b.ea.length){e=b.ea.length;f=new WebGLUnsignedShortArray(e);for(g=0;g<e;g+=3){f[g+0]=b.ea[g+0];f[g+1]=b.ea[g+2];f[g+2]=b.ea[g+1]}b.Ua.hk=d.createBuffer();d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,b.Ua.hk);d.bufferData(d.ELEMENT_ARRAY_BUFFER,f,d.STATIC_DRAW);d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,null)}b.Ua.ik=b.ea.length;b.Ua.Ho=b.m.length}}else b.Cj&&Id(a,b);b.Cj=false;b.Dj=false;b=b.Ua;c=c;d=a.$;e=b.om&&b.Pl;d.enableVertexAttribArray(0);d.enableVertexAttribArray(1);
d.enableVertexAttribArray(2);d.enableVertexAttribArray(3);d.enableVertexAttribArray(4);d.bindBuffer(d.ARRAY_BUFFER,b.lk);d.vertexAttribPointer(0,3,d.FLOAT,false,0,0);d.bindBuffer(d.ARRAY_BUFFER,b.Fo);d.vertexAttribPointer(1,2,d.FLOAT,false,0,0);d.bindBuffer(d.ARRAY_BUFFER,b.Go);d.vertexAttribPointer(2,2,d.FLOAT,false,0,0);d.bindBuffer(d.ARRAY_BUFFER,b.ko);d.vertexAttribPointer(3,3,d.FLOAT,false,0,0);d.bindBuffer(d.ARRAY_BUFFER,b.Ql);d.vertexAttribPointer(4,4,d.FLOAT,false,0,0);if(e){d.enableVertexAttribArray(5);
d.enableVertexAttribArray(6);d.bindBuffer(d.ARRAY_BUFFER,b.om);d.vertexAttribPointer(5,3,d.FLOAT,false,0,0);d.bindBuffer(d.ARRAY_BUFFER,b.Pl);d.vertexAttribPointer(6,3,d.FLOAT,false,0,0)}d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,b.hk);g=new D(false);a.jb.Ba(g);g=E(g,a.Nd);g=E(g,a.ja);f=a.Vc;f.fo!=null&&d.uniformMatrix4fv(f.fo,false,Jd(a,g));if(f.eo!=null){g=new D(true);g=E(g,a.Nd);g=E(g,a.ja);qb(g);g=rb(g);d.uniformMatrix4fv(f.eo,false,Jd(a,g))}if(f.bo!=null){g=new D(true);g=E(g,a.Nd);g=E(g,a.ja);d.uniformMatrix4fv(f.bo,
false,Jd(a,g))}f.co!=null&&d.uniformMatrix4fv(f.co,false,Jd(a,rb(a.ja)));f.ao!=null&&Ld(a,f,e,e);f.Zn!=null&&a.$.uniform4f(f.Zn,a.xc.Kc,a.xc.Hc,a.xc.Ec,1);f.$n!=null&&a.$.uniform1f(f.$n,a.kh);if(c==null)c=b.ik;d.drawElements(d.TRIANGLES,c,d.UNSIGNED_SHORT,0);if(e){d.disableVertexAttribArray(5);d.disableVertexAttribArray(6)}}}
function Id(a,b){if(b.Ua!=null){a=a.$;for(var c=b.m.length,d=b.Ua.qo,e=0;e<c;++e){var f=b.m[e];d[e*3+0]=f.f.c;d[e*3+1]=f.f.b;d[e*3+2]=f.f.d}a.bindBuffer(a.ARRAY_BUFFER,b.Ua.lk);a.bufferSubData(a.ARRAY_BUFFER,0,d)}}
function Hd(a,b){if(b.Ua==null){a=a.$;var c={},d=b.m.length,e=new WebGLFloatArray(d*3),f=new WebGLFloatArray(d*3),g=new WebGLFloatArray(d*2),i=new WebGLFloatArray(d*2),j=new WebGLFloatArray(d*4),m=null,o=null;if(b.Kd)m=new WebGLFloatArray(d*3);if(b.vd)o=new WebGLFloatArray(d*3);for(var p=0;p<d;++p){var h=b.m[p];e[p*3+0]=h.f.c;e[p*3+1]=h.f.b;e[p*3+2]=h.f.d;f[p*3+0]=h.j.c;f[p*3+1]=h.j.b;f[p*3+2]=h.j.d;g[p*2+0]=h.Aa.c;g[p*2+1]=h.Aa.b;i[p*2+0]=h.vg.c;i[p*2+1]=h.vg.b;j[p*4+0]=n.nd(h.Ca)/255;j[p*4+1]=n.md(h.Ca)/
255;j[p*4+2]=n.ld(h.Ca)/255;j[p*4+3]=n.xe(h.Ca)/255}if(m&&o)for(p=0;p<d;++p){h=b.Kd[p];m[p*3+0]=h.c;m[p*3+1]=h.b;m[p*3+2]=h.d;h=b.vd[p];o[p*3+0]=h.c;o[p*3+1]=h.b;o[p*3+2]=h.d}p=b.ea.length;h=new WebGLUnsignedShortArray(p);for(var x=0;x<p;x+=3){h[x+0]=b.ea[x+0];h[x+1]=b.ea[x+2];h[x+2]=b.ea[x+1]}c.lk=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,c.lk);a.bufferData(a.ARRAY_BUFFER,e,a.DYNAMIC_DRAW);c.qo=e;c.Fo=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,c.Fo);a.bufferData(a.ARRAY_BUFFER,g,a.STATIC_DRAW);
c.Go=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,c.Go);a.bufferData(a.ARRAY_BUFFER,i,a.STATIC_DRAW);c.ko=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,c.ko);a.bufferData(a.ARRAY_BUFFER,f,a.STATIC_DRAW);if(m&&o){c.om=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,c.om);a.bufferData(a.ARRAY_BUFFER,m,a.STATIC_DRAW);c.Pl=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,c.Pl);a.bufferData(a.ARRAY_BUFFER,o,a.STATIC_DRAW)}a.bindBuffer(a.ARRAY_BUFFER,null);c.Ql=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,c.Ql);
a.bufferData(a.ARRAY_BUFFER,j,a.STATIC_DRAW);c.Fp=j;a.bindBuffer(a.ARRAY_BUFFER,null);c.hk=a.createBuffer();a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,c.hk);a.bufferData(a.ELEMENT_ARRAY_BUFFER,h,a.STATIC_DRAW);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null);c.$=a;c.ik=p;c.Ho=d;b.Ua=c;b.Cj=false;b.Dj=false}}
function Ld(a,b,c,d){var e=new ArrayBuffer(16*Float32Array.BYTES_PER_ELEMENT),f=new WebGLFloatArray(e);e=new ArrayBuffer(20*Float32Array.BYTES_PER_ELEMENT);var g=new WebGLFloatArray(e);e=new D(true);if(!c&&(a.Ve!=null&&a.Ve.length>0||a.bj!=null))pb(a.ja,e);for(c=0;c<4;++c){var i=c*4;if(a.Ve!=null&&c<a.Ve.length){var j=a.Ve[c],m=lb(e,j.Mh);f[i]=m.c;f[i+1]=m.b;f[i+2]=m.d;m=1;m=d?1/(j.Da*j.Da):j.Yg;f[i+3]=m;g[i]=j.Ca.Kc;g[i+1]=j.Ca.Hc;g[i+2]=j.Ca.Ec}else{f[i]=1;f[i+1]=0;f[i+2]=0;f[i+3]=1;g[i]=0;g[i+
1]=0;g[i+2]=0}g[i+3]=1}g[16]=a.Zb.Kc;g[17]=a.Zb.Hc;g[18]=a.Zb.Ec;g[19]=1;a.$.uniform4fv(b.ao,f);a.$.uniform4fv(b.Vp,g);if(b.Xn!=null){d=a.bj;f=null;f=d&&d.Ta?d.Ta.e():new s(1,0,0);Ca(f,-1);jb(e,f);f.normalize();a.$.uniform3f(b.Xn,f.c,f.b,f.d,1);d?a.$.uniform4f(b.Yn,d.Ca.Kc,d.Ca.Hc,d.Ca.Ec,1):a.$.uniform4f(b.Yn,0,0,0,1)}}
function Md(a,b,c,d,e,f,g){if(!(d<=0||e<=0||a.width==0||a.height==0)){var i=true;if(g==null||g==false)i=false;g=a.$;g.enableVertexAttribArray(0);g.disableVertexAttribArray(1);g.disableVertexAttribArray(2);g.disableVertexAttribArray(3);g.disableVertexAttribArray(4);c=a.height-c;var j=2/a.width,m=2/a.height;b=b*j-1;c=c*m-1;d*=j;e*=m;j=new WebGLFloatArray(12);j[0]=b;j[1]=c;j[2]=0;j[3]=b+d;j[4]=c;j[5]=0;j[6]=b+d;j[7]=c-e;j[8]=0;j[9]=b;j[10]=c-e;j[11]=0;b=new WebGLUnsignedShortArray(6);b[0]=0;b[1]=2;b[2]=
1;b[3]=0;b[4]=3;b[5]=2;c=g.createBuffer();g.bindBuffer(g.ARRAY_BUFFER,c);g.bufferData(g.ARRAY_BUFFER,j,g.STATIC_DRAW);g.vertexAttribPointer(0,3,g.FLOAT,false,0,0);d=g.createBuffer();g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,d);g.bufferData(g.ELEMENT_ARRAY_BUFFER,b,g.STATIC_DRAW);a.Vc=a.Vm;g.useProgram(a.Vc);g.uniform4f(g.getUniformLocation(a.Vc,"vColor"),n.nd(f)/255,n.md(f)/255,n.ld(f)/255,i?n.xe(f)/255:1);g.depthMask(false);g.disable(g.DEPTH_TEST);if(i){g.enable(g.BLEND);g.blendFunc(g.SRC_ALPHA,g.ONE_MINUS_SRC_ALPHA)}else g.disable(g.BLEND);
g.drawElements(g.TRIANGLES,6,g.UNSIGNED_SHORT,0);g.deleteBuffer(c);g.deleteBuffer(d)}}
function Nd(a,b,c,d,e,f,g,i,j,m,o){if(!(f==null||f.ec==false||d<=0||e<=0||a.width==0||a.height==0)){if(j==null)j=1;if(m==null)m=1;var p=true;if(g==null||g==false)p=false;g=a.$;g.enableVertexAttribArray(0);g.enableVertexAttribArray(1);g.disableVertexAttribArray(2);g.disableVertexAttribArray(3);g.disableVertexAttribArray(4);c=a.height-c;var h=2/a.width,x=2/a.height;b=b*h-1;c=c*x-1;d*=h;e*=x;h=new WebGLFloatArray(12);h[0]=b;h[1]=c;h[2]=0;h[3]=b+d;h[4]=c;h[5]=0;h[6]=b+d;h[7]=c-e;h[8]=0;h[9]=b;h[10]=c-
e;h[11]=0;b=new WebGLFloatArray(8);b[0]=0;b[1]=0;b[2]=j;b[3]=0;b[4]=j;b[5]=m;b[6]=0;b[7]=m;j=new WebGLUnsignedShortArray(6);j[0]=0;j[1]=2;j[2]=1;j[3]=0;j[4]=3;j[5]=2;m=g.createBuffer();g.bindBuffer(g.ARRAY_BUFFER,m);g.bufferData(g.ARRAY_BUFFER,h,g.STATIC_DRAW);g.vertexAttribPointer(0,3,g.FLOAT,false,0,0);c=g.createBuffer();g.bindBuffer(g.ARRAY_BUFFER,c);g.bufferData(g.ARRAY_BUFFER,b,g.STATIC_DRAW);g.vertexAttribPointer(1,2,g.FLOAT,false,0,0);b=g.createBuffer();g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,
b);g.bufferData(g.ELEMENT_ARRAY_BUFFER,j,g.STATIC_DRAW);a.Vc=i==null?a.Wm:i;g.useProgram(a.Vc);g.depthMask(false);g.disable(g.DEPTH_TEST);if(p){g.enable(g.BLEND);g.blendFunc(g.SRC_ALPHA,g.ONE_MINUS_SRC_ALPHA)}else g.disable(g.BLEND);g.activeTexture(g.TEXTURE0);g.bindTexture(g.TEXTURE_2D,f.Ga);if(o){g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.NEAREST);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.NEAREST)}else{g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.LINEAR);g.texParameteri(g.TEXTURE_2D,
g.TEXTURE_MIN_FILTER,g.LINEAR)}g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE);g.activeTexture(g.TEXTURE1);g.bindTexture(g.TEXTURE_2D,null);g.drawElements(g.TRIANGLES,6,g.UNSIGNED_SHORT,0);g.deleteBuffer(c);g.deleteBuffer(m);g.deleteBuffer(b);g.activeTexture(g.TEXTURE0);g.bindTexture(g.TEXTURE_2D,f.Ga);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.LINEAR);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.LINEAR_MIPMAP_NEAREST)}}
function Od(a,b,c,d,e,f,g){if(!(f==null||f.ec==false||d<=0||e<=0||a.width==0||a.height==0)){var i=a.$;a.Vc=a.ll;i.useProgram(a.Vc);i.uniform4f(i.getUniformLocation(a.Vc,"vColor"),n.nd(g)/255,n.md(g)/255,n.ld(g)/255,n.xe(g)/255);Nd(a,b,c,d,e,f,true,a.ll,f.dg/f.ae,f.cg/f.$d)}}function Pd(a){a.Ve=[];a.bj=null}function Qd(a,b){a.Ve.push(b)}function Rd(a,b){a.bj=b}
function Sd(a){if(!(a.canvas==null||a.$==null))if(!(a.width==a.canvas.width&&a.height==a.canvas.height)){a.width=a.canvas.width;a.height=a.canvas.height;var b=a.$;b.viewport&&b.viewport(0,0,a.width,a.height)}}
Dd.prototype.db=function(a){this.canvas=a;this.$=null;try{a=["webgl","experimental-webgl","moz-webgl","webkit-3d","3d"];for(var b=0;b<a.length;b++)try{this.$=this.canvas.getContext(a[b],{alpha:false});if(this.$!=null)break}catch(c){}}catch(d){}if(this.$==null)return false;else{if(typeof WebGLFloatArray=="undefined"&&typeof Float32Array!="undefined")try{WebGLFloatArray=Float32Array;WebGLUnsignedShortArray=Uint16Array}catch(e){la(n.na,"Error: Float32 array types for webgl not found.")}if(typeof WebGLFloatArray==
"undefined"&&typeof CanvasFloatArray!="undefined")try{WebGLFloatArray=CanvasFloatArray;WebGLUnsignedShortArray=CanvasUnsignedShortArray}catch(f){la(n.na,"Error: canvas array types for webgl not found.")}a=this.$;a.getProgramParameter||(a.getProgramParameter=a.getProgrami);a.getShaderParameter||(a.getShaderParameter=a.getShaderi);a=this.$;this.vi=false;var g=b=Y(this,this.Xb,this.Bf),i=Y(this,this.Xb,this.Sl),j=Y(this,this.Xb,this.Lp),m=Y(this,this.Xb,this.Bf,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA),
o=Y(this,this.Xb,this.Rn,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA),p=Y(this,this.Xb,this.Bf,true,a.ONE,a.ONE_MINUS_SRC_COLOR),h=Y(this,this.qk,this.Sl),x=Y(this,this.qk,this.Sl,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA),t=Y(this,this.Ko,this.Bf),L=Y(this,this.Jo,this.Qn),A=Y(this,this.Xb,this.Tn);this.Vm=Y(this,this.wq,this.Op);this.Wm=Y(this,this.Io,this.Np);this.ll=Y(this,this.Io,this.Kp);this.eb[0]=g;this.eb[1]=g;this.eb[2]=i;this.eb[3]=i;this.eb[4]=i;this.eb[5]=j;this.eb[ed]=p;this.eb[fd]=m;this.eb[gd]=
o;this.eb[11]=h;this.eb[hd]=x;this.eb[17]=L;this.eb[25]=A;this.eb[23]=t;g=Y(this,this.rd,this.Bf);m=Y(this,this.rd,this.Bf,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);o=Y(this,this.rd,this.Rn,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);p=Y(this,this.rd,this.Bf,true,a.ONE,a.ONE_MINUS_SRC_COLOR);h=Y(this,this.rk,this.On);x=Y(this,this.rk,this.On,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);A=Y(this,this.rd,this.Tn);this.qb[0]=g;this.qb[1]=g;this.qb[2]=i;this.qb[3]=i;this.qb[4]=i;this.qb[5]=j;this.qb[ed]=p;this.qb[fd]=
m;this.qb[gd]=o;this.qb[11]=h;this.qb[hd]=x;this.qb[17]=L;this.qb[25]=A;i=Y(this,this.Xb,this.Cf);j=Y(this,this.Xb,this.Tl);m=Y(this,this.Xb,this.Mp);o=Y(this,this.Xb,this.Cf,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);p=Y(this,this.Xb,this.Sn,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);h=Y(this,this.Xb,this.Cf,true,a.ONE,a.ONE_MINUS_SRC_COLOR);x=Y(this,this.qk,this.Tl);t=Y(this,this.qk,this.Tl,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);L=Y(this,this.Ko,this.Cf);A=Y(this,this.Jo,this.Qn);var u=Y(this,this.Xb,
this.Un);this.ib[0]=i;this.ib[1]=i;this.ib[2]=j;this.ib[3]=j;this.ib[4]=j;this.ib[5]=m;this.ib[ed]=h;this.ib[fd]=o;this.ib[gd]=p;this.ib[11]=x;this.ib[hd]=t;this.ib[17]=A;this.ib[25]=u;this.ib[23]=L;i=Y(this,this.rd,this.Cf);o=Y(this,this.rd,this.Cf,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);p=Y(this,this.rd,this.Sn,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);h=Y(this,this.rd,this.Cf,true,a.ONE,a.ONE_MINUS_SRC_COLOR);x=Y(this,this.rk,this.Pn);t=Y(this,this.rk,this.Pn,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);
u=Y(this,this.rd,this.Un);this.rb[0]=i;this.rb[1]=i;this.rb[2]=j;this.rb[3]=j;this.rb[4]=j;this.rb[5]=m;this.rb[ed]=h;this.rb[fd]=o;this.rb[gd]=p;this.rb[11]=x;this.rb[hd]=t;this.rb[17]=A;this.rb[25]=u;this.vi=true;for(i=0;i<this.Xe;++i){if(this.eb[i]==null)this.eb[i]=b;if(this.qb[i]==null)this.qb[i]=b;if(this.ib[i]==null)this.ib[i]=b;if(this.rb[i]==null)this.rb[i]=b}a.useProgram(g);this.Vc=g;a.clearColor(0,0,1,1);a.clearDepth(1);a.depthMask(true);a.enable(a.DEPTH_TEST);a.disable(a.BLEND);a.blendFunc(a.SRC_ALPHA,
a.ONE_MINUS_SRC_ALPHA);a.enable(a.CULL_FACE);a.cullFace(a.BACK);Sd(this)}return true};function Td(a,b,c){var d=a.$;b=d.createShader(b);if(b==null)return null;d.shaderSource(b,c);d.compileShader(b);if(!d.getShaderParameter(b,d.COMPILE_STATUS)){if(a.vi){d.getShaderInfoLog(b);n.na&&la(n.na)}return null}return b}function Ud(a,b,c,d,e,f,g){b=Y(a,b,c,d,e,f);if(!b)return-1;b.km=g;a.Xe+=1;a.eb[a.Xe]=b;a.qb[a.Xe]=b;a.ib[a.Xe]=b;a.rb[a.Xe]=b;return a.Xe}
function Vd(a,b){var c=null;try{c=a.eb[b]}catch(d){}return c}
function Y(a,b,c,d,e,f,g){if(g==null)g=false;g=g;var i=a.$,j=b,m=c;if(j.indexOf("precision ")==-1)j="#ifdef GL_ES\t\t\t\t\t\t\t\t\t\t\t\t\n\tprecision mediump float;\t\t\t\t\t\t\t\t\t\n\t#endif\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n"+b;if(m.indexOf("precision ")==-1)m="#ifdef GL_ES\t\t\t\t\t\t\t\t\t\t\t\t\n\tprecision mediump float;\t\t\t\t\t\t\t\t\t\n\t#endif\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n"+c;b=Td(a,i.VERTEX_SHADER,j);c=Td(a,i.FRAGMENT_SHADER,m);if(!b||!c){a.vi&&n.na.print("Could not create shader program");
g=null}else{m=i.createProgram();i.attachShader(m,b);i.attachShader(m,c);i.bindAttribLocation(m,0,"vPosition");i.bindAttribLocation(m,1,"vTexCoord1");i.bindAttribLocation(m,2,"vTexCoord2");i.bindAttribLocation(m,3,"vNormal");i.bindAttribLocation(m,4,"vColor");if(g){i.bindAttribLocation(m,5,"vBinormal");i.bindAttribLocation(m,6,"vTangent")}i.linkProgram(m);if(i.getProgramParameter(m,i.LINK_STATUS)){i.useProgram(m);i.uniform1i(i.getUniformLocation(m,"texture1"),0);i.uniform1i(i.getUniformLocation(m,
"texture2"),1)}else a.vi&&n.na.print("Could not link program:"+i.getProgramInfoLog(m));g=m}if(g){g.In=d?d:false;g.Jn=e;g.Hn=f;a=a.$;g.fo=a.getUniformLocation(g,"worldviewproj");g.eo=a.getUniformLocation(g,"normaltransform");g.bo=a.getUniformLocation(g,"modelviewtransform");g.co=a.getUniformLocation(g,"worldtransform");g.ao=a.getUniformLocation(g,"arrLightPositions");g.Vp=a.getUniformLocation(g,"arrLightColors");g.Xn=a.getUniformLocation(g,"vecDirLight");g.Yn=a.getUniformLocation(g,"colorDirLight");
g.Zn=a.getUniformLocation(g,"fogColor");g.$n=a.getUniformLocation(g,"fogDensity");g.km=null}return g}Dd.prototype.Yc=function(a){a&&a.Ba(this.ja)};function Jd(a,b){return new WebGLFloatArray([b.p,b.u,b.s,b.G,b.v,b.q,b.t,b.H,b.w,b.A,b.n,b.I,b.J,b.K,b.B,b.L])}Dd.prototype.deleteTexture=function(a){if(a!=null){var b=this.$;b.deleteTexture(a.Ga);a.Ga=null;a.ec=false;a.Oh&&b.deleteFramebuffer(a.Oh);a.Oh=null}};
function Wd(a,b,c){var d=a.$;a=d.createFramebuffer();d.bindFramebuffer(d.FRAMEBUFFER,a);a.width=b;a.height=c;var e=d.createTexture();d.bindTexture(d.TEXTURE_2D,e);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR_MIPMAP_NEAREST);d.generateMipmap(d.TEXTURE_2D);d.texImage2D(d.TEXTURE_2D,0,d.RGBA,b,c,0,d.RGBA,d.UNSIGNED_BYTE,null);var f=d.createRenderbuffer();d.bindRenderbuffer(d.RENDERBUFFER,f);d.renderbufferStorage(d.RENDERBUFFER,
d.DEPTH_COMPONENT16,b,c);d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,e,0);d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.RENDERBUFFER,f);d.bindTexture(d.TEXTURE_2D,null);d.bindRenderbuffer(d.RENDERBUFFER,null);d.bindFramebuffer(d.FRAMEBUFFER,null);d=new Qb;d.l="";d.Ga=e;d.fd=null;d.ec=true;d.ae=b;d.$d=c;d.dg=b;d.cg=c;d.Oh=a;return d}
function Xd(a,b,c,d,e){var f=a.$;if(b!=null){f.bindFramebuffer(f.FRAMEBUFFER,b.Oh);f.viewport(0,0,b.ae,b.$d)}else{f.bindFramebuffer(f.FRAMEBUFFER,null);f.viewport(0,0,a.width,a.height)}if(a.Ui!=null){f.bindTexture(f.TEXTURE_2D,a.Ui.Ga);f.generateMipmap(f.TEXTURE_2D)}a.Ui=b;if(c||d){b=0;if(c){b|=f.COLOR_BUFFER_BIT;f.clearColor(n.nd(e)/255,n.md(e)/255,n.ld(e)/255,1)}if(d){f.clearDepth(a.Rf?0:1);b|=f.DEPTH_BUFFER_BIT}f.clear(b)}return true}
function bd(a,b,c,d){var e=a.$;b=b.Ga;e.bindTexture(e.TEXTURE_2D,b);var f=c.width,g=c.height;if(c.videoWidth)f=c.videoWidth;if(c.videoHeight)g=c.videoHeight;if((f&f-1)!=0||(g&g-1)!=0){var i=document.createElement("canvas");i.width=wd(a,f);i.height=wd(a,g);var j=i.getContext("2d");j.fillStyle="rgba(0, 255, 255, 1)";j.fillRect(0,0,i.width,i.height);d?j.drawImage(c,0,0,f,g,0,0,f,g):j.drawImage(c,0,0,f,g,0,0,i.width,i.height);c=i}xd(a,b,c);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST);
e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST);e.generateMipmap(e.TEXTURE_2D);e.bindTexture(e.TEXTURE_2D,null)}
function ad(a,b,c){var d=a.$,e=d.createTexture();d.bindTexture(d.TEXTURE_2D,e);var f=b.width,g=b.height;if(b.videoWidth)f=b.videoWidth;if(b.videoHeight)g=b.videoHeight;var i=f,j=g;if((f&f-1)!=0||(g&g-1)!=0){j=document.createElement("canvas");j.width=wd(a,f);j.height=wd(a,g);i=j.getContext("2d");c?i.drawImage(b,0,0,f,g,0,0,f,g):i.drawImage(b,0,0,f,g,0,0,j.width,j.height);b=j;i=j.width;j=j.height}xd(a,e,b);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.NEAREST);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,
d.NEAREST);d.generateMipmap(d.TEXTURE_2D);d.bindTexture(d.TEXTURE_2D,null);a=new Qb;a.l="";a.Ga=e;a.fd=null;a.ec=true;a.ae=i;a.$d=j;a.dg=f;a.cg=g;return a}function wd(a,b){--b;for(a=1;a<32;a<<=1)b|=b>>a;return b+1}
function xd(a,b,c){b=a.$;try{b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,c)}catch(d){if(d.code!=null&&DOMException!=null&&DOMException.SECURITY_ERR!=null&&d.code==DOMException.SECURITY_ERR){a.Nn==false&&la(n.na,"<i>A security setting in the browser prevented loading a texture.<br/>Workaround: run this from a webserver, change security settings, or allow the specific domain.</i>",true);a.Nn=true}else try{b.texImage2D(b.TEXTURE_2D,0,c)}catch(e){}}}
function Yd(a){if(a.Sj==null){var b=null;b=new id;var c=new Pb(true),d=new Pb(true),e=new Pb(true),f=new Pb(true),g=b.ea;g.push(0);g.push(2);g.push(1);g.push(0);g.push(3);g.push(2);g=b.m;g.push(c);g.push(d);g.push(e);g.push(f);c.Aa.c=1;c.Aa.b=1;c.f.set(1,-1,0);d.Aa.c=1;d.Aa.b=0;d.f.set(1,1,0);e.Aa.c=0;e.Aa.b=0;e.f.set(-1,1,0);f.Aa.c=0;f.Aa.b=1;f.f.set(-1,-1,0);a.Sj=b}}l=Dd.prototype;l.wq="\t\t\t\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        gl_Position = vPosition;\t\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
l.Io="\t\t\t\t\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t\tattribute vec4 vTexCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        gl_Position = vPosition;\t\t\t\t\t\t\t\t\t\tv_texCoord1 = vTexCoord1.st;\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";l.Op="\t\t\t\t\t\tuniform vec4 vColor;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t         gl_FragColor = vColor;\t\t\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
l.Kp="\t\t\t\tuniform vec4 vColor;\t\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    vec2 texCoord = vec2(v_texCoord1.s, v_texCoord1.t);\t\t        float alpha = texture2D(texture1, texCoord).r;\t\t        gl_FragColor = vec4(vColor.rgb, alpha);\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
l.Xb="\t\t\t\t\tuniform mat4 worldviewproj;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t    attribute vec4 vNormal;\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vColor;\t\t\t\t\t\t\t\t\t\t    attribute vec2 vTexCoord1;\t\t\t\t\t\t\t\t\t\tattribute vec2 vTexCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tv_color = vColor;\t\t\t\t\t\t\t\t\t\t        gl_Position = worldviewproj * vPosition;\t\t\t\t        v_texCoord1 = vTexCoord1.st;\t\t\t\t\t\t\t\t\tv_texCoord2 = vTexCoord2.st;\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
l.rd="\t\t\t\t\tuniform mat4 worldviewproj;\t\t\t\t\t\t\t\t\t\n\tuniform vec4 arrLightPositions[4];\t\t\t\t\t\t\t\n\tuniform vec4 arrLightColors[5]; \t\t\t\t\t\t\t\n\tuniform vec3 vecDirLight; \t\t\t\t\t\t\t\t\t\n\tuniform vec4 colorDirLight; \t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t    attribute vec4 vNormal;\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vColor;\t\t\t\t\t\t\t\t\t\t    attribute vec2 vTexCoord1;\t\t\t\t\t\t\t\t\t\tattribute vec2 vTexCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        gl_Position = worldviewproj * vPosition;\t\t\t\t        v_texCoord1 = vTexCoord1.st;\t\t\t\t\t\t\t\t\tv_texCoord2 = vTexCoord2.st;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\tvec3 n = normalize(vec3(vNormal.xyz));\t\t\t\t\t\t\tvec4 currentLight = vec4(0, 0, 0, 1.0);\t\t\t\t\t\t\tfor(int i=0; i<4; ++i)\t\t\t\t\t\t\t\t\t\t\t{\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvec3 lPos = vec3(arrLightPositions[i].xyz);\t\t\t\t\t\tvec3 vertexToLight = lPos - vec3(vPosition.xyz);\t\t\t\tfloat distance = length( vertexToLight );\t\t\t\t\t\tfloat distanceFact = 1.0 / (arrLightPositions[i].w * distance); \t\t\tvertexToLight = normalize(vertexToLight); \t\t\t\t\t\tfloat angle = max(0.0, dot(n, vertexToLight));\t\t\t\t\tfloat intensity = angle * distanceFact;\t\t\t\t\t\t\tcurrentLight = currentLight + vec4(arrLightColors[i].x*intensity, arrLightColors[i].y*intensity, arrLightColors[i].z*intensity, 1.0);\t\t\t\t}\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// directional light\t\t\t\t\t\t\t\t\t\n\t\tfloat dirlight = max(0.0, dot(n, vecDirLight));\t\t\tcurrentLight = currentLight + vec4(colorDirLight.x*dirlight, colorDirLight.y*dirlight, colorDirLight.z*dirlight, 1.0);\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// ambient light\t\t\t\t\t\t\t\t\t\t\n\t\tcurrentLight = currentLight + arrLightColors[4];\t\t\t\tcurrentLight = max(currentLight, vec4(0.0,0.0,0.0,0.0));\t\t\tcurrentLight = currentLight * vec4(vColor.x, vColor.y, vColor.z, 1.0);\t\t\tv_color = min(currentLight, vec4(1.0,1.0,1.0,1.0));\t\t\t\tv_color.a = vColor.a;\t// preserve vertex alpha \n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
l.Ko="\t\t\t\t\tuniform mat4 worldviewproj;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t    attribute vec2 vTexCoord1;\t\t\t\t\t\t\t\t\t\tattribute vec2 vTexCoord2;\t\t\t\t\t\t\t\t\t\tattribute vec4 vNormal;\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vColor;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        gl_Position = worldviewproj * vPosition;\t\t\t\t        v_texCoord1 = vTexCoord1.st;\t\t\t\t\t\t\t\t\tv_texCoord2 = vTexCoord2.st;\t\t\t\t\t\t\t\t\tv_color = vColor;\t\t\t\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
l.qk="\t\t\tuniform mat4 worldviewproj;\t\t\t\t\t\t\t\t\t\n\tuniform mat4 normaltransform;\t\t\t\t\t\t\t\t\n\tuniform mat4 modelviewtransform;\t\t\t\t\t\t\t\n\tuniform mat4 worldtransform;\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t    attribute vec3 vNormal;\t\t\t\t\t\t\t\t\t\t    attribute vec2 vTexCoord1;\t\t\t\t\t\t\t\t\t\tattribute vec2 vTexCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\tgl_Position = worldviewproj * vPosition;\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t//\tuse reflection\t\t\t\t\t\t\t\t\t\t\t\n\t\tvec3 pos = normalize((modelviewtransform * vPosition).xyz);\t\t\t\t\t\n\t\tvec3 n = normalize((normaltransform * vec4(vNormal, 1)).xyz);\t\t\n\t\tvec3 r = reflect( pos.xyz, n.xyz );\t\t\t\t\t\t\t\n\t\tfloat m = sqrt( r.x*r.x + r.y*r.y + (r.z+1.0)*(r.z+1.0) ); \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t//\ttexture coordinates\t\t\t\t\t\t\t\t\n\t\tv_texCoord1 = vTexCoord1.st;\t\t\t\t\t\t\n\t\tv_texCoord2.x = (r.x / (2.0 * m)  + 0.5);\t\t\t\t\t\t\n\t\tv_texCoord2.y = (r.y / (2.0 * m)  + 0.5);\t\t\t\t\t\t\n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t";
l.rk="\t\t\tuniform mat4 worldviewproj;\t\t\t\t\t\t\t\t\t\n\tuniform mat4 normaltransform;\t\t\t\t\t\t\t\t\n\tuniform mat4 modelviewtransform;\t\t\t\t\t\t\t\n\tuniform vec4 arrLightPositions[4];\t\t\t\t\t\t\t\n\tuniform vec4 arrLightColors[5]; \t\t\t\t\t\t\t\n\tuniform vec3 vecDirLight; \t\t\t\t\t\t\t\t\t\n\tuniform vec4 colorDirLight; \t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t    attribute vec3 vNormal;\t\t\t\t\t\t\t\t\t\t    attribute vec2 vTexCoord1;\t\t\t\t\t\t\t\t\t\tattribute vec2 vTexCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        gl_Position = worldviewproj * vPosition;\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t//\tuse reflection\t\t\t\t\t\t\t\t\t\t\t\n\t\tvec3 pos = normalize((modelviewtransform * vPosition).xyz);\t\t\t\t\t\n\t\tvec3 nt = normalize((normaltransform * vec4(vNormal, 1)).xyz);\t\t\n\t\tvec3 r = reflect( pos.xyz, nt.xyz );\t\t\t\t\t\t\t\n\t\tfloat m = sqrt( r.x*r.x + r.y*r.y + (r.z+1.0)*(r.z+1.0) ); \n\t\t//\ttexture coordinates\t\t\t\t\t\t\t\t\n\t\tv_texCoord1 = vTexCoord1.st;\t\t\t\t\t\t\n\t\tv_texCoord2.x = r.x / (2.0 * m)  + 0.5;\t\t\t\t\t\t\n\t\tv_texCoord2.y = r.y / (2.0 * m)  + 0.5;\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\tvec3 n = normalize(vec3(vNormal.xyz));\t\t\t\t\t\t\tvec4 currentLight = vec4(0.0, 0.0, 0.0, 1.0);\t \t\t\t\tfor(int i=0; i<4; ++i)\t\t\t\t\t\t\t\t\t\t\t{\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvec3 lPos = vec3(arrLightPositions[i].xyz);\t\t\t\t\t\tvec3 vertexToLight = lPos - vec3(vPosition.xyz);\t\t\t\tfloat distance = length( vertexToLight );\t\t\t\t\t\tfloat distanceFact = 1.0 / (arrLightPositions[i].w * distance); \t\t\tvertexToLight = normalize(vertexToLight); \t\t\t\t\t\tfloat angle = max(0.0, dot(n, vertexToLight));\t\t\t\t\tfloat intensity = angle * distanceFact;\t\t\t\t\t\t\tcurrentLight = currentLight + vec4(arrLightColors[i].x*intensity, arrLightColors[i].y*intensity, arrLightColors[i].z*intensity, 1.0);\t\t\t\t}\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// directional light\t\t\t\t\t\t\t\t\t\n\t\tfloat dirlight = max(0.0, dot(n, vecDirLight));\t\t\tcurrentLight = currentLight + vec4(colorDirLight.x*dirlight, colorDirLight.y*dirlight, colorDirLight.z*dirlight, 1.0);\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// ambient light\t\t\t\t\t\t\t\t\t\t\n\t\tcurrentLight = currentLight + arrLightColors[4];\t\t\t\tcurrentLight = max(currentLight, vec4(0.0,0.0,0.0,0.0));\t\t\t//v_color = currentLight;\t\t\t\t\t\t\t\t\n\t\tv_color = min(currentLight, vec4(1.0,1.0,1.0,1.0));\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t";
l.Jo="\t\t\t\t\tuniform mat4 worldviewproj;\t\t\t\t\t\t\t\t\t\n\tuniform mat4 normaltransform;\t\t\t\t\t\t\t\t\n\tuniform mat4 worldtransform;\t\t\t\t\t\t\t\t\n\tuniform vec4 arrLightPositions[4];\t\t\t\t\t\t\t\n\tuniform vec4 arrLightColors[5]; \t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t\n    attribute vec3 vNormal;\t\t\t\t\t\t\t\t\t\t\n\tattribute vec4 vColor;\t\t\t\t\t\t\t\t\t\t\n    attribute vec2 vTexCoord1;\t\t\t\t\t\t\t\t\t\n\tattribute vec2 vTexCoord2;\t\t\t\t\t\t\t\t\t\n\tattribute vec3 vBinormal;\t\t\t\t\t\t\t\t\t\n\tattribute vec3 vTangent;\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t// Output:\t\t\t\t\t\t\t\t\t\t\t\t\t\n    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\n\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\n\tvarying vec3 v_lightVector[4];\t\t\t\t\t\t\t\t\n\tvarying vec3 v_lightColor[4];\t\t\t\t\t\t\t\t\n\tvarying vec3 ambientLight;\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t\n    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n        gl_Position = worldviewproj * vPosition;\t\t\t\t\n        v_texCoord1 = vTexCoord1.st;\t\t\t\t\t\t\t\n\t\tv_texCoord2 = vTexCoord2.st;\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\tvec4 pos = vec4(dot(vPosition, worldtransform[0]), dot(vPosition, worldtransform[1]), dot(vPosition, worldtransform[2]), dot(vPosition, worldtransform[3]));\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t// transform normal, binormal and tangent\t\t\t\t\t\n\t\tvec3 normal = vec3(dot(vNormal.xyz, worldtransform[0].xyz), dot(vNormal.xyz, worldtransform[1].xyz), dot(vNormal.xyz, worldtransform[2].xyz));\t\t\n\t\tvec3 tangent = vec3(dot(vTangent.xyz, worldtransform[0].xyz), dot(vTangent.xyz, worldtransform[1].xyz), dot(vTangent.xyz, worldtransform[2].xyz));     \n\t\tvec3 binormal = vec3(dot(vBinormal.xyz, worldtransform[0].xyz), dot(vBinormal.xyz, worldtransform[1].xyz), dot(vBinormal.xyz, worldtransform[2].xyz));     \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\tvec3 temp = vec3(0.0, 0.0, 0.0);\t\t\t\t\t\t\n\t\tfor(int i=0; i<4; ++i) \t\t\t\t\t\t\t\t\t\n\t\t{\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\tvec3 lightPos = vec3(arrLightPositions[i].xyz);\t\t\n\t\t\tvec3 vertexToLight = lightPos - vec3(pos.xyz); \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// transform the light vector 1 with U, V, W\t\t\n\t\t\ttemp.x = dot(tangent.xyz, vertexToLight);\t\t\t\t\n\t\t\ttemp.y = dot(binormal.xyz, vertexToLight);\t\t\t\t\n\t\t\ttemp.z = dot(normal.xyz, vertexToLight);\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t// normalize light vector\t\t\t\t\t\n\t\t\ttemp = normalize(temp); \t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t// move from -1..1 to 0..1 and put into output\t\t\n\t\t\ttemp = temp * 0.5;\t\t\t\t\t\t\t\n\t\t\ttemp = temp + vec3(0.5,0.5,0.5);\t\t\t\n\t\t\tv_lightVector[i] = temp;\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t// calculate attenuation\t\t\t\t\t\n\t\t\tfloat distanceFact = 1.0 / sqrt(dot(vertexToLight, vertexToLight) * arrLightPositions[i].w); \n\t\t\tv_lightColor[i] = min(vec3(arrLightColors[i].x*distanceFact, arrLightColors[i].y*distanceFact, arrLightColors[i].z*distanceFact), vec3(1,1,1));\t\t\n\t\t}\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t// ambient light\n\t\tambientLight = arrLightColors[4].xyz;\t\t\t\t\n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t";
l.Np="\t\t\t\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord = vec2(v_texCoord1.s, v_texCoord1.t);\t\t        gl_FragColor = texture2D(texture1, texCoord);\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
l.Bf="\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord = vec2(v_texCoord1.s, v_texCoord1.t);\t\t        gl_FragColor = texture2D(texture1, texCoord) * v_color;\t\n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
l.Rn="\t\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord = vec2(v_texCoord1.s, v_texCoord1.t);\t\t        gl_FragColor = texture2D(texture1, texCoord) * v_color;\t\t\tif(gl_FragColor.a < 0.5)\t\t\t\t\t\t\t\t\t\t\tdiscard;\t\t\t\t\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
l.Sl="\t\t\t\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord1 = vec2(v_texCoord1.s, v_texCoord1.t);\t\t\tvec2 texCoord2 = vec2(v_texCoord2.s, v_texCoord2.t);\t        vec4 col1 = texture2D(texture1, texCoord1);\t\t\t\t\t\tvec4 col2 = texture2D(texture2, texCoord2);\t\t\t\t\t\tgl_FragColor = col1 * col2;\t\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
l.Lp="\t\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord1 = vec2(v_texCoord1.s, v_texCoord1.t);\t\t\tvec2 texCoord2 = vec2(v_texCoord2.s, v_texCoord2.t);\t        vec4 col1 = texture2D(texture1, texCoord1);\t\t\t\t\t\tvec4 col2 = texture2D(texture2, texCoord2);\t\t\t\t\t\tgl_FragColor = col1 * col2 * 3.0;\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
l.On="\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord1 = vec2(v_texCoord1.s, v_texCoord1.t);\t\t\tvec2 texCoord2 = vec2(v_texCoord2.s, v_texCoord2.t);\t        vec4 col1 = texture2D(texture1, texCoord1);\t\t\t\t\t\tvec4 col2 = texture2D(texture2, texCoord2);\t\t\t\t\t\tvec4 final = col1 * col2 * v_color;\t\t\t\t\t\t\t\tgl_FragColor = vec4(final.x, final.y, final.z, col1.w);\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
l.Qn="\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\tvarying vec3 v_lightVector[4];\t\t\t\t\t\t\t\t\tvarying vec3 v_lightColor[4];\t\t\t\t\t\t\t\t\tvarying vec3 ambientLight;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvec4 colorMapSample = texture2D(texture1, v_texCoord1);\t\t\tvec3 normalMapVector = texture2D(texture2, v_texCoord1).xyz;\t\t//normalMapVector -= vec3(0.5, 0.5, 0.5);\t\t\t\t\t\n\t\t//normalMapVector = normalize(normalMapVector); \t\t\t\n\t\tnormalMapVector *= vec3(2.0, 2.0, 2.0);\t\t\t\t\t\n\t\tnormalMapVector -= vec3(1.0, 1.0, 1.0);\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\tvec3 totallight = vec3(0.0, 0.0, 0.0);\t\t\t\t\t\t\n\t\tfor(int i=0; i<4; ++i) \t\t\t\t\t\t\t\t\t\n\t\t{\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t// process light\t\t\t\t\t\t\t\t\t\n\t\t\t//vec3 lightvect = v_lightVector[i] + vec3(-0.5, -0.5, -0.5); \n\t\t\tvec3 lightvect = (v_lightVector[i] * vec3(2.0, 2.0, 2.0)) - vec3(1.0, 1.0, 1.0); \n\t\t\tlightvect = normalize(lightvect);\t\t\t\t\t\n\t\t\tfloat luminance = dot(lightvect, normalMapVector); // normal DOT light\t\t\n\t\t\tluminance = clamp(luminance, 0.0, 1.0);\t// clamp result to positive numbers\t\t\n\t\t\tlightvect = luminance * v_lightColor[i];\t// luminance * light color \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t// add to previously calculated lights\t\t\t\t\n\t\t\ttotallight = totallight + lightvect;\t\t\t\t\n\t\t}\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\ttotallight = totallight + ambientLight;\t\t\t\t\t\n\t\tgl_FragColor = colorMapSample * vec4(totallight.x, totallight.y, totallight.z, 0.0);\t\n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t";
l.Tn="\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord = vec2(v_texCoord1.s, v_texCoord1.t);\t\t\t\tvec4 color1 = texture2D(texture1, texCoord);\t\t\t\t\tvec4 color2 = texture2D(texture2, texCoord);\t\t\t\t\tcolor1 = ((1.0 - v_color.w) * color1) + (v_color.w * color2);\t// interpolate texture colors based on vertex alpha\t \n\t\tgl_FragColor = color1 * v_color;\t\t\n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
l.Cf="\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\tuniform vec4 fogColor;\t\t\t\t\t\t\t\t\t\t\tuniform float fogDensity;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord = vec2(v_texCoord1.s, v_texCoord1.t);\t\t\t\tvec4 tmpFragColor = texture2D(texture1, texCoord) * v_color;\t\t\t\t\t\t\t\t\tfloat z = gl_FragCoord.z / gl_FragCoord.w; \t\t\t\t\t\t\t\t\t\t\t\t\n\t\tfloat fogFactor = clamp(exp2( -fogDensity * z * 1.442695), 0.0, 1.0); \t\n\t\tgl_FragColor = mix(fogColor, tmpFragColor, fogFactor);\t\t\t\t\t\t\t\t\t\n\t\tgl_FragColor.a = tmpFragColor.a;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
l.Tl="\t\t\t\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\tuniform vec4 fogColor;\t\t\t\t\t\t\t\t\t\t\tuniform float fogDensity;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord1 = vec2(v_texCoord1.s, v_texCoord1.t);\t\t\tvec2 texCoord2 = vec2(v_texCoord2.s, v_texCoord2.t);\t        vec4 col1 = texture2D(texture1, texCoord1);\t\t\t\t\t\tvec4 col2 = texture2D(texture2, texCoord2);\t\t\t\t\t\tvec4 tmpFragColor = col1 * col2;\t\t\t\t\t\t\t\t\tfloat z = gl_FragCoord.z / gl_FragCoord.w; \t\t\t\t\t\t\t\t\t\t\t\t\n\t\tfloat fogFactor = clamp(exp2( -fogDensity * z * 1.442695), 0.0, 1.0); \t\n\t\tgl_FragColor = mix(fogColor, tmpFragColor, fogFactor);\t\t\t\t\t\t\t\t\t\n\t\tgl_FragColor.a = tmpFragColor.a;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
l.Sn="\t\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\tuniform vec4 fogColor;\t\t\t\t\t\t\t\t\t\t\tuniform float fogDensity;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord = vec2(v_texCoord1.s, v_texCoord1.t);\t\t\t\tvec4 tmpFragColor = texture2D(texture1, texCoord) * v_color;\t\t\t\t\t\t\t\t\tif(tmpFragColor.a < 0.5)\t\t\t\t\t\t\t\t\t\t\tdiscard;\t\t\t\t\t\t\t\t\t\t\t\t\tfloat z = gl_FragCoord.z / gl_FragCoord.w; \t\t\t\t\t\t\t\t\t\t\t\t\n\t\tfloat fogFactor = clamp(exp2( -fogDensity * z * 1.442695), 0.0, 1.0); \t\n\t\tgl_FragColor = mix(fogColor, tmpFragColor, fogFactor);\t\t\t\t\t\t\t\t\t\n\t\tgl_FragColor.a = tmpFragColor.a;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
l.Mp="\t\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\tuniform vec4 fogColor;\t\t\t\t\t\t\t\t\t\t\tuniform float fogDensity;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord1 = vec2(v_texCoord1.s, v_texCoord1.t);\t\t\tvec2 texCoord2 = vec2(v_texCoord2.s, v_texCoord2.t);\t        vec4 col1 = texture2D(texture1, texCoord1);\t\t\t\t\t\tvec4 col2 = texture2D(texture2, texCoord2);\t\t\t\t\t\tvec4 tmpFragColor = col1 * col2 * 3.0;\t\t\t\t\t\t\t\t\tfloat z = gl_FragCoord.z / gl_FragCoord.w; \t\t\t\t\t\t\t\t\t\t\t\t\n\t\tfloat fogFactor = clamp(exp2( -fogDensity * z * 1.442695), 0.0, 1.0); \t\n\t\tgl_FragColor = mix(fogColor, tmpFragColor, fogFactor);\t\t\t\t\t\t\t\t\t\n\t\tgl_FragColor.a = tmpFragColor.a;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
l.Un="\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\tuniform vec4 fogColor;\t\t\t\t\t\t\t\t\t\t\tuniform float fogDensity;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord = vec2(v_texCoord1.s, v_texCoord1.t);\t\t\t\tvec4 color1 = texture2D(texture1, texCoord);\t\t\t\t\tvec4 color2 = texture2D(texture2, texCoord);\t\t\t\t\tcolor1 = ((1.0 - v_color.w) * color1) + (v_color.w * color2);\t// interpolate texture colors based on vertex alpha\t \n\t\tvec4 tmpFragColor = color1 * v_color;\t\t\t\t\t\t\t\t\tfloat z = gl_FragCoord.z / gl_FragCoord.w; \t\t\t\t\t\t\t\t\t\t\t\t\n\t\tfloat fogFactor = clamp(exp2( -fogDensity * z * 1.442695), 0.0, 1.0); \t\n\t\tgl_FragColor = mix(fogColor, tmpFragColor, fogFactor);\t\t\t\t\t\t\t\t\t\n\t\tgl_FragColor.a = tmpFragColor.a;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
l.Pn="\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\tuniform vec4 fogColor;\t\t\t\t\t\t\t\t\t\t\tuniform float fogDensity;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord1 = vec2(v_texCoord1.s, v_texCoord1.t);\t\t\tvec2 texCoord2 = vec2(v_texCoord2.s, v_texCoord2.t);\t        vec4 col1 = texture2D(texture1, texCoord1);\t\t\t\t\t\tvec4 col2 = texture2D(texture2, texCoord2);\t\t\t\t\t\tvec4 final = col1 * col2 * v_color;\t\t\t\t\t\t\t\tvec4 tmpFragColor = vec4(final.x, final.y, final.z, col1.w);\t\t\t\t\t\t\t\t\tfloat z = gl_FragCoord.z / gl_FragCoord.w; \t\t\t\t\t\t\t\t\t\t\t\t\n\t\tfloat fogFactor = clamp(exp2( -fogDensity * z * 1.442695), 0.0, 1.0); \t\n\t\tgl_FragColor = mix(fogColor, tmpFragColor, fogFactor);\t\t\t\t\t\t\t\t\t\n\t\tgl_FragColor.a = tmpFragColor.a;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";function Zd(){this.Al=[];this.Ab=[];this.ee=1}function $d(a,b){for(var c=0;c<a.Al.length;++c){var d=a.Al[c];if(d.l==b)return d}return null}function ae(a,b,c){if(b==null||b=="")return null;var d=$d(a,b);if(d!=null)return d;if(c){b=d=new be(b);if(b!=null){$d(a,b.l)!=null&&n.na&&n.na.print("ERROR! Cannot add the sound multiple times: "+b.l);a.Al.push(b)}return d}return null}
function Jc(a,b,c,d){if(b==null)return null;var e=null;e=typeof b=="string"?ae(a,b,true):b;if(e==null||e.Vb==null)return null;ce(a);for(b=0;b<a.Ab.length;)if(a.Ab[b].src===e){a.Ab[b].src.Vb.pause();a.Ab.splice(b,1)}else++b;try{e.Vb.currentTime=0}catch(f){}if(typeof d==="undefined")d=1;e.Vb.volume=d*a.ee;e.Vb.play();var g=new de(e);g.no=d;a.Ab.push(g);e.Zl&&e.Vb.removeEventListener("ended",e.Zl,false);e.Vb.Zl=null;if(c){g.ho=true;a=function(){if(!g.oi){try{this.currentTime=0}catch(i){}this.play()}};
e.Vb.addEventListener("ended",a,false);e.Vb.Zl=a}return g}Zd.prototype.stop=function(a){if(a){a.src.Vb.pause();a.oi=true;ce(this)}};function ee(a,b){a.ee=b;if(a.ee<0)a.ee=0;if(a.ee>1)a.ee=1;try{for(b=0;b<a.Ab.length;++b){var c=a.Ab[b];c.src.Vb.volume=c.no*a.ee}}catch(d){}}function ce(a){for(var b=0;b<a.Ab.length;)if(fe(a.Ab[b]))a.Ab.splice(b,1);else++b}function Lc(a,b){for(var c=0;c<a.Ab.length;++c){var d=a.Ab[c];if(d&&d.src&&d.src.l==b){a.Ab.splice(c,1);d.oi=true;d.src.Vb.pause();return}}}n.Pd=new Zd;
function be(a){this.l=a;var b=null;try{b=new Audio;b.src=a}catch(c){}this.loaded=true;this.Vb=b}function de(a){this.src=a;this.ho=this.oi=false;this.no=1;this.startTime=(new Date).getTime()}function fe(a){if(a.oi)return true;if(a.ho)return false;var b=(new Date).getTime(),c=a.src.duration;return c>0&&b>a.startTime+c};function ge(a,b,c,d,e,f,g){if((b==null||b==true)&&n.na==null)n.na=new fa(a,d);this.To=a;this.Rb=document.getElementById(this.To);this.la=new he;this.T=null;this.Wo=false;this.bg=null;this.cb=new sd;this.se=new n.ap;this.ii=this.uh=false;this.Nm=0;this.wc=60;this.gl=this.dl=this.el=this.Cb=null;this.ui=this.vo=false;this.Kg=[];(this.Vn=g?true:false)&&ie(this);this.cp=f==null?'Error: This browser does not support WebGL (or it is disabled).<br/>See <a href="www.ambiera.com/copperlicht/browsersupport.html">here</a> for details.':
f;this.hg=[];this.Ij=[];this.Dh=false;this.Ch=this.Bh=this.gc=this.fc=0;this.Eh=true;this.lj=false;this.Pk=this.Cl=0;this.rj=null;e!=null&&je(this,true,e);ke(this);if(c)this.wc=c;var i=this;setInterval(function(){i.rj!=null&&le(i);if(n.na){++i.Nm;var j=0,m=0;if(i.cb){j=i.cb;for(var o=m=0;o<j.Va.length;++o)j.Va[o].ec==false&&++m;j=m;m=i.cb.Va.length}if(i.ii&&j==0){i.ii=false;me(i)}if(i.uh||j){o="Loading";if(j>0)o="Textures loaded: "+(m-j)+"/"+m;switch(i.Nm%4){case 0:o+="   ";break;case 1:o+=".  ";
break;case 2:o+=".. ";break;case 3:o+="...";break}ka(n.na,o)}else ka(n.na,null)}},500);ne(Z(),this)}function oe(a){if(a.la==null)return null;return a.la.Fg()}
function pe(a){document.onkeydown=function(f){se(a,f)};document.onkeyup=function(f){te(a,f)};var b=a.Rb;if(b!=null){b.onmousemove=function(f){ue(a,f)};b.onmousedown=function(f){ve(a,f)};b.onmouseup=function(f){we(a,f)};b.onmouseover=function(){a.Eh=true};b.onmouseout=function(){a.Eh=false};xe(a);try{var c=function(f){(f=f)||(f=event);if(f)ye(a,f.detail<0||f.wheelDelta>0?1:-1)};b.addEventListener("mousewheel",c,false);b.addEventListener("DOMMouseScroll",c,false)}catch(d){}try{c=function(f){a.lj=false;
we(a,f.changedTouches[0])&&ze(a,f,true)};b.addEventListener("touchstart",function(f){if(f.touches!=null){a.lj=f.touches.length==2;if(a.lj)a.Cl=Ae(a,f)}ve(a,f.changedTouches[0])&&ze(a,f,true)},false);b.addEventListener("touchend",c,false);b.addEventListener("touchcancel",c,false);b.addEventListener("touchleave",c,false);b.addEventListener("touchmove",function(f){if(a.lj&&f.touches!=null&&f.touches.length>=2){f=Ae(a,f);var g=f-a.Cl;a.Cl=f;ye(a,g)}else ue(a,f.changedTouches[0])&&ze(a,f,true)},false)}catch(e){}}}
function Ae(a,b){a=b.touches;if(a[0].pageX==null)return 0;return Math.sqrt((a[0].pageX-a[1].pageX)*(a[0].pageX-a[1].pageX)+(a[0].pageY-a[1].pageY)*(a[0].pageY-a[1].pageY))}ge.prototype.load=function(a,b,c){if(!Be(this)){je(this,false,this.cp);return false}var d=this;this.uh=true;(new na(a,a.indexOf(".ccbz")!=-1)).load(function(e){d.dm(e,a,b);c&&c()});return true};
function Be(a){if(a.T!=null)return true;var b=a.Rb;if(b==null)return false;var c=n.tl!=null&&n.tl.Pq;a.T=new Dd;if(c||a.T.db(b)==false)if(n.tl!=null){a.T=new n.tl;if(a.T.db(b)==false)return false}else return false;if(a.cb)a.cb.T=a.T;pe(a);var d=1E3/a.wc,e=q();function f(){var g=q(),i=g-e;if(i>d){e=g-i%d;a.Vn&&Ce(a);De(a);if(n.na!=null){a.la.Fg();g=n.na;if(g.Cm!=null){g.frames+=1;i=(new Date).getTime();if(i-g.am>1E3){var j="FPS: "+(g.frames/(i-g.am)*1E3).toFixed(2);g.Cm.nodeValue=j;g.am=i;g.frames=
0}}}}window.requestAnimationFrame(f)}window.requestAnimationFrame(f);return true}function ie(){document.body.style.margin="0";document.body.style.padding="0";document.body.style.overflow="hidden"}function Ce(a){var b=window.innerHeight||window.clientHeight;a.Rb.setAttribute("width",(window.innerWidth||window.clientWidth)+"px");a.Rb.setAttribute("height",b+"px")}
ge.prototype.dm=function(a,b,c){this.uh=false;var d=new Ee;a=d.Tp(a,b,this.cb,this.se,this);if(a!=null)if(!c||this.la==null||this.la!=null&&this.la.Db.length==0){this.la=a;if(d.Mm){this.Im=d.qn;this.Yo=b}if(a.wn)this.ii=true;else me(this)}else for(b=0;b<a.Db.length;++b)this.la.Ml(a.Db[b])};function me(a){a.ek(a.la.Fg());De(a);a.gl!=null&&a.gl()}
function De(a){if(!(a.la==null||a.T==null))if(!(a.uh||a.ii)){ke(a);Fe(a);var b=a.la.Fg();if(!a.Wo&&b){for(var c=false,d=0;d<a.Kg.length;++d){var e=a.Kg[d];e.sq();if(e.Rp()){if(e.fk!=null&&!e.Yl){var f=oe(a);e.fk.execute(f.Ja,f);e.fk=null}if(e.gk!=null&&e.Yl){f=oe(a);e.gk.execute(f.Ja,f);e.gk=null}a.Kg.splice(d,1);--d}else c=true}c&&Ge(b);a.Cb&&a.Cb();d=a.T;b.th=d;if(b.Ka==0)b.Ka=q();b.xp=null;c=false;if(b.fh.length==0)e=false;else{e=q();f=false;for(var g=0;g<b.fh.length;){var i=b.fh[g];if(i.qq<e){i.Ae.sb&&
i.Ae.sb.removeChild(i.Ae);b.fh.splice(g,1);f=true;b.wd&&i.Ae.$a&&He(b.wd,i.Ae.$a)}else++g}e=f}if(e)c=true;if(b.Ja.Cb(b,q()))c=true;if(b.ga){e=new D(false);b.ga.jb.Ba(e);e=E(e,b.ga.Bc);e=!e.D(b.pj)}else e=true;d=d?Ed(d):false;if(b.Gk||b.Hj==0&&(e||d)||b.Hj==1&&(e||c||d)||b.Hj==2||Ie(Z())){b.Gk=false;c=true}else c=false;if(c){c=a.T;d=b.vk;if(c.$!=null){Sd(c);e=c.$;e.clearDepth(c.Rf?0:1);e.depthMask(true);e.clearColor(n.nd(d)/255,n.md(d)/255,n.ld(d)/255,1);e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}a.el&&
a.el();c=a.T;b.Pj=[];b.rg=[];b.We=[];b.Jj=[];b.Ej=[];b.Ja.Ia(b);b.Si=null;for(d=d=b.tp=0;d<b.Jj.length;++d){b.$b=Je;b.Jj[d].mb(c)}Ke(b,c);b.$b=Le;for(d=0;d<b.Ej.length;++d)b.Ej[d].mb(c);if(b.ga){b.ga.jb.Ba(b.pj);b.pj=E(b.pj,b.ga.Bc)}a.dl&&a.dl();b=n.Ra;b!=null&&Me(b,a.T);b=a.T;b.$!=null&&b.$.flush()}}Fe(a)}}ge.prototype.Ml=function(a){if(this.la){this.la.Db.push(a);this.la.Db.length==1&&this.la.yo(a)}};
function kc(a,b,c){if(!a.la)return false;var d=a.la.Db;b=b;if(c)b=b.toLowerCase();for(var e=0;e<d.length;++e){var f=d[e].l;if(c)f=f.toLowerCase();if(b==f){a.ek(d[e]);return true}}return false}
ge.prototype.ek=function(a){if(!a)return false;var b=a.dk()=="panorama",c=a.dk()=="free",d=null;this.la.yo(a);if(!a.xn){a.xn=true;var e=false,f=Ne(a,"camera");if(f)for(var g=0;g<f.length;++g){var i=f[g];if(i&&i.rm){d=i;e=true;Oe(d,this.T.width,this.T.height);break}}if(!e){e=4/3;if(this.T.width&&this.T.height)e=this.T.width/this.T.height;d=new Pe;Qe(d,e);vc(a.Ja,d);e=null;if(!b){e=new Re(d,this);Yb(d,e)}if(c){if(a.Ak!=null)d.f=a.Ak.e();if(a.Zi!=null)e!=null?pc(e,a.Zi):oc(d,a.Zi)}e&&Se(e,!b)}a.ga=d;
a.wd=Te(a,true);Ue(this,a.Ja,a.wd)}Z().uc=a;a.Hj=this.la.zp;Ge(a);return true};function Fe(a){if(a.bg!=null){var b=a.la.Fg();if(b!=null)if(a.bg.r===b){a.T&&Oe(a.bg,a.T.Ib(),a.T.Hb());b.ga=a.bg;a.bg=null}}}function se(a,b){var c=oe(a);if(c==null)return false;if(b==null)b=window.event;var d=false;c=c.ga;if(c!=null)d=c.Be(b);for(c=0;c<a.hg.length;++c)if(a.Ij[c].Be(b))d=true;return ze(a,b,d)}
function te(a,b){var c=oe(a);if(c==null)return false;if(b==null)b=window.event;var d=false;c=c.ga;if(c!=null)d=c.Ce(b);for(c=0;c<a.hg.length;++c)if(a.hg[c].Ce(b))d=true;return ze(a,b,d)}function ze(a,b,c){if(c){try{b.preventDefault()}catch(d){}return true}return false}function ke(a){for(var b=0,c=0,d=a.Rb;d!=null;){b+=d.offsetLeft;c+=d.offsetTop;d=d.offsetParent}a.vm=b;a.wm=c}function Ve(a,b){return b.pageX?b.pageX-a.vm:b.clientX-a.Rb.offsetLeft+document.body.scrollLeft}
function We(a,b){return b.pageY?b.pageY-a.wm:b.clientY-a.Rb.offsetTop+document.body.scrollTop}function ve(a,b){if(b==null)b=window.event;a.Dh=true;a.Eh=true;if(b){a.Bh=Ve(a,b);a.Ch=We(a,b)}var c=oe(a);if(c==null)return false;var d=false;if(a.Qm)d=a.Qm();if(!d){d=c.ga;d!=null&&d.Rd(b);d=b;for(var e=0;e<c.Lc.length;++e)c.Lc[e].Rd(d)}return ze(a,b,true)}function Xe(a){if(a.ui){a.fc=0;a.gc=0;a.Bh=0;a.Ch=0}else{a.Bh=a.fc;a.Ch=a.gc}}
function we(a,b){if(b==null)b=window.event;a.Dh=false;var c=oe(a);if(c==null)return false;var d=false;if(a.Rm)d=a.Rm();if(!d){d=c.ga;d!=null&&d.pd(b);d=b;for(var e=0;e<c.Lc.length;++e)c.Lc[e].pd(d)}return ze(a,b,true)}function ye(a,b){a=oe(a);if(a!=null){var c=a.ga;c!=null&&c.Ef(b);for(c=0;c<a.Lc.length;++c)a.Lc[c].Ef(b)}}
function ue(a,b){if(b==null)b=window.event;if(b){a.fc=Ve(a,b);a.gc=We(a,b)}if(a.ui){var c=b.movementY||b.mozMovementY||b.webkitMovementY||0;a.fc=b.movementX||b.mozMovementX||b.webkitMovementX||0;a.gc=c}c=oe(a);if(c==null)return false;var d=c.ga;d!=null&&d.De(b);d=b;for(var e=0;e<c.Lc.length;++e)c.Lc[e].De(d);return ze(a,b,true)}l=ge.prototype;l.Cb=null;l.Rm=null;l.Qm=null;l.dl=null;l.el=null;l.gl=null;
function Ye(a,b,c){a=a.T;if(a==null)return null;var d=a.jb,e=a.Nd;if(d==null||e==null)return null;d=E(d,e);var f=new Gb;f.nk(d);d=Kb(f);e=Lb(f).substract(d);f=Nb(f).substract(d);var g=a.Ib();a=a.Hb();c=c/a;return d.add(w(e,b/g)).add(w(f,c))}
function Ze(a,b){var c=new D(false),d=a.T;if(!d.jb)return null;d.jb.Ba(c);c=E(c,d.Nd);a=d.Ib()/2;d=d.Hb()/2;if(d==0||a==0)return null;b=new s(b.c,b.b,b.d);b.W=1;c=c;var e=b.e();e.ya=b.W;b.c=e.c*c.p+e.b*c.v+e.d*c.w+e.ya*c.J;b.b=e.c*c.u+e.b*c.q+e.d*c.A+e.ya*c.K;b.d=e.c*c.s+e.b*c.t+e.d*c.n+e.ya*c.B;b.W=e.c*c.G+e.b*c.H+e.d*c.I+e.ya*c.L;c=b.W==0?1:1/b.W;if(b.d<0)return null;e=new Qa;e.c=a*b.c*c+a;e.b=d-d*b.b*c;return e}function mc(a,b){if(b!=null)a.bg=b}
function Ue(a,b,c){if(b){for(var d=0;d<b.ia.length;++d){var e=b.ia[d];if(e)if(e.k()=="collisionresponse")e.Yc(c);else if(e.k()=="onclick"||e.k()=="onmove")e.ja=c;else if(e.k()=="gameai")e.ja=c;else if(e.k()=="3rdpersoncamera")e.ja=c}for(d=0;d<b.Y.length;++d)(e=b.Y[d])&&Ue(a,e,c)}}
ge.prototype.gm=function(a){if(!a||!this.la)return false;if(this.Im==null)return false;for(var b=null,c=-1,d=0;d<this.la.Db.length;++d)if(a==this.la.Db[d].l){c=d;b=this.la.Db[d];break}if(c==-1)return false;a=(new Ee).gm(this.Im,b,c,this.Yo,this.cb,this.se,this);if(a!=null){b=this.la.Fg()==b;this.la.Db[c]=a;b&&this.ek(a)}return true};function le(a){if(!a.uh&&!a.ii){a.rj.style.display="none";a.rj=null}}
function je(a,b,c){if(a.Rb!=null){var d=document.createElement("div");a.Rb.parentNode.appendChild(d);var e=document.createElement("div");ke(a);var f=b?23:100,g=b?30:0,i=a.vm+(a.Rb.width-200)/2,j=a.wm+a.Rb.height/2;b||(j+=30);c=c.replace("$PROGRESS$","");e.style.cssText="position: absolute; left:"+i+"px; top:"+j+"px; color:#ffffff; padding:5px; background-color:#000000; height:"+f+"px; width:200px; border-radius:5px; border:1px solid #777777;  opacity:0.5;";c='<p style="margin:0; padding-left:'+g+
'px; padding-bottom:5px;">'+c+"</p> ";if(b)c+='<img style="position:absolute; left:5px; top:3px;" src="copperlichtdata/loading.gif" />';e.innerHTML=c;d.appendChild(e);if(b)a.rj=d}}
function xe(a){function b(){var d=a.Rb;if(a.vo){d.nq=d.requestPointerLock||d.mozRequestPointerLock||d.webkitRequestPointerLock;d.nq()}}function c(){var d=a.Rb;a.ui=document.PointerLockElement===d||document.pointerLockElement===d||document.mozPointerLockElement===d||document.webkitPointerLockElement===d?true:false}document.addEventListener("fullscreenchange",b,false);document.addEventListener("mozfullscreenchange",b,false);document.addEventListener("webkitfullscreenchange",b,false);document.addEventListener("pointerlockchange",
c,false);document.addEventListener("mozpointerlockchange",c,false);document.addEventListener("webkitpointerlockchange",c,false)}function $e(a,b,c){if(c==null)c=a.Rb;a.vo=b;c.requestFullscreen=c.requestFullscreen||c.Sq||c.mozRequestFullScreen||c.msRequestFullscreen||c.webkitRequestFullscreen;c.requestFullscreen()};function $(){this.i=-1;this.f=new s;this.S=new s;this.ma=new s(1,1,1);this.X=true;this.l="";this.hb=0;this.Ea=-1;this.sb=null;this.Y=[];this.ia=[];this.aa=new D;this.$a=this.r=null}l=$.prototype;l.db=function(){this.f=new s;this.S=new s;this.ma=new s(1,1,1);this.Y=[];this.ia=[];this.aa=new D};l.f=null;l.S=null;l.ma=null;l.X=true;l.l="";l.Ea=-1;l.$a=null;l.sb=null;l.k=k("none");l.kb=function(){return new y};
function N(a,b){for(var c=0;c<a.ia.length;++c){var d=a.ia[c];if(d.k()==b)return d}return null}function af(a,b){for(var c=0;c<a.ia.length;++c){var d=a.ia[c].Af(b);if(d!=null)return d}return null}function bf(a){var b=a.kb().e();zb(a.aa,b);return b}
function cf(a,b,c,d,e){b.l=new String(a.l);b.X=a.X;b.hb=a.hb;b.f=a.f.e();b.S=a.S.e();b.ma=a.ma.e();b.i=a.i;b.r=a.r;c&&vc(c,b);for(var f=0;f<a.Y.length;++f){var g=a.Y[f];if(g){var i=-1;if(c&&c.r)i=Xc(c.r);g=g.h(b,g.Ea,i);if(g!=null){g.Ea=i;vc(b,g)}}}for(f=0;f<a.ia.length;++f)Yb(b,a.ia[f].h(a,a.r,d,e));if(a.aa)b.aa=a.aa.e()}$.prototype.h=k(null);function Yb(a,b){b!=null&&a.ia.push(b)}function df(a,b){if(b!=null){var c;for(c=0;c<a.ia.length;++c)if(a.ia[c]===b){a.ia.splice(c,1);return}}}
function vc(a,b){if(b){b.r=a.r;b.sb&&b.sb.removeChild(b);b.sb=a;a.Y.push(b)}}$.prototype.removeChild=function(a){for(var b=0;b<this.Y.length;++b)if(this.Y[b]===a){a.sb=null;this.Y.splice(b,1);return}};$.prototype.Ia=function(a){if(this.X)for(var b=0;b<this.Y.length;++b)this.Y[b].Ia(a)};$.prototype.Cb=function(a,b){var c=false;if(this.X){var d,e=this.ia.length;for(d=0;d<e;){c=this.ia[d].fb(this,b)||c;var f=e;e=this.ia.length;f>=e&&++d}P(this);for(d=0;d<this.Y.length;++d)c=this.Y[d].Cb(a,b)||c}return c};
$.prototype.Xl=function(){var a=new D;vb(a,this.S);xb(a,this.f);if(this.ma.c!=1||this.ma.b!=1||this.ma.d!=1){var b=new D;yb(b,this.ma);a=E(a,b)}return a};function P(a){a.aa=a.sb!=null?E(a.sb.aa,a.Xl()):a.Xl()}$.prototype.mb=aa();function O(a){return new s(a.aa.J,a.aa.K,a.aa.B)}$.prototype.Wc=k(0);$.prototype.nc=k(null);function ef(a){for(a=a;a;){if(!a.X)return false;a=a.sb}return true}$.prototype.mo=aa();$.prototype.xi=aa();function Pe(){this.db();this.g=new y;this.rm=this.vc=false;this.fa=new s(0,0,10);this.Fb=new s(0,1,0);this.jb=new D;this.Bc=new D;this.ed=n.PI/2.5;this.Dc=4/3;this.Dg=0.1;this.Cg=3E3;this.Mi=this.Vj=true;this.hi=false;tb(this.jb,this.ed,this.Dc,this.Dg,this.Cg)}Pe.prototype=new $;function ff(a){tb(a.jb,a.ed,a.Dc,a.Dg,a.Cg)}Pe.prototype.k=k("camera");function Qe(a,b){if(!n.D(a.Dc,b)){a.Mi=false;a.Dc=b;ff(a)}}function gf(a,b){if(!n.D(a.ed,b))if(!isNaN(b)){a.ed=b;ff(a)}}
function oc(a,b){if(b){a.fa=b.e();if(a.Vj){P(a);a.S=Ja(b.substract(O(a)))}}}Pe.prototype.Cb=function(a,b){a=$.prototype.Cb.call(this,a,b);this.hi||hf(this);return a};function hf(a){var b=O(a),c=a.fa.e();if(b.D(c))c.c+=1;ub(a.Bc,b,c,a.Fb)}l=Pe.prototype;l.Ia=function(a){if(a.ga===this){jf(a,this,2);$.prototype.Ia.call(this,a)}};l.mb=function(a){this.hi||hf(this);if(this.Dc==0||this.Mi){Oe(this,a.width,a.height);this.Dc==0&&Qe(this,0.75)}this.jb.Ba(a.jb);this.Bc.Ba(a.Nd)};
l.Rd=function(a){for(var b=0;b<this.ia.length;++b)this.ia[b].Rd(a)};l.Ef=function(a){for(var b=0;b<this.ia.length;++b)this.ia[b].Ef(a)};l.pd=function(a){for(var b=0;b<this.ia.length;++b)this.ia[b].pd(a)};l.De=function(a){for(var b=0;b<this.ia.length;++b)this.ia[b].De(a)};l.Be=function(a){for(var b=false,c=0;c<this.ia.length;++c)if(this.ia[c].Be(a))b=true;return b};l.Ce=function(a){for(var b=false,c=0;c<this.ia.length;++c)if(this.ia[c].Ce(a))b=true;return b};
l.h=function(a,b,c){var d=new Pe;cf(this,d,a,b,c);if(this.fa)d.fa=this.fa.e();if(this.Fb)d.Fb=this.Fb.e();if(this.jb)d.jb=this.jb.e();if(this.Bc)d.Bc=this.Bc.e();d.ed=this.ed;d.Dc=this.Dc;d.Dg=this.Dg;d.Cg=this.Cg;if(this.g)d.g=this.g.e();return d};function Oe(a,b,c){if(!(b==0||c==0))if(n.D(a.Dc,0)||a.Mi){Qe(a,b/c);a.Mi=true}};function kf(){this.db();this.g=new y;this.vc=false;this.V=null;this.Iq=true;this.$a=null}kf.prototype=new $;l=kf.prototype;l.kb=function(){if(this.V)return this.V.g;return this.g};l.Qp=ea("V");l.zo=ca("V");l.k=k("mesh");l.Ia=function(a){var b=this.V;if(this.X&&b){for(var c=false,d=false,e=0;e<b.va.length;++e)if(dd(b.va[e].P))c=true;else d=true;c&&jf(a,this,lf);d&&jf(a,this,mf);$.prototype.Ia.call(this,a)}};
l.mb=function(a){a.Yc(this.aa);for(var b=0;b<this.V.va.length;++b){var c=this.V.va[b];if(dd(c.P)==(this.r.$b==lf)){Fd(a,c.P);Gd(a,c)}}};l.Wc=function(){if(this.V)return this.V.va.length;return 0};l.nc=function(a){if(this.V!=null)if(a>=0&&a<this.V.va.length)return this.V.va[a].P;return null};l.h=function(a,b,c){var d=new kf;cf(this,d,a,b,c);if(this.V)d.V=this.V.h();d.Rh=this.Rh;d.vc=this.vc;if(this.g)d.g=this.g.e();return d};function nf(){this.V=new kd;var a=[0,1,2,0,2,3],b=new id;this.V.sd(b);b.P.Kb=true;b.ea=a;b.m.push(this.Na(-1,-1,-1,0,0,1,1,1));b.m.push(this.Na(1,-1,-1,0,0,1,0,1));b.m.push(this.Na(1,1,-1,0,0,1,0,0));b.m.push(this.Na(-1,1,-1,0,0,1,1,0));b=new id;this.V.sd(b);b.P.Kb=true;b.ea=a;b.m.push(this.Na(1,-1,-1,-1,0,0,1,1));b.m.push(this.Na(1,-1,1,-1,0,0,0,1));b.m.push(this.Na(1,1,1,-1,0,0,0,0));b.m.push(this.Na(1,1,-1,-1,0,0,1,0));b=new id;this.V.sd(b);b.P.Kb=true;b.ea=a;b.m.push(this.Na(-1,-1,1,1,0,0,1,1));
b.m.push(this.Na(-1,-1,-1,1,0,0,0,1));b.m.push(this.Na(-1,1,-1,1,0,0,0,0));b.m.push(this.Na(-1,1,1,1,0,0,1,0));b=new id;this.V.sd(b);b.P.Kb=true;b.ea=a;b.m.push(this.Na(1,-1,1,0,0,-1,1,1));b.m.push(this.Na(-1,-1,1,0,0,-1,0,1));b.m.push(this.Na(-1,1,1,0,0,-1,0,0));b.m.push(this.Na(1,1,1,0,0,-1,1,0));b=new id;this.V.sd(b);b.P.Kb=true;b.ea=a;b.m.push(this.Na(1,1,-1,0,-1,0,1,1));b.m.push(this.Na(1,1,1,0,-1,0,0,1));b.m.push(this.Na(-1,1,1,0,-1,0,0,0));b.m.push(this.Na(-1,1,-1,0,-1,0,1,0));b=new id;this.V.sd(b);
b.P.Kb=true;b.ea=a;b.m.push(this.Na(1,-1,1,0,1,0,1,1));b.m.push(this.Na(1,-1,-1,0,1,0,0,1));b.m.push(this.Na(-1,-1,-1,0,1,0,0,0));b.m.push(this.Na(-1,-1,1,0,1,0,1,0))}nf.prototype=new kf;l=nf.prototype;l.k=k("sky");l.Na=function(a,b,c,d,e,f,g,i){d=new Pb(true);d.f.c=a;d.f.b=b;d.f.d=c;d.Aa.c=g;d.Aa.b=i;return d};l.Ia=function(a){if(this.X){jf(a,this,1);$.prototype.Ia.call(this,a)}};
l.mb=function(a){var b=this.r.ga;if(b&&this.V){var c=new D(false);this.aa.Ba(c);xb(c,O(b));b=(b.Dg+b.Cg)*0.5;var d=new D;yb(d,new s(b,b,b));a.Yc(E(c,d));c=this.V;if(c!=null)for(b=0;b<c.va.length;++b){d=c.va[b];Fd(a,d.P);Gd(a,d)}}};l.h=function(a,b,c){var d=new nf;cf(this,d,a,b,c);if(this.V)d.V=this.V.e();d.Rh=this.Rh;d.vc=this.vc;if(this.g)d.g=this.g.e();return d};new kf;function of(){this.db();this.g=new y;this.tg=this.Wh=10;this.rh=false;this.zc=new id;this.Lg=new Pb(true);this.Mg=new Pb(true);this.Ng=new Pb(true);this.Og=new Pb(true);var a=this.zc.ea;a.push(0);a.push(2);a.push(1);a.push(0);a.push(3);a.push(2);a=this.zc.m;a.push(this.Lg);a.push(this.Mg);a.push(this.Ng);a.push(this.Og);this.Lg.Aa.c=1;this.Lg.Aa.b=1;this.Mg.Aa.c=1;this.Mg.Aa.b=0;this.Ng.Aa.c=0;this.Ng.Aa.b=0;this.Og.Aa.c=0;this.Og.Aa.b=1;for(var b=0;b<4;++b)z(this.g,a[b].f)}of.prototype=new $;l=of.prototype;
l.kb=ea("g");l.k=k("billboard");l.Ia=function(a){if(this.X){jf(a,this,dd(this.zc.P)?lf:mf);$.prototype.Ia.call(this,a)}};
l.mb=function(a){var b=this.r.ga;if(b)if(this.rh){e=O(this);var c=O(b),d=b.Fb;b=b.fa.substract(c);b.normalize();c=Ia(d,b);za(c)==0&&c.set(d.b,d.c,d.d);c.normalize();Ca(c,0.5*this.Wh);d=Ia(c,b);d.normalize();Ca(d,0.5*this.tg);this.rh&&d.set(0,-0.5*this.tg,0);Ca(b,1);wa(this.Lg.f,e);this.Lg.f.ta(c);this.Lg.f.ta(d);wa(this.Mg.f,e);this.Mg.f.ta(c);ta(this.Mg.f,d);wa(this.Ng.f,e);ta(this.Ng.f,c);ta(this.Ng.f,d);wa(this.Og.f,e);ta(this.Og.f,c);this.Og.f.ta(d);this.zc.update(true);e=new D(true);a.Yc(e);
Fd(a,this.zc.P);Gd(a,this.zc)}else{var e=O(this);a.Sj==null&&Yd(a);d=a.Sj;b=new D(true);yb(b,new s(this.Wh*0.5,this.tg*0.5,0));c=a.Nd.e();xb(c,new s(0,0,0));var f=new D(true);pb(c,f);xb(f,e);b=E(f,b);a.Yc(b);Fd(a,this.zc.P);Gd(a,d)}};l.Wc=k(1);l.nc=function(){return this.zc.P};l.h=function(a,b,c){var d=new of;cf(this,d,a,b,c);if(this.g)d.g=this.g.e();d.Wh=this.Wh;d.tg=this.tg;d.rh=this.rh;d.zc.P=this.zc.P.e();return d};function pf(){this.db();this.g=new y;this.ua=new id;this.Ta=new s(0,-0.03,0);this.Lb=new s(0,0,0);this.Xj=this.nj=0;this.Za=[]}pf.prototype=new $;l=pf.prototype;l.Ta=null;l.gd=10;l.Lb=null;l.Ye=1E3;l.yh=2E3;l.zh=200;l.Yf=10;l.tj=20;l.wj=4278190080;l.uj=4294967295;l.Zf=5;l.$f=5;l.Wf=7;l.Ah=7;l.jh=false;l.Of=500;l.Of=0;l.Pf=false;l.hj=500;l.zd=null;l.kg=false;l.Nj=20;l.Oj=20;
l.h=function(a,b,c){var d=new pf;cf(this,d,a,b,c);if(this.g)d.g=this.g.e();d.Ta=this.Ta.e();d.gd=this.gd;d.Lb=this.Lb.e();d.Ye=this.Ye;d.yh=this.yh;d.zh=this.zh;d.Yf=this.Yf;d.tj=this.tj;d.wj=this.wj;d.uj=this.uj;d.Zf=this.Zf;d.$f=this.$f;d.Wf=this.Wf;d.Ah=this.Ah;d.jh=true;d.Of=this.Of;d.Ek=this.Ek;d.Pf=this.Pf;d.hj=this.hj;d.zd=this.zd;d.kg=this.kg;d.Nj=this.Nj;d.Oj=this.Oj;d.ua.P=this.ua.P.e();return d};l.kb=ea("g");l.k=k("particlesystem");
l.Ia=function(a){if(this.X){jf(a,this,dd(this.ua.P)?lf:mf);$.prototype.Ia.call(this,a)}};l.mb=aa();l.Wc=k(1);l.nc=function(){return this.ua.P};
l.Cb=function(a,b){var c=false;if(this.X)if(this.nj==0){this.nj=b;c=false}else{c=b-this.nj;this.nj=b;if(this.X){var d=false;d=this.tj-this.Yf;var e=1E3/(d?this.Yf+Math.random()*d:this.Yf);d=this.Za.length;this.Xj+=c;if(this.Xj<=e)d=false;else{e=this.Xj/e+0.5;this.Xj=0;if(d+e>this.zh)e-=d+e-this.zh;if(e<=0)d=false;else{var f=this.Ta.e();jb(this.aa,f);for(var g=ib(this.aa).c,i=xa(this.Lb),j=d;j<d+e;++j){var m=new qf;m.Xc=new s(0,0,0);if(!i){if(this.Lb.c!=0)m.Xc.c=Math.random()*this.Lb.c-this.Lb.c*0.5;
if(this.Lb.b!=0)m.Xc.b=Math.random()*this.Lb.b-this.Lb.b*0.5;if(this.Lb.d!=0)m.Xc.d=Math.random()*this.Lb.d-this.Lb.d*0.5}m.startTime=b;m.Ei=f.e();if(this.gd){var o=f.e(),p=Math.random()*this.gd*2-this.gd;p*=n.yd;var h=Math.cos(p);p=Math.sin(p);o.c=o.c*h-o.b*p;o.b=o.c*p+o.b*h;p=Math.random()*this.gd*2-this.gd;p*=n.yd;h=Math.cos(p);p=Math.sin(p);o.b=o.b*h-o.d*p;o.d=o.b*p+o.d*h;Ka(o,Math.random()*this.gd*2-this.gd);m.Ei=o}m.ni=this.yh-this.Ye==0?b+this.Ye:b+this.Ye+Math.random()*(this.yh-this.Ye);m.color=
n.Wn(this.wj,this.uj,Math.random()*100/100);m.Co=m.color;m.Do=m.Ei.e();if(this.Zf==this.Wf&&this.$f==this.Ah){m.Ai=this.Zf;m.Bi=this.$f}else{o=Math.random()*100/100;h=1-o;m.Ai=this.Zf*o+this.Wf*h;m.Bi=this.$f*o+this.Ah*h}m.Ai*=g;m.Bi*=g;m.lm=m.Ai;m.mm=m.Bi;mb(this.aa,m.Xc);this.Za.unshift(m)}d=true}}if(!this.jh&&!this.Pf&&!this.kg)e=false;else{e=0;f=null;if(this.jh)for(e=0;e<this.Za.length;++e){f=this.Za[e];if(f.ni-b<this.Of)f.color=n.Wn(f.Co,this.Ek,(f.ni-b)/this.Of)}if(this.Pf){g=Fa(this.zd,ib(this.aa));
for(e=0;e<this.Za.length;++e){f=this.Za[e];i=(b-f.startTime)/this.hj;i=n.lc(i,0,1);i=1-i;f.Ei=La(f.Do,g,i)}}if(this.kg){g=ib(this.aa).c;for(e=0;e<this.Za.length;++e){f=this.Za[e];i=(b-f.startTime)/(f.ni-f.startTime);f.lm=f.Ai+this.Nj*i*g;f.mm=f.Bi+this.Oj*i*g}}e=true}d=e||d;e=new s(this.aa.J,this.aa.K,this.aa.B);this.ua.g.reset(e.c,e.b,e.d);if(this.Za.length!=0)d=true;for(e=0;e<this.Za.length;){f=this.Za[e];if(b>f.ni)this.Za.splice(e,1);else{f.Xc.ta(w(f.Ei,c));z(this.ua.g,f.Xc);++e}}c=this.Wf*0.5;
this.ua.g.M.c+=c;this.ua.g.M.b+=c;this.ua.g.M.d+=c;this.ua.g.C.c-=c;this.ua.g.C.b-=c;this.ua.g.C.d-=c;c=new D(false);pb(this.aa,c);zb(c,this.ua.g);c=d}else c=false}return $.prototype.Cb.call(this,a,b)||c};l.Ia=function(a){if(this.X){if(this.Za.length!=0)jf(a,this,dd(this.ua.P)?lf:mf);$.prototype.Ia.call(this,a)}};
l.mb=function(a){if(this.r.ga)if(this.Za.length!=0){if(this.Za.length*4>this.ua.m.length||this.Za.length*6>this.ua.ea.length){for(var b=this.ua.m.length,c=this.ua.m;this.ua.m.length<this.Za.length*4;){var d=null;d=new Pb(true);d.Aa.set(0,0);c.push(d);d=new Pb(true);d.Aa.set(0,1);c.push(d);d=new Pb(true);d.Aa.set(1,1);c.push(d);d=new Pb(true);d.Aa.set(1,0);c.push(d)}b=b;c=this.Za.length*6;d=this.ua.ea;for(var e=this.ua.ea.length;e<c;e+=6){d.push(0+b);d.push(2+b);d.push(1+b);d.push(0+b);d.push(3+b);
d.push(2+b);b+=4}}b=a.Nd;c=new s(-b.s,-b.t,-b.n);d=0;var f=null;for(e=0;e<this.Za.length;++e){var g=this.Za[e];f=0.5*g.lm;var i=new s(b.p*f,b.v*f,b.w*f);f=-0.5*g.mm;var j=new s(b.u*f,b.q*f,b.A*f);f=this.ua.m[0+d];f.f=g.Xc.add(i).add(j);f.Ca=g.color;f.j=c;f=this.ua.m[1+d];f.f=g.Xc.add(i).substract(j);f.Ca=g.color;f.j=c;f=this.ua.m[2+d];f.f=g.Xc.substract(i).substract(j);f.Ca=g.color;f.j=c;f=this.ua.m[3+d];f.f=g.Xc.substract(i).add(j);f.Ca=g.color;f.j=c;d+=4}b=new D(true);a.Yc(b);this.ua.update(false,
true);Fd(a,this.ua.P);Gd(a,this.ua,this.Za.length*2*3)}};function qf(){this.Ei=this.Xc=null;this.Co=this.color=this.ni=this.startTime=0;this.Do=null;this.Bi=this.Ai=this.mm=this.lm=0};function rf(){this.Mh=new s(0,0,0);this.Ca=new ra;this.Da=100;this.Yg=0.01;this.Ta=null;this.ph=false}l=rf.prototype;l.e=function(){var a=new rf;a.Mh=this.Mh.e();a.Ca=this.Ca.e();a.Da=this.Da;a.Yg=this.Yg;a.ph=this.ph;a.Ta=this.Ta!=null?this.Ta.e():null;return a};l.Mh=null;l.Ca=null;l.Yg=null;l.Da=null;l.Ta=null;l.ph=false;function sf(){this.Ob=new rf;this.g=new y;this.db()}sf.prototype=new $;l=sf.prototype;l.k=k("light");l.Ob=null;
l.h=function(a,b,c){var d=new sf;cf(this,d,a,b,c);d.Ob=this.Ob.e();d.g=this.g.e();return d};l.Ia=function(a){this.X&&jf(a,this,tf);$.prototype.Ia.call(this,a);this.Ob.Mh=O(this)};l.kb=ea("g");l.mb=function(a){this.Ob.ph?Rd(a,this.Ob):Qd(a,this.Ob)};function uf(){this.db();this.g=new y;this.Ag=0;this.Re=false;this.zb=[]}uf.prototype=new $;l=uf.prototype;l.Ag=0;l.Re=false;l.zb=[];l.kb=ea("g");l.k=k("path");l.h=function(a,b,c){var d=new uf;cf(this,d,a,b,c);if(this.g)d.g=this.g.e();d.Ag=this.Ag;d.Re=this.Re;d.zb=[];for(a=0;a<this.zb.length;++a)d.zb.push(this.zb[a].e());return d};function vf(a,b){if(b<0||b>=a.zb.length)return new s(0,0,0);a.aa||P(a);b=a.zb[b];b=b.e();mb(a.aa,b);return b}
function wf(a,b,c){if(a.Re)return b<0?c+b:b>=c?b-c:b;return b<0?0:b>=c?c-1:b}
function xf(a,b,c){var d=a.zb.length;if(a.Re)b*=d;else{b=n.lc(b,0,1);b*=d-1}var e=new s;if(d==0)return e;if(d==1)return e;b=b;var f=n.Jp(b),g=Math.floor(b)%d,i=a.zb[wf(a,g-1,d)];e=a.zb[wf(a,g+0,d)];b=a.zb[wf(a,g+1,d)];var j=a.zb[wf(a,g+2,d)],m=2*f*f*f-3*f*f+1;d=-2*f*f*f+3*f*f;g=f*f*f-2*f*f+f;f=f*f*f-f*f;i=b.substract(i);Ca(i,a.Ag);j=j.substract(e);Ca(j,a.Ag);e=w(e,m);e.ta(w(b,d));e.ta(w(i,g));e.ta(w(j,f));if(!c){a.aa||P(a);mb(a.aa,e)}return e};function yf(){this.db();this.g=new y;this.Sm=this.xh=this.ie=0;this.So=false;this.Bg=this.Vk=this.Om=0;this.fg=false;this.Jc=null;this.vp=false;this.Tm=this.Gl=0}yf.prototype=new $;yf.prototype.kb=ea("g");yf.prototype.k=k("sound");yf.prototype.Ia=function(a){if(this.X){jf(a,this,mf);$.prototype.Ia.call(this,a)}};
function zf(a,b,c,d){var e=a.Bg;if(d)if(b)if(d=d.ga){var f=O(d);d.fa.substract(f);c=f.tb(c);if(!(c<a.ie)){c-=a.ie;d=a.xh-a.ie;if(d>0){if(c>d)c=d;d=10;if(c!=0)d=a.ie/c;e*=d;if(e>10)e=10}else e=10}if(e>1)e=1;if(b)try{b.src.Vb.volume=e}catch(g){}}}function Af(a,b){if(!a.Jc&&a.Eb){a.vp=false;a.Jc=Jc(n.Pd,a.Eb,b);if(!a.fg){b=O(a);zf(a,a.Jc,b,a.r)}}}
yf.prototype.Cb=function(a,b){try{var c=O(this);this.Jc&&!this.fg&&zf(this,this.Jc,c,a);switch(this.Sm){case 0:break;case 1:if(this.Jc&&fe(this.Jc)){this.Jc=null;var d=this.Om-this.Vk;if(d<2)d=2;this.Gl=b+Math.random()*d+this.Vk}else if(!this.Jc&&(!this.Gl||b>this.Gl))this.Eb&&Af(this,false);break;case 2:this.Jc||this.Eb&&Af(this,true);break;case 3:if(!this.Tm)if(this.Eb){Af(this,false);++this.Tm}break}}catch(e){}return false};
yf.prototype.h=function(a,b,c){var d=new yf;cf(this,d,a,b,c);if(this.g)d.g=this.g.e();return d};function Bf(a){this.db();this.Oa=a;this.g=new y;this.af=this.$e=100;this.nf=this.of=50;this.cf=this.bf=0.5;this.qf=1/6;this.pf=1/6;this.sg=this.Gd=true;this.Fc=0;this.re=this.Ga=null;this.jg=true;this.Oe=this.wk=false;this.wg=1;this.dd=this.bb="";this.rf=0;this.Hh=this.oh=this.Ih=this.ij=this.fl=this.Vg=false;this.Zh=this.$h=null;this.ym=this.zm="";this.Ti=0}Bf.prototype=new $;l=Bf.prototype;l.dd="";l.rf=0;l.wg=1;l.Kn=k(false);l.kb=ea("g");l.k=k("2doverlay");
l.jm=function(a){this.bb=a;this.Oe=this.bb!=null&&this.bb!="";if(this.dd=="")this.dd="12;default;arial;normal;bold;true"};l.Ia=function(a){if(this.X){jf(a,this,Le);$.prototype.Ia.call(this,a)}};
l.mb=function(a){var b=Cf(this,true,a),c=false;if(this.Oa!=null&&this.Vg){c=this.Oa.fc;var d=this.Oa.gc;c=b.x<=c&&b.y<=d&&b.x+b.Sa>=c&&b.y+b.Pa>=d}if(c&&this.Ih)Md(a,b.x,b.y,b.Sa,b.Pa,this.oh,true);else this.sg&&Md(a,b.x,b.y,b.Sa,b.Pa,this.Fc,true);d=this.Ga;if(c&&this.re&&this.Hh)d=this.re;if(d!=null&&d.ec){var e=d.Ib(),f=d.Hb();if(this.jg){if(e&&f&&b.Pa&&b.Sa){var g=b.Sa;e=g*(f/e);if(e>b.Pa){f=b.Pa/e;g*=f;e*=f}b.Sa=g;b.Pa=e;Nd(a,b.x,b.y,b.Sa,b.Pa,d,true,null,null,null,!this.wk)}}else Nd(a,b.x,b.y,
b.Sa,b.Pa,d,true,null,null,null,!this.wk)}if(this.Oe&&this.dd&&this.bb!=""){a:{e=b.Sa;(d=this.$h==null||false)||(d=this.zm!=this.bb||this.ym!=this.dd);if(d){Df(this,a);d=document.createElement("canvas");if(d!=null){d.width=1;d.height=1;g=null;try{g=d.getContext("2d");if(g==null)break a}catch(i){break a}var j=this.dd;f=12;var m="Arial",o=false,p=false;if(j.indexOf("#fnt_")==0)j=j.substr(5);j=j.split(";");for(var h=0;h<j.length;++h){var x=j[h],t=x.toLowerCase();if(h==0)f=parseInt(t);else if(h==2)m=
x;else if(h==3){if(t.indexOf("italic")!=-1)o=true}else if(h==4)if(t.indexOf("bold")!=-1)p=true}j="";if(o)j+="italic ";if(p)j+="bold ";this.Ti=f*96/72;j+=this.Ti+"px ";j+=m;f=j;g.font=f;if(this.wg==2){m=[];o=this.bb;p=g;x=h=j="";t=o.length;for(var L=0,A=e-6,u="c",H=0;H<t;++H){u=o.charAt(H);var M=false;if(u=="\r"){M=true;u=" ";if(o.charAt(H+1)=="\n"){o=o.substr(0,H).concat(o.substr(H+2));--t}}else if(u=="\n"){M=true;u=" "}if(u==" "||u==0||H==t-1){if(h.length){var J=p.measureText(x).width,X=p.measureText(h).width;
if(L+X+J>A){L=X;m.push(j);j=h}else{j=j.concat(x);j=j.concat(h);L+=J+X}x=h=""}x=x.concat(u);if(M){j=j.concat(x);j=j.concat(h);m.push(j);x=h=j="";L=0}}else h=h.concat(u)}j=j.concat(x);j=j.concat(h);m.push(j);o=this.Ti*1.2;j=m.length;p=0;d.width=e;d.height=Math.max(1,j*o);g.fillStyle="rgba(0, 0, 0, 1)";g.fillRect(0,0,d.width,d.height);g.fillStyle="rgba(255, 255, 255, 1)";g.textBaseline="top";g.font=f;for(e=0;e<m.length;++e){g.fillText(m[e],0,p);p+=o}}else{e=g.measureText(this.bb);d.width=e.width;d.height=
this.Ti*1.2;g.fillStyle="rgba(0, 0, 0, 1)";g.fillRect(0,0,d.width,d.height);g.fillStyle="rgba(255, 255, 255, 1)";g.textBaseline="top";g.font=f;g.fillText(this.bb,0,0)}this.Zh=this.$h=d=ad(a,d,true);this.zm=this.bb;this.ym=this.dd}}}d=this.$h;g=this.rf;if(c){if(this.Zh)d=this.Zh;g=this.ij}if(d){c=d.dg;e=d.cg;this.wg==1?Od(a,b.x+(b.Sa-c)/2,b.y+(b.Pa-e)/2,c,e,d,g):Od(a,b.x,b.y,c,e,d,g)}}else Df(this,a)};function Df(a,b){b.deleteTexture(a.$h);b.deleteTexture(a.Zh);a.$h=null;a.Zh=null}
Bf.prototype.Wc=k(0);function Cf(a,b,c){b=c.Ib();c=c.Hb();var d={};if(a.Gd){d.x=a.$e;d.y=a.af;d.Sa=a.of;d.Pa=a.nf}else{d.x=a.bf*b;d.y=a.cf*c;d.Sa=a.qf*b;d.Pa=a.pf*c}return d}
Bf.prototype.h=function(a,b,c){var d=new Bf;cf(this,d,a,b,c);d.$e=this.$e;d.af=this.af;d.of=this.of;d.nf=this.nf;d.bf=this.bf;d.cf=this.cf;d.qf=this.qf;d.pf=this.pf;d.Gd=this.Gd;d.sg=this.sg;d.Fc=this.Fc;d.Ga=this.Ga;d.re=this.re;d.jg=this.jg;d.Oe=this.Oe;d.wg=this.wg;d.bb=this.bb;d.dd=this.dd;d.rf=this.rf;d.Vg=this.Vg;d.fl=this.fl;d.ij=this.ij;d.Ih=this.Ih;d.oh=this.oh;d.Hh=this.Hh;return d};function Ef(a,b){Bf.call(this,a);this.Lf=null;this.bc=this.ac=0;this.xj=false;this.Ic=this.jj=this.cn=this.bn=this.rl=this.sl=0;Yb(this,new Ff(a,b,this))}Ef.prototype=new Bf;Ef.prototype.k=k("mobile2dinput");Ef.prototype.Kn=k(true);
Ef.prototype.mb=function(a){var b=Cf(this,true,a),c=false;if(this.Oa!=null){var d=this.Oa.fc,e=this.Oa.gc;this.xj=b.x<=d&&b.y<=e&&b.x+b.Sa>=d&&b.y+b.Pa>=e;if(this.Vg)c=this.xj}if(c&&this.Ih)Md(a,b.x,b.y,b.Sa,b.Pa,this.oh,true);else this.sg&&Md(a,b.x,b.y,b.Sa,b.Pa,this.Fc,true);d=this.Ga;if(c&&this.re&&this.Hh)d=this.re;e=c=0;if(d!=null&&d.ec){var f=d.Ib(),g=d.Hb();if(this.jg){if(f&&g&&b.Pa&&b.Sa){c=b.Sa;e=c*(g/f);if(e>b.Pa){f=b.Pa/e;c*=f;e*=f}b.Sa=c;b.Pa=e;Nd(a,b.x,b.y,b.Sa,b.Pa,d,true);c=b.Sa;e=
b.Pa}}else{Nd(a,b.x,b.y,b.Sa,b.Pa,d,true);c=b.Sa;e=b.Pa}}this.sl=c;this.rl=e;this.bn=b.x;this.cn=b.y;if(this.jj==0&&this.Lf!=null&&this.Lf.ec&&d!=null&&d.ec){f=this.ac*Math.sqrt(1-0.5*this.bc*this.bc);g=this.bc*Math.sqrt(1-0.5*this.ac*this.ac);f=(f+1)*0.5;g=(g+1)*0.5;var i=1/(d.Ib()/Number(this.Lf.Ib()));d=1/(d.Hb()/Number(this.Lf.Hb()));i=i*c;d=d*e;Nd(a,b.x+f*c-i*0.5,b.y+g*e-d*0.5,i,d,this.Lf,true)}};function Gf(){this.db();this.g=new y;this.vc=false;this.$a=this.Fa=null;this.sh=0;this.xb=[];this.wb=0.25;this.Le=q();this.pb=this.Qa=this.Hk=0;this.Qb=false;this.tc=0;this.bd=250;this.Yd=true;this.Wi=false;this.Tf=[];this.Ni=0;this.yn=false;this.Wk=20;this.vb=[]}Gf.prototype=new $;n.fn=function(){this.wa=null;this.Aj=this.Sf=-1};Gf.prototype.kb=ea("g");Gf.prototype.Wb=function(a){if(!this.Fa)return false;a=rd(this.Fa,a);if(!a)return false;Hf(this,a.ud,a.O);this.wb=a.wc;return true};
function ic(a,b,c){if(!a.Fa)return false;var d=a.Fa;if(!d)return false;var e=rd(d,b);if(e){Hf(a,e.ud,e.O);e.wc!=0&&If(a,e.wc);a.Qb=c}else if(b){b=b.toLowerCase();if(b=="all"){Hf(a,0,Math.floor(d.ad));d.Bk!=0&&If(a,d.Bk);a.Qb=c}else if(b=="none"){Hf(a,0,0);a.Qb=c}}return true}l=Gf.prototype;l.zo=function(a){if(a){this.Fa=a;this.g=a.kb();Hf(this,0,Math.floor(a.ad))}};l.k=k("animatedmesh");
l.Ia=function(a){if(this.X&&this.Fa){var b=this.xb,c=false,d=false;if(b!=null)for(var e=0;e<b.length;++e)if(dd(b[e]))c=true;else d=true;c&&jf(a,this,lf);d&&jf(a,this,mf);$.prototype.Ia.call(this,a)}};l.Wc=function(){if(this.xb!=null)return this.xb.length;if(this.V)return this.V.va.length;return 0};l.nc=function(a){if(this.xb)if(a>=0&&a<this.xb.length)return this.xb[a];else if(this.Fa&&this.Fa.td&&a>=0&&this.xb.length==a&&a<256){a=new cd;this.xb.push(a);return a}return null};
l.h=function(a,b,c){var d=new Gf;cf(this,d,a,b,c);d.Fa=this.Fa;if(this.g)d.g=this.g.e();d.vc=this.vc;d.$a=this.$a;d.sh=this.sh;d.xb=[];for(a=0;a<this.xb.length;++a)d.xb.push(this.xb[a].e());d.wb=this.wb;d.Le=this.Le;d.Hk=this.Hk;d.Qa=this.Qa;d.pb=this.pb;d.Qb=this.Qb;d.tc=this.tc;d.Wk=this.Wk;d.bd=this.bd;d.Yd=this.Yd;d.Wi=false;d.Tf=[];for(a=d.Ni=0;a<this.vb.length;++a){b=new n.fn;b.wa=this.vb[a].wa;b.Sf=this.vb[a].Sf;b.Aj=this.vb[a].Aj;d.vb.push(b)}return d};function If(a,b){a.wb=b}
function Jf(a,b){a.Qb=b}function Hf(a,b,c){if(!a.Fa)return false;var d=Math.floor(a.Fa.ad)-1,e=a.Qa,f=a.pb;if(c<b){a.Qa=n.lc(c,0,d);a.pb=n.lc(b,a.Qa,d)}else{a.Qa=n.lc(b,0,d);a.pb=n.lc(c,a.Qa,d)}if(e!=a.Qa||f!=a.pb){b=a.tc;a.tc=n.lc(a.Qa,a.Qa,a.pb);a.Le=q()-Math.floor((a.tc-a.Qa)/a.wb);a.Yd&&a.bd&&Kf(a,b)}return true}
function Lf(a){var b=a.Fa;if(b){var c=false;if((c=Mf(a,a.tc))||b.nm){a:{for(c=0;c<a.xb.length;++c)if(a.xb[c].yc){c=true;break a}c=false}if(b.Ad){b.nm=false;pd(b,null,null);var d=0,e=0,f;for(d=0;d<b.qa.length;++d){var g=b.qa[d];for(e=0;e<g.Wg.length;++e){f=b.Ya[g.Wg[e]];f.ue=g.Pe.e()}}for(d=0;d<b.Ya.length;++d){f=b.Zj[d];for(e=0;e<f.length;++e)f[e]=false}for(d=0;d<b.gf.length;++d)qd(b,b.gf[d],null,c)}b.ob.C.set(0,0,0);b.ob.M.set(0,0,0);if(b.Ya.length){c=b.Ya[0];jd(c);b.ob.C=c.g.C.e();b.ob.M=c.g.M.e();
for(d=1;d<b.Ya.length;++d){c=b.Ya[d];jd(c);if(c.ue==null){z(b.ob,c.g.C);z(b.ob,c.g.M)}else{e=c.g.e();zb(c.ue,e);z(b.ob,e.C);z(b.ob,e.M)}}}a.g=b.kb().e();for(c=0;c<b.Ya.length;++c)b.Ya[c].update(true)}a.Hk=a.tc}}
Gf.prototype.Cb=function(a,b){var c=q();if(this.sh==0||c-this.sh>this.Wk){var d;d=0;if(this.Qa==this.pb)d=this.Qa;else if(this.wb==0)d=this.Qa;else{d=0;if(this.Qb){var e=false;d=Math.abs(Math.floor((this.pb-this.Qa)/this.wb));if(this.wb>0){d=this.Qa+(b-this.Le)%d*this.wb;e=d<this.tc}else{d=this.pb-(b-this.Le)%d*-this.wb;e=d>this.tc}e&&this.Yd&&Kf(this,this.tc)}else if(this.wb>0){d=(b-this.Le)*this.wb;d=this.Qa+d;if(d>this.pb)d=this.pb}else{d=(b-this.Le)*-this.wb;d=this.pb-d;if(d<this.Qa)d=this.Qa}d=
d}this.tc=d;this.sh=c}a=$.prototype.Cb.call(this,a,b);this.vb.length!=0&&Nf(this);return a};Gf.prototype.mb=function(a){var b=this.r.Si;if(b)if(!Ob(b,bf(this)))return;if(b=this.Fa){a.Yc(this.aa);!b.Ad||Lf(this);this.yn=true;for(var c=0;c<b.Ya.length;++c){var d=b.Ya[c];if(c<this.xb.length)d.P=this.xb[c];if(dd(d.P)==(this.r.$b==lf)){d.ue!=null&&a.Yc(E(this.aa,d.ue));Fd(a,d.P);Gd(a,d);d.ue!=null&&a.Yc(this.aa)}}}};
function Of(a,b){b=b.length;if(b>a.Tf.length)for(;a.Tf.length<b;){var c={};c.qc=new s(0,0,0);c.Jb=new s(1,1,1);c.rc=new Ab;a.Tf.push(c)}}function Kf(a,b){if(a.yn){var c=a.Fa;if(c){Mf(a,b);a.Ni=q();a.Wi=true;Of(a,c.qa);for(b=0;b<c.qa.length;++b){var d=a.Tf[b],e=c.qa[b];d.qc=e.qc.e();d.Jb=e.Jb.e();d.rc=e.rc.e()}}}}
function Mf(a,b){var c=a.Fa;if(c){var d=1;if(a.Wi){var e=q();if(e-a.Ni>a.bd)a.Wi=false;else{d=(e-a.Ni)/a.bd;Of(a,c.qa);for(e=0;e<c.qa.length;++e){var f=a.Tf[e],g=c.qa[e];g.qc=f.qc.e();g.Jb=f.Jb.e();g.rc=f.rc.e()}}}a=d;if(!c.Ad||n.D(c.Nk,b)&&a==1)c=false;else{c.Nk=b;if(a<0)c=false;else{if(n.D(a,1))for(d=0;d<c.qa.length;++d){e=c.qa[d];f=e.qc.e();g=e.Jb.e();var i=e.rc.e();od(c,b,e,f,e.po,g,e.xo,i,e.wo);e.qc=f.e();e.Jb=g.e();e.rc=i.e()}else for(d=0;d<c.qa.length;++d){e=c.qa[d];var j=e.qc.e(),m=e.Jb.e(),
o=e.rc.e();f=j.e();g=m.e();i=o.e();od(c,b,e,f,e.po,g,e.xo,i,e.wo);e.qc=La(j,f,a);e.Jb=La(m,g,a);Cb(e.rc,o,i,a)}for(b=0;b<c.qa.length;++b){a=c.qa[b];if(a.df.length||a.pe.length||a.hf.length){if(!a.rc)a.rc=new Ab;if(!a.qc)a.qc=new s;a.Vf=Db(a.rc);d=a.Vf;e=a.qc;d.p+=e.c*d.G;d.u+=e.b*d.G;d.s+=e.d*d.G;d.v+=e.c*d.H;d.q+=e.b*d.H;d.t+=e.d*d.H;d.w+=e.c*d.I;d.A+=e.b*d.I;d.n+=e.d*d.I;d.J+=e.c*d.L;d.K+=e.b*d.L;d.B+=e.d*d.L;d.Ma=false;a.Fm=false;if(a.pe.length&&a.Jb&&!(n.D(a.Jb.c,1)&&n.D(a.Jb.b,1)&&n.D(a.Jb.d,
1))){e=a.Jb;d.p*=e.c;d.u*=e.c;d.s*=e.c;d.G*=e.c;d.v*=e.b;d.q*=e.b;d.t*=e.b;d.H*=e.b;d.w*=e.d;d.A*=e.d;d.n*=e.d;d.I*=e.d}}else a.Vf=a.wh.e()}c=c.nm=true}}return c}}Gf.prototype.mo=function(){if(this.r!=null)for(var a=0;a<this.vb.length;){var b=0,c=this.vb[a].Aj;if(c!=-1)b=Pf(this.r,this,c);if(b&&b.k()=="dummytrans"){this.vb[a].wa=b;++a}else this.vb.splice(a,1)}};
function Nf(a){var b=a.Fa;if(b&&b.Ad){Mf(a,a.tc);pd(b,null,null);b=b.qa;for(var c=0;c<a.vb.length;++c){var d=a.vb[c];if(d.Sf>=0&&d.Sf<b.length&&d.wa!=null){var e=b[d.Sf];if(e)d.wa.ig=e.Pe.e()}}}}Gf.prototype.xi=function(a,b){for(var c=0;c<this.vb.length;++c)if(this.vb[c].wa==a)this.vb[c].wa=b&&b.k()=="dummytrans"?b:null};function Qf(){this.g=new y;this.Vo=this.Bp=0}Qf.prototype=new $;function Rf(){this.db();this.g=new y;this.ig=new D}Rf.prototype=new $;Rf.prototype.h=function(a,b,c){var d=new Rf;cf(this,d,a,b,c);if(this.g)d.g=this.g.e();if(this.ig)d.ig=this.ig;return d};Rf.prototype.Xl=ea("ig");Rf.prototype.k=k("dummytrans");function Sf(){this.db();this.g=new y}Sf.prototype=new $;Sf.prototype.k=k("terrain");function Tf(){this.Bm=0;this.$j=new Qa(1,1);this.An=this.Bn=0.5;this.ji=n.mi(190,255,255,255);this.xm=true;this.un=n.mi(190,0,100,0);this.Dk=false;this.Rk=0;this.Km=new D;this.Xi=false;this.P=new cd;this.P.yc=false;this.P.i=-1;this.P.Zd=false;this.Em=this.ef=null}Tf.prototype=new kf;l=Tf.prototype;l.k=k("water");
l.Ia=function(a){if(this.X){jf(a,this,lf);$.prototype.Ia.call(this,a);var b=a.ga,c=q(),d=false;if(this.Rk){d=100;if(b){var e=O(b),f=Sa(this.kb()).getLength();e=O(this).tb(e);if(e>f)d*=e/f;if(d>1E3)d=1E3;b.Bc.D(this.Km)||(d=10);this.Km=b.Bc.e()}d=this.Rk+d<c}else d=true;if(d){this.Rk=c;jf(a,this,Je)}if(this.Dk)jf(a,this,Le);else if(b){b=O(b);c=O(this);if(b.b<c.b){c=bf(this);b.c>=c.C.c&&b.c<=c.M.c&&b.d>=c.C.d&&b.d<=c.M.d&&jf(a,this,Le)}}}};l.Cb=function(a,b){kf.prototype.Cb.call(this,a,b);return true};
l.mb=function(a){var b=this.r.ga;if(b&&this.V){if((b=this.r.Si)&&this.r.$b!=Le)if(!Ob(b,bf(this)))return;if(this.r.$b==lf){if(!(this.P.i==-1||this.ef==null))if(!this.Xi){a.Yc(this.aa);if(b=this.V){this.g=b.g;this.P.ab=this.ef;if(b&&b.va&&b.va.length>0)this.P.kc=b.va[0].P.ab;for(var c=0;c<b.va.length;++c){var d=b.va[c];if(d){Fd(a,this.P);Gd(a,d)}}}}}else if(this.r.$b==Je){if(Uf(this,a)){c=a.Ui;a.Rf=true;if(Xd(a,this.ef,true,true,this.r.vk)){this.Xi=true;b=this.r.ga;d=b.jb;var e=b.Bc,f=b.Fb,g=b.fa,
i=b.f,j=b.Vj,m=b.hi;b.hi=true;b.Vj=false;var o=O(this).b,p=g.e(),h=i.e();h.b=-i.b+2*o;b.f=h;p.b=-g.b+2*o;b.fa=p;var x=new D;ub(x,h,p,new s(0,1,0));b.Bc=x;p=new Wa;o=new s(0,o,0);h=new s(0,1,0);p.j=h.e();ab(p,o);o=p.e();p=w(o.j,-o.Xa);mb(x,p);h=o.j.e();h.normalize();var t=ib(x);if(!n.D(t.c,0)&&!n.D(t.b,0)&&!n.D(t.d,0)&&(!n.D(t.c,1)||!n.D(t.b,1)||!n.D(t.d,1))){h.c*=1/(t.c*t.c);h.b*=1/(t.b*t.b);h.d*=1/(t.d*t.d)}jb(x,h);h.normalize();o.j=h.e();ab(o,p);x=new D;p=x=d.e();h=n.Bo(o.j.c+p.w)/p.p;t=n.Bo(o.j.b+
p.A)/p.q;h=-2/(h*o.j.c+t*o.j.b+-1*o.j.d+(1+p.n)/p.B*o.Xa);p.s=o.j.c*h;p.t=o.j.b*h;p.n=o.j.d*h+1;p.B=o.Xa*h;this.Em=x;Ke(this.r,a,this);b.hi=m;b.jb=d;b.Bc=e;b.fa=g;b.f=i;b.Fb=f;b.Vj=j;a.Rf=false;Xd(a,c,false,true);this.Xi=false}a.Rf=false}}else if(this.r.$b==Le&&!this.Xi){this.xm&&!this.Dk&&Md(a,0,0,a.Ib(),a.Hb(),this.un,true);this.Dk&&Nd(a,10,10,250,200,this.ef,false)}}};l.h=function(a,b,c){var d=new Tf;cf(this,d,a,b,c);if(this.V)d.V=this.V.e();d.Rh=this.Rh;d.vc=this.vc;if(this.g)d.g=this.g.e();return d};
function Uf(a,b){if(a.ep)return a.ef!=null;a.ep=true;Vf(a,b);if(!a.ef)return false;var c=b.$;a.P.i=Ud(b,a.xq,a.Pp,true,c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA,function(){var d=b.$,e=Vd(b,a.P.i);if(e){var f=d.getUniformLocation(e,"mWaterColor");d.uniform4f(f,n.nd(a.ji)/255,n.md(a.ji)/255,n.ld(a.ji)/255,n.xe(a.ji)/255);f=q()/1E3%1E3;var g=d.getUniformLocation(e,"mWaveMovement");d.uniform2f(g,a.$j.c*f,a.$j.b*f);f=d.getUniformLocation(e,"mWaveLength");d.uniform1f(f,a.Bn*100);e=d.getUniformLocation(e,"mWaveHeight");
d.uniform1f(e,a.An)}});return true}Tf.prototype.xq="\t\t\tuniform mat4 worldviewproj;\t\t\t\t\t\t\t\t\t\tuniform float mWaveLength;\t\t\t\t\t\t\t\t\t\tuniform vec2 mWaveMovement;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t    attribute vec4 vNormal;\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vColor;\t\t\t\t\t\t\t\t\t\t    attribute vec2 vTexCoord1;\t\t\t\t\t\t\t\t\t\tattribute vec2 vTexCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec2 WavesTexCoord;\t\t\t\t\t\t\t\t\t\tvarying vec3 TexCoord;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvec4 pos = worldviewproj * vPosition;\t\t\t\t\t        gl_Position = pos;\t\t\t\t\t\t\t\t\t\t\t\tWavesTexCoord = (vPosition.xz / mWaveLength) + mWaveMovement;\t\t\tTexCoord.x = 0.5 * (pos.w + pos.x);\t\t\t\t\t\t\t\tTexCoord.y = 0.5 * (pos.w + pos.y);\t\t\t\t\t\t\t\tTexCoord.z = pos.w;\t\t\t\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
Tf.prototype.Pp="\t\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\tuniform float\t\tmWaveHeight;\t\t\t\t\t\t\t\tuniform vec4\t\tmWaterColor;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 WavesTexCoord;\t\t\t\t\t\t\t\t\t\tvarying vec3 TexCoord;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvec4 normalClr = texture2D(texture2, WavesTexCoord.xy);\t\t\tvec2 waveMovement = mWaveHeight * (normalClr.xy - 0.5);\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvec2 projTexCoord = clamp((TexCoord.xy / TexCoord.z) + waveMovement, 0.0, 1.0);\t\t\t\tvec4 reflectiveColor = texture2D(texture1, vec2(projTexCoord.x, -projTexCoord.y) );\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgl_FragColor = mWaterColor * reflectiveColor;\t\t\t\t\tgl_FragColor.a = mWaterColor.a;\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
function Vf(a,b){if(b!=null){var c=b.Ib(),d=b.Hb(),e=512,f=512;switch(a.Bm){case 0:e=c/2;f=d/2;break;case 1:e=c/3;f=d/3;break;case 2:e=c/4;f=d/4;break}e=wd(b,e);f=wd(b,f);e=Math.min(e,f);f=Math.min(e,f);if(e<64)e=64;if(f<64)f=64;a.ef=Wd(b,e,f)}}function Wf(a,b){a.Em.Ba(b.jb)};function Xf(){this.db()}Xf.prototype.db=function(){this.Ja=new $;this.Ja.r=this;this.l="";this.vk=0;this.wd=null;this.Zb=new ra;this.Zb.Kc=0;this.Zb.Hc=0;this.Zb.Ec=0;this.zd=1;this.lh=false;this.xc=n.mi(255,200,200,200);this.kh=0.0010;this.th=null;this.Ka=0;this.ga=null;this.Gk=false;this.pj=new D;this.xp=null;this.Hj=2;this.$b=0;this.Pj=[];this.rg=[];this.We=[];this.Jj=[];this.Ej=[];this.Lc=[];this.tp=this.dp=0;this.Ap=false;this.Si=null;this.xn=false;this.fh=[];this.Ok=new s};Xf.prototype.dk=k("unknown");
function Ke(a,b,c){a.$b=Yf;var d=null;if(a.ga){d=O(a.ga);a.ga.mb(b)}a.$b=Zf;a.ln&&a.ln.mb(b);Pd(b);b.Zb=a.Zb.e();b.lh=a.lh;b.xc.Pg=1;b.xc.Kc=n.nd(a.xc)/255;b.xc.Hc=n.md(a.xc)/255;b.xc.Ec=n.ld(a.xc)/255;b.kh=a.kh;var e,f=0;d!=null&&a.We.length>0&&a.We.sort(function(j,m){j=ya(d,O(j));m=ya(d,O(m));if(j>m)return 1;if(j<m)return-1;return 0});a.$b=tf;for(e=0;e<a.We.length;++e)a.We[e].mb(b);f+=a.We.length;c&&Wf(c,b);e=c=null;var g=b.jb,i=b.Nd;if(g!=null&&i!=null&&d!=null){e=new Gb;e.nk(E(g,i));if(a.Ap)c=
e.kb(d)}a.Si=e;a.$b=mf;for(e=0;e<a.Pj.length;++e){g=a.Pj[e];if(c==null||Va(c,bf(g))){g.mb(b);f+=1}}a.$b=lf;d!=null&&a.rg.length>0&&a.rg.sort(function(j,m){j=ya(d,O(j));m=ya(d,O(m));if(j<m)return 1;if(j>m)return-1;return 0});for(e=0;e<a.rg.length;++e){g=a.rg[e];if(c==null||Va(c,bf(g))){g.mb(b);f+=1}}a.dp=f}Xf.prototype.getName=ea("l");Xf.prototype.im=ca("l");function $f(a,b){a.ga=b}function Ge(a){a.Gk=true}
function jf(a,b,c){if(c==null)c=mf;switch(c){case Zf:a.ln=b;break;case mf:a.Pj.push(b);break;case tf:a.We.push(b);break;case Yf:break;case lf:a.rg.push(b);break;case Le:a.Ej.push(b);break;case Je:a.Jj.push(b);break}}function Ne(a,b){if(a.Ja==null)return null;var c=[];ag(a,a.Ja,b,c);return c}function ag(a,b,c,d){b.k()==c&&d.push(b);for(var e=0;e<b.Y.length;++e)ag(a,b.Y[e],c,d)}function rc(a,b){if(a.Ja==null)return null;var c=[];bg(a,a.Ja,b,c);return c}
function bg(a,b,c,d){N(b,c)!=null&&d.push(b);for(var e=0;e<b.Y.length;++e)bg(a,b.Y[e],c,d)}function cg(a,b){if(a.Ja==null)return null;return dg(a,a.Ja,b)}function dg(a,b,c){if(b.l==c)return b;for(var d=0;d<b.Y.length;++d){var e=dg(a,b.Y[d],c);if(e)return e}return null}function G(a,b){if(a.Ja==null)return null;return Pf(a,a.Ja,b)}function Pf(a,b,c){if(b.Ea==c)return b;for(var d=0;d<b.Y.length;++d){var e=Pf(a,b.Y[d],c);if(e)return e}return null}
function eg(a,b){if(b!=null){for(var c=0;c<a.Lc.length;++c)if(a.Lc[c]===b)return;a.Lc.push(b)}}
function Te(a,b,c){var d=Ne(a,"mesh");if(d==null)return null;var e=null;if(c){c.clear();e=c}else e=new fg;for(c=0;c<d.length;++c){var f=d[c];if(f&&f.vc){var g=null;if(f.$a)g=f.$a;else{g=null;if(f.sb&&f.sb.k()=="terrain")g=gd;g=f.V&&ld(f.V)>100?new mg(f.V,f,64,g):new ng(f.V,f,g)}if(b&&f.$a==null)f.$a=g;Yc(e,g)}}d=Ne(a,"animatedmesh");for(c=0;c<d.length;++c)if((a=d[c])&&a.Fa&&!a.Fa.Ad&&a.Fa.Yh&&!a.Fa.Yh.M.D(a.Fa.Yh.C)){g=a.$a?a.$a:new og(a.Fa.Yh,a);if(b&&a.$a==null)a.$a=g;Yc(e,g)}return e}
function Vc(a,b,c){var d={};d.Ae=b;d.qq=c+q();a.fh.push(d)}function pg(a,b,c,d,e){if(b&&b.X&&(b.k()=="2doverlay"||b.k()=="mobile2dinput"))if(!e||e&&b.Kn()){var f=Cf(b,true,a.th);if(f.x<=c&&f.y<=d&&f.x+f.Sa>=c&&f.y+f.Pa>=d)return b}for(f=0;f<b.Y.length;++f){var g=pg(a,b.Y[f],c,d,e);if(g)return g}return null}function Xc(a){for(var b=0;b<1E3;++b){var c=Math.round(Math.random()*1E4+10);if(G(a,c)==null)return c}return-1}
Xf.prototype.xi=function(a,b){if(a&&b){for(var c=0;c<a.Y.length&&c<b.Y.length;++c){var d=a.Y[c],e=b.Y[c];d&&e&&d.k()==e.k()&&b.xi(d,e)}return-1}};var Zf=1,mf=0,tf=2,Yf=3,lf=4,Le=5,Je=6;function qg(){this.db()}qg.prototype=new Xf;qg.prototype.dk=k("panorama");function rg(){this.db();this.Ak=new s;this.Zi=new s}rg.prototype=new Xf;rg.prototype.dk=k("free");function Ee(){this.a=this.la=null;this.Fk="";this.yb=0;this.N=this.cb=null;this.Fj="";this.qn=this.se=null;this.Mm=false;this.No=function(a){var b="";a=new Uint8Array(a);for(var c=0;c<a.byteLength;c++)b+=String.fromCharCode(a[c]);return b};this.Tp=function(a,b,c,d,e){this.Fk=b;this.cb=c;this.N=e;this.se=d;if(this.cb!=null)Z().cb=c;if(a!=null&&b.indexOf(".ccbz")!=-1)a=this.No(a);if(a==null||a.length==0){la(n.na,"Error: Could not load file '"+b+"'");a=navigator.appVersion;a!=null&&a.indexOf("Chrome")!=
-1&&la(n.na,"<i>For using local files with Chrome, add the parameter '--allow-file-access-from-files' when starting the browser.<br/>Or use Firefox instead. Or run it from a web server. Or from CopperCube.</i>",true);return null}if(b.indexOf(".ccbz")!=-1)a=JSInflate.Sp(a);else if(b.indexOf(".ccbjs")!=-1)a=n.Ep(a);this.la=b=new he;this.Ao();this.a=new yd(a);if(!this.dm())return null;this.qn=a;return b};this.Ao=function(){var a=this.Fk,b=a.lastIndexOf("/");if(b!=-1)a=a.substring(0,b+1);this.Fj=a};this.dm=
function(){if(V(this.a)!=1701014630)return false;V(this.a);Cd(this.a,4);for(var a=0;zd(this.a)>0;){var b=this.lb();++a;if(a==1&&b!=1)return false;switch(b){case 1:this.Xp();break;case 12:this.Yp();break;default:this.xa()}}return true};this.xa=function(){this.a.La=0+this.yb};this.lb=function(){var a=0;a=Cd(this.a,2);var b=0;this.Vi=b=Cd(this.a,4);this.yb=this.a.La+b;return a};this.Zm=function(){var a=new D(false);this.jp(a);return a};this.jp=function(a){for(var b=0;b<16;++b)sb(a,b,W(this.a))};this.lp=
function(){var a=new Ab;a.ya=W(this.a);a.c=W(this.a);a.b=W(this.a);a.d=W(this.a);return a};this.to=function(a){for(var b=0,c=[],d=[0,12416,925824,63447168,4194836608,2181570688],e=[],f=0;f<a;++f)e.push(Cd(this.a,1));for(;b<a;){f=0;var g=this.rq[e[b]];if(b+g>=a)return c.join("");for(var i=g;i>=0;--i){f+=e[b];++b;if(i!=0)f<<=6}if(b>a)break;f-=d[g];if(f<1114111)c.push(this.Ip(f));else return c.join("")}return c.join("")};this.R=function(){var a=Cd(this.a,4);if(a>104857600)return"";if(a<=0)return"";return this.to(a)};
this.rq=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,
3,3,4,4,4,4,5,5,5,5];this.Ip=function(a){if(a>65535){a-=65536;return String.fromCharCode(55296+(a>>10),56320+(a&1023))}else return String.fromCharCode(a)};this.Xp=function(){for(var a=this.yb;zd(this.a)>0&&this.a.La<a;)switch(this.lb()){case 1004:this.la.bh=V(this.a);break;case 20:this.jq();break;case 2:var b=null;switch(V(this.a)){case 0:b=new rg;this.ro(b);break;case 1:b=new qg;this.so(b);break;default:this.xa()}this.la.Ml(b);break;default:this.xa()}};this.gm=function(a,b,c,d,e,f,g){this.Fk=d;this.cb=
e;this.N=g;this.se=f;this.a=new yd(a);this.Ao();V(this.a);V(this.a);Cd(this.a,4);a=-1;d=this.lb();if(d!=1)return null;for(b=this.yb;zd(this.a)>0&&this.a.La<b;){d=this.lb();switch(d){case 2:d=V(this.a);++a;if(a==c){c=null;switch(d){case 0:c=new rg;this.ro(c);break;case 1:c=new qg;this.so(c);break;default:this.xa()}return c}else this.xa();default:this.xa()}}return null};this.jq=function(){V(this.a);this.la.Mo=this.R();for(var a=this.yb;zd(this.a)>0&&this.a.La<a;)switch(this.lb()){case 35:V(this.a);
V(this.a);V(this.a);V(this.a);var b=V(this.a);if((b&1)!=0)this.la.wn=true;this.xa();break;case 37:b=V(this.a);V(this.a);if((b&1)!=0)if(n.na==null)n.na=new fa(elementIdOfCanvas,showFPSCounter);else ga(n.na);if((b&2)!=0){V(this.a);this.R()}break;default:this.xa()}};this.ro=function(a){var b=this.yb;for(this.kq(a);zd(this.a)>0&&this.a.La<b;)switch(this.lb()){case 1007:a.Ak=this.Q();a.Zi=this.Q();break;case 8:this.mp(a);break;case 1008:a.zd=W(this.a);break;case 1009:a.lh=S(this.a);a.kh=W(this.a);a.xc=
V(this.a);break;default:this.xa()}};this.so=function(){this.xa()};this.Q=function(){var a=new s;a.c=W(this.a);a.b=W(this.a);a.d=W(this.a);return a};this.ol=function(){var a=new ra;a.Kc=W(this.a);a.Hc=W(this.a);a.Ec=W(this.a);a.Pg=W(this.a);return a};this.Hq=function(){var a=W(this.a),b=W(this.a),c=W(this.a),d=W(this.a);if(a>1)a=1;if(b>1)b=1;if(c>1)c=1;if(d>1)d=1;return n.mi(d*255,a*255,b*255,c*255)};this.Qh=function(){var a=new Qa;a.c=W(this.a);a.b=W(this.a);return a};this.jc=function(){var a=new y;
a.C=this.Q();a.M=this.Q();return a};this.kq=function(a){if(this.lb()==26){a.l=this.R();a.vk=V(this.a)}else this.Xo()};this.Xo=function(){this.a.position-=10};this.mp=function(a){for(var b=this.yb;zd(this.a)>0&&this.a.La<b;)switch(this.lb()){case 9:this.an(a,a.Ja,0);break;default:this.xa()}};this.an=function(a,b,c){if(b!=null){var d=this.yb,e=V(this.a),f=V(this.a),g=this.R(),i=this.Q(),j=this.Q(),m=this.Q(),o=S(this.a),p=V(this.a),h=null,x=0;if(c==0){b.X=o;b.l=g;b.hb=p}for(;zd(this.a)>0&&this.a.La<
d;)switch(this.lb()){case 9:this.an(a,h?h:b,c+1);break;case 10:switch(e){case 2037085030:h=new nf;h.i=e;h.f=i;h.S=j;h.ma=m;h.X=o;h.l=g;h.hb=p;h.Ea=f;h.r=a;this.em(h);vc(b,h);h=h;P(h);break;case 1752395110:h=new kf;h.i=e;h.f=i;h.S=j;h.ma=m;h.X=o;h.l=g;h.hb=p;h.Ea=f;h.r=a;this.em(h);vc(b,h);h=h;P(h);break;case 1835950438:h=new Gf;h.i=e;h.f=i;h.S=j;h.ma=m;h.X=o;h.l=g;h.hb=p;h.Ea=f;h.r=a;this.bq(h);vc(b,h);h=h;P(h);break;case 1953526632:h=new Qf(this.N,null);h.i=e;h.f=i;h.S=j;h.ma=m;h.X=o;h.l=g;h.hb=
p;h.Ea=f;h.r=a;this.eq(h);vc(b,h);h=h;P(h);break;case 1819042406:h=new of;h.i=e;h.f=i;h.S=j;h.ma=m;h.X=o;h.l=g;h.hb=p;h.Ea=f;h.r=a;this.cq(h);vc(b,h);h=h;P(h);break;case 1835098982:h=new Pe;h.i=e;h.f=i;h.S=j;h.ma=m;h.X=o;h.l=g;h.hb=p;h.r=a;h.Ea=f;this.dq(h);vc(b,h);h=h;P(h);break;case 1751608422:h=new sf;h.i=e;h.f=i;h.S=j;h.ma=m;h.X=o;h.l=g;h.hb=p;h.Ea=f;h.r=a;this.fq(h);vc(b,h);h=h;P(h);break;case 1935946598:h=new yf;h.i=e;h.f=i;h.S=j;h.ma=m;h.X=o;h.l=g;h.hb=p;h.Ea=f;h.r=a;this.aq(h);vc(b,h);h=h;
P(h);break;case 1752461414:h=new uf;h.i=e;h.f=i;h.S=j;h.ma=m;h.X=o;h.l=g;h.hb=p;h.Ea=f;h.r=a;this.gq(h);vc(b,h);h=h;P(h);break;case 1954112614:h=new Rf;h.i=e;h.f=i;h.S=j;h.ma=m;h.X=o;h.l=g;h.hb=p;h.Ea=f;h.r=a;h.g=this.jc();for(var t=0;t<16;++t)sb(h.ig,t,W(this.a));vc(b,h);h=h;P(h);break;case 1868837478:h=new Bf(this.N);h.i=e;h.f=i;h.S=j;h.ma=m;h.X=o;h.l=g;h.hb=p;h.Ea=f;h.r=a;this.$p(h);vc(b,h);h=h;P(h);break;case 1668575334:h=new pf;h.i=e;h.f=i;h.S=j;h.ma=m;h.X=o;h.l=g;h.hb=p;h.Ea=f;h.r=a;this.iq(h);
vc(b,h);h=h;P(h);break;case 1835283046:h=new Ef(this.N,a);h.i=e;h.f=i;h.S=j;h.ma=m;h.X=o;h.l=g;h.hb=p;h.Ea=f;h.r=a;this.Zp(h);vc(b,h);h=h;P(h);break;case 1920103526:h=new Sf;h.i=e;h.f=i;h.S=j;h.ma=m;h.X=o;h.l=g;h.hb=p;h.Ea=f;h.r=a;h.g=this.jc();vc(b,h);h=h;P(h);this.xa();break;case 1920235366:h=new Tf;h.i=e;h.f=i;h.S=j;h.ma=m;h.X=o;h.l=g;h.hb=p;h.Ea=f;h.r=a;this.mq(h);vc(b,h);h=h;P(h);break;default:if(c==0)a.Zb=this.ol();this.xa();break}break;case 11:t=this.Ym();h&&h.nc(x)&&h.nc(x).nk(t);++x;break;
case 25:t=h;if(t==null&&c==0)t=a.Ja;this.ip(t,a);break;default:this.xa()}h&&h.mo()}};this.em=function(a){var b=this.yb;a.g=this.jc();S(this.a);S(this.a);a.vc=S(this.a);for(S(this.a);zd(this.a)>0&&this.a.La<b;)switch(this.lb()){case 14:var c=this.kp();a.V=c;break;default:this.xa()}};this.kp=function(){var a=new kd;a.g=this.jc();for(var b=this.yb;zd(this.a)>0&&this.a.La<b;)switch(this.lb()){case 15:var c=this.$m();c!=null&&a.sd(c);break;default:this.xa()}return a};this.$m=function(){var a=new id;a.g=
this.jc();for(var b=this.yb;zd(this.a)>0&&this.a.La<b;)switch(this.lb()){case 11:a.P=this.Ym();break;case 16:for(var c=Math.floor(this.Vi/2),d=0;d<c;++d)a.ea.push(Cd(this.a,2));break;case 17:c=Math.floor(this.Vi/36);for(d=0;d<c;++d){var e=new Pb;e.f=this.Q();e.j=this.Q();e.Ca=V(this.a);e.Aa=this.Qh();e.vg=new Qa;a.m.push(e)}break;case 18:c=Math.floor(this.Vi/44);for(d=0;d<c;++d){e=new Pb;e.f=this.Q();e.j=this.Q();e.Ca=V(this.a);e.Aa=this.Qh();e.vg=this.Qh();a.m.push(e)}break;case 19:c=this.Vi/60;
a.Kd=[];a.vd=[];for(d=0;d<c;++d){e=new Pb;e.f=this.Q();e.j=this.Q();e.Ca=V(this.a);e.Aa=this.Qh();e.vg=new Qa;a.Kd.push(this.Q());a.vd.push(this.Q());a.m.push(e)}break;default:this.xa()}return a};this.Ym=function(){var a=new cd;a.i=V(this.a);V(this.a);V(this.a);V(this.a);V(this.a);W(this.a);V(this.a);V(this.a);S(this.a);S(this.a);a.yc=S(this.a);a.yf=S(this.a);Bd(this.a,1);a.Zd=S(this.a);S(this.a);S(this.a);S(this.a);for(var b=0;b<4;++b){var c=this.hd();switch(b){case 0:a.ab=c;break;case 1:a.kc=c;
break}S(this.a);S(this.a);S(this.a);if(Cd(this.a,2)!=0)switch(b){case 0:a.Kb=true;break;case 1:break}}return a};this.pl=function(){return this.R()};this.ql=function(){var a=this.Fj+this.pl();return ae(n.Pd,a,true)};this.hd=function(){var a=this.pl(),b=this.Fj+a;if(this.cb!=null&&a!="")return td(this.cb,b,true);return null};this.eq=function(a){var b=this.yb;a.g=this.jc();a.Bp=V(this.a);for(a.Vo=V(this.a);zd(this.a)>0&&this.a.La<b;)switch(this.lb()){case 3:this.hq(a);break;default:this.xa()}};this.hq=
function(a){var b=this.yb;a.caption=this.R();a.yg=this.hd();this.Qh();V(this.a);a.Oq=this.R();for(a.Wq=S(this.a);zd(this.a)>0&&this.a.La<b;)switch(this.lb()){case 6:a.Lq=true;a.Qq=this.R();break;case 4:a.Mq=true;a.ek=this.R();break;case 5:a.Nq=true;a.Xq=this.R();a.Yq=this.R();break;default:this.xa()}};this.dq=function(a){a.g=this.jc();a.fa=this.Q();a.Fb=this.Q();a.ed=W(this.a);a.Dc=W(this.a);a.Dg=W(this.a);a.Cg=W(this.a);a.rm=S(this.a);ff(a)};this.mq=function(a){V(this.a);a.Bm=V(this.a);a.$j.c=W(this.a);
a.$j.b=W(this.a);a.Bn=W(this.a);a.An=W(this.a);a.ji=V(this.a);a.xm=S(this.a);a.un=V(this.a);this.em(a)};this.fq=function(a){a.g=this.jc();if(V(this.a)==2)a.Ob.ph=true;a.Ob.Ca=this.ol();this.ol();S(this.a);a.Ob.Ta=this.Q();var b=W(this.a);a.Ob.Da=b;if(b!=0)a.Ob.Yg=1/b};this.cq=function(a){a.zc.g=this.jc();a.g=a.zc.g;a.Wh=W(this.a);a.tg=W(this.a);var b=Bd(this.a,1);a.rh=(b&2)!=0};this.aq=function(a){a.g=this.jc();a.Eb=this.ql();a.ie=W(this.a);a.xh=W(this.a);a.Sm=V(this.a);a.So=S(this.a);a.Om=V(this.a);
a.Vk=V(this.a);a.Bg=W(this.a);a.fg=S(this.a);V(this.a)};this.gq=function(a){a.g=this.jc();a.Ag=W(this.a);a.Re=S(this.a);V(this.a);for(var b=V(this.a),c=0;c<b;++c)a.zb.push(this.Q())};this.iq=function(a){a.Ta=this.Q();a.gd=V(this.a);a.Lb=this.Q();a.Ye=V(this.a);a.yh=V(this.a);a.zh=V(this.a);a.Yf=V(this.a);a.tj=V(this.a);a.wj=V(this.a);a.uj=V(this.a);a.Zf=W(this.a);a.$f=W(this.a);a.Wf=W(this.a);a.Ah=W(this.a);var b=V(this.a);if(b&1){a.jh=true;a.Of=V(this.a);a.Ek=V(this.a)}else a.jh=false;if(b&2){a.Pf=
true;a.hj=V(this.a);a.zd=this.Q()}else a.Pf=false;if(b&4){a.kg=true;a.Nj=W(this.a);a.Oj=W(this.a)}else a.kg=false};this.Zp=function(a){V(this.a);a.Gd=S(this.a);if(a.Gd){a.$e=V(this.a);a.af=V(this.a);a.of=V(this.a);a.nf=V(this.a)}else{a.bf=W(this.a);a.cf=W(this.a);a.qf=W(this.a);a.pf=W(this.a)}a.sg=S(this.a);a.Fc=V(this.a);a.Ga=this.hd();a.re=this.hd();a.jg=S(this.a);a.Lf=this.hd();a.jj=V(this.a);if(a.jj==1)a.Ic=V(this.a)};this.$p=function(a){if(V(this.a)&1)a.wk=true;a.Gd=S(this.a);if(a.Gd){a.$e=V(this.a);
a.af=V(this.a);a.of=V(this.a);a.nf=V(this.a)}else{a.bf=W(this.a);a.cf=W(this.a);a.qf=W(this.a);a.pf=W(this.a)}a.sg=S(this.a);a.Fc=V(this.a);a.Ga=this.hd();a.re=this.hd();a.jg=S(this.a);a.Oe=S(this.a);a.wg=Bd(this.a,1);a.bb=this.R();a.dd=this.R();a.rf=V(this.a);a.Vg=S(this.a);a.fl=S(this.a);a.ij=V(this.a);a.Ih=S(this.a);a.oh=V(this.a);a.Hh=S(this.a)};this.ip=function(a,b){if(a){var c=null;switch(V(this.a)){case 100:b=new $b;b.oe=this.Q();c=b;break;case 101:b=new Wb;b.Z=this.Q();b.O=this.Q();b.kd=V(this.a);
b.Pb=S(this.a);Xb(b);c=b;break;case 102:b=new sg;b.$g=this.Q();b.Ta=this.Q();b.Da=W(this.a);b.Xh=W(this.a);b.db();c=b;break;case 103:b=new tg;b.Da=this.Q();W(this.a);b.Ji=!n.D(W(this.a),0);W(this.a);b.uf=this.Q();c=V(this.a);V(this.a);V(this.a);if(c&1)b.Yj=true;b.Bb=W(this.a);c=b;break;case 104:b=new Re(a,this.N);b.Xf=W(this.a);b.Sb=W(this.a);b.Tb=W(this.a);b.fe=W(this.a);b.ke=S(this.a);c=V(this.a);if(c&1){b.kk=false;b.Jg=true}else{b.kk=true;b.Jg=false}if(c&2)b.yj=V(this.a);if(a){b.Eo=n.wi(a.ed);
b.bm=b.Eo+10;b.yq=(b.bm-b.io)/50}c=b;break;case 105:b=new ug(a,this.N);b.Da=W(this.a);b.Tb=W(this.a);b.ke=S(this.a);c=V(this.a);if(c&2){b.mn=true;b.Bb=W(this.a)}if(c&4){b.sm=true;b.je=W(this.a);b.he=W(this.a);b.ki=W(this.a)}c=b;break;case 106:var d=new vg(b);d.ei=V(this.a);d.sj=S(this.a);d.Kh=this.R();d.Bj=S(this.a);d.Ie=this.Q();d.Nf=Bd(this.a,1);d.Zg=this.R();c=V(this.a);if(c&1)d.ci=V(this.a);if(d.Nf==3||d.Nf==4)d.o=this.gb(b);c=d;break;case 107:c=new yc(b,this.N);c.Me=S(this.a);c.sc=S(this.a);
V(this.a);c.o=this.gb(b);c=c;break;case 108:d=new wg(b);d.hh=V(this.a);d.Gj=V(this.a);d.Ph=W(this.a);d.qg=V(this.a);c=V(this.a);if(c&1){d.tm=1;d.nl=this.Q()}d.o=this.gb(b);c=d;break;case 109:b=new xg;b.jd=V(this.a);b.tf=V(this.a);b.xg=V(this.a);b.Pb=S(this.a);c=V(this.a);b.Va=[];for(d=0;d<c;++d)b.Va.push(this.hd());c=b;break;case 110:c=new yg(b,this.N);c.Me=S(this.a);c.sc=S(this.a);V(this.a);c.Xd=this.gb(b);c.Vd=this.gb(b);c=c;break;case 111:c=new zg(b);c.zg=V(this.a);V(this.a);c.o=this.gb(b);c=c;
break;case 112:c=new Ag(b,this.N);c.Uf=V(this.a);c.Ic=V(this.a);c.Dq=S(this.a);V(this.a);c.o=this.gb(b);c=c;break;case 113:d=new Bg(b);d.Zc=V(this.a);d.Cd=W(this.a);d.Sg=W(this.a);d.If=S(this.a);d.Mb=V(this.a);d.Uj=this.R();d.Xg=this.R();d.Lh=W(this.a);d.Sh=V(this.a);d.ub=this.Q();d.Jd=this.R();d.Od=this.R();d.aj=this.R();d.Li=this.R();if(d.Zc==3)d.Jh=V(this.a);c=V(this.a);if(c&1)d.eg=V(this.a);else{d.eg=1E4;if(d.Cd!=0)d.eg=d.Lh/(d.Cd/1E3)}d.$c=this.gb(b);d.Td=this.gb(b);d.Wd=this.gb(b);d.Ud=this.gb(b);
c=d;break;case 114:b=new Cg;b.Th=V(this.a);b.ub=this.Q();b.fj=V(this.a);b.de=W(this.a);b.Wj=W(this.a);c=V(this.a);b.sc=c&1?true:false;c=b;break;case 115:b=new Dg(b,this.N);V(this.a);b.Mj=W(this.a);b.Sb=W(this.a);b.Tb=W(this.a);b.fe=W(this.a);b.ub=this.Q();b.Jd=this.R();b.Od=this.R();b.mj=this.R();b.Lj=this.R();c=V(this.a);if(c&1)b.cj=true;if(c&2){b.fi=true;b.Gi=W(this.a);b.Mf=W(this.a)}if(c&4)b.jl=true;c=b;break;case 116:c=new Eg(b);c.Lo=S(this.a);V(this.a);c.o=this.gb(b);c=c;break;case 117:c=new n.Je(b);
c.Nb=this.R();V(this.a);this.Xm(c.ic,b);c=c;break;default:this.xa();return}c&&Yb(a,c)}else this.xa()};this.Xm=function(a,b){for(var c=V(this.a),d=0;d<c;++d){var e=new Fg;e.i=V(this.a);e.l=this.R();switch(e.i){case 1:e.cc=W(this.a);break;case 2:e.Qc=this.R();break;case 6:e.wf=this.Q();break;case 7:e.ai=this.hd();break;case 9:e.Rg=this.gb(b);break;case 0:case 4:case 5:case 8:case 3:default:e.dc=V(this.a);break}a.push(e)}};this.gb=function(a){if(V(this.a)){var b=new Qc(a);this.gp(b,a);return b}return null};
this.gp=function(a,b){var c=this.lb();if(c!=29)this.xa();else for(var d=this.yb;zd(this.a)>0&&this.a.La<d;){c=this.lb();if(c==30)(c=this.fp(V(this.a),b))&&Rc(a,c);else this.xa()}};this.Yp=function(){for(var a=this.yb;zd(this.a)>0&&this.a.La<a;)switch(this.lb()){case 13:var b=V(this.a),c=this.R(),d=V(this.a);if(b&4){if(b=md(this.se,c))b.qa.length>0||b.Ya.length>0?this.xa():this.lq(b,d)}else if(b&8){b=null;try{b=this.to(d)}catch(e){la(n.na,"error reading script: "+e)}if(b!=null){d=Z();Gg(d,b)}}this.xa();
break;default:this.xa()}};this.bq=function(a){a.g=this.jc();S(this.a);V(this.a);var b=V(this.a),c=V(this.a);a.wb=W(this.a);Bd(this.a,1);a.Qb=S(this.a);var d=V(this.a);if(d==0){a.bd=250;a.Yd=true}else if(d&1){a.bd=V(this.a);a.Yd=a.bd>0}a.zo(this.hp(a));a.Qa=b;a.pb=c;if(d&2){b=V(this.a);for(c=0;c<b;++c){d=new n.fn;d.Aj=V(this.a);d.Sf=V(this.a);a.vb.push(d)}}};this.hp=function(a){var b=this.pl(),c=md(this.se,b);if(c==null){c=new n.zl;c.l=b;c!=null&&this.se.Uk.push(c);c=c}if(a!=null&&c!=null){if(c.td==
null)c.td=[];c.td.push(a)}return c};this.lq=function(a,b){if(a!=null){var c=V(this.a);a.Bk=W(this.a);if(c&1)a.Yh=this.jc();c=this.yb;b=this.a.La+b;for(var d=[],e=0;zd(this.a)>0&&this.a.La<c&&this.a.La<b;){var f=this.lb();if(f==33){f=new n.op;f.l=this.R();f.wh=this.Zm();f.nh=this.Zm();a.qa.push(f);e=V(this.a);d.push(f);e>=0&&e<d.length&&d[e].Y.push(f);e=V(this.a);for(var g=0;g<e;++g)f.Wg.push(V(this.a));g=V(this.a);for(e=0;e<g;++e){var i=new n.pp;i.frame=W(this.a);i.position=this.Q();f.df.push(i)}g=
V(this.a);for(e=0;e<g;++e){i=new n.rp;i.frame=W(this.a);i.scale=this.Q();f.pe.push(i)}g=V(this.a);for(e=0;e<g;++e){i=new n.qp;i.frame=W(this.a);i.rotation=this.lp();f.hf.push(i)}g=V(this.a);for(e=0;e<g;++e){i=new n.sp;i.li=Cd(this.a,2);i.Fi=V(this.a);i.Ci=W(this.a);f.xf.push(i)}}else if(f==15){f=this.$m();f!=null&&a.sd(f)}else if(f==34){f=new n.Fh;f.l=this.R();f.ud=W(this.a);f.O=W(this.a);f.wc=W(this.a);a.Yk.push(f)}else this.xa()}try{a.Nk=-1;a.Zo=-1;b=c=0;var j,m;for(d=0;d<a.qa.length;++d){f=false;
for(c=0;c<a.qa.length;++c){m=a.qa[c];for(e=0;e<m.Y.length;++e)if(m.Y[e]===a.qa[d])f=true}f||a.gf.push(a.qa[d])}for(c=0;c<a.Ya.length;++c){d=[];a.Zj.push(d);j=a.Ya[c];var o=j.m.length;for(f=0;f<o;++f)d.push(false)}a.Ad=false;d=o=0;var p,h;for(o=0;o<a.qa.length;++o){h=a.qa[o];if(h.df.length||h.pe.length||h.hf.length||h.xf.length){a.Ad=true;break}}if(a.Ad)for(o=a.ad=0;o<a.qa.length;++o){h=a.qa[o];if(h.df.length){var x=h.df[h.df.length-1];if(x.frame>a.ad)a.ad=x.frame}if(h.pe.length){var t=h.pe[h.pe.length-
1];if(t.frame>a.ad)a.ad=t.frame}if(h.hf.length){var L=h.hf[h.hf.length-1];if(L.frame>a.ad)a.ad=L.frame}}if(a.Ad&&!a.Um){a.Um=true;for(o=0;o<a.qa.length;++o){h=a.qa[o];for(d=0;d<h.xf.length;++d){var A=h.xf[d],u=A.Fi;p=a.Ya[A.li];var H=p.m[u];A.pn=H.f.e();A.on=H.j.e()}}}nd(a,null,null);for(c=0;c<a.qa.length;++c){m=a.qa[c];for(b=0;b<m.Wg.length;++b){j=a.Ya[m.Wg[b]];j.ue=m.Pe.e()}}if(a.Ya.length==0){a.ob.C.set(0,0,0);a.ob.M.set(0,0,0)}else{j=a.Ya[0];a.ob.C=j.g.C.e();a.ob.M=j.g.M.e();for(c=1;c<a.Ya.length;++c){j=
a.Ya[c];if(j.ue==null){z(a.ob,j.g.C);z(a.ob,j.g.M)}else{var M=j.g.e();zb(j.ue,M);z(a.ob,M.C);z(a.ob,M.M)}}}}catch(J){la(n.na,"error finalizing skinned mesh: "+J)}if(a.td&&a.td.length){for(e=0;e<a.td.length;++e)(j=a.td[e])&&Hf(j,j.Qa,j.pb);a.td=null}}};this.fp=function(a,b){var c=0;switch(a){case 0:c=new Ub;c.kj=V(this.a);c.kf=V(this.a);c.ba=S(this.a);V(this.a);return c;case 1:b=new Vb;b.le=V(this.a);b.Nc=V(this.a);b.ba=S(this.a);b.ha=this.Q();if(b.le==4)b.Ki=this.Q();b.ff=S(this.a);b.Mc=V(this.a);
c=V(this.a);if(c&1){b.Ld=true;b.Rc=V(this.a)}return b;case 2:b=new Zb;b.vl=V(this.a);b.mg=V(this.a);b.ba=S(this.a);b.ha=this.Q();b.Kj=false;c=V(this.a);if(c&1){b.Kj=true;b.Hl=V(this.a)}return b;case 3:c=new dc;c.xl=V(this.a);c.ng=V(this.a);c.ba=S(this.a);c.ha=this.Q();V(this.a);return c;case 4:c=new ec;c.jd=V(this.a);c.Ub=V(this.a);c.ba=S(this.a);c.yg=this.hd();if(c.jd==1)c.Ik=V(this.a);V(this.a);return c;case 5:b=new Ic;c=V(this.a);b.Ze=(c&1)!=0;b.Eb=this.ql();b.ie=W(this.a);b.xh=W(this.a);b.Bg=
W(this.a);b.fg=S(this.a);b.Oc=V(this.a);b.gg=S(this.a);b.kl=this.Q();return b;case 6:c=new Mc;c.nn=V(this.a);return c;case 7:c=new fc;V(this.a);c.Lk=this.R();return c;case 8:c=new gc;V(this.a);c.Kl=this.R();c.fa=this.R();return c;case 9:c=new hc;c.lg=V(this.a);c.ba=S(this.a);c.Pb=S(this.a);c.tk=this.R();V(this.a);return c;case 10:c=new jc(this.N);c.jf=this.R();V(this.a);return c;case 11:c=new lc(this.N);c.Hf=V(this.a);V(this.a);return c;case 12:b=new nc;b.le=V(this.a);b.Nc=V(this.a);b.ba=S(this.a);
b.ha=this.Q();b.ff=S(this.a);b.Mc=V(this.a);c=V(this.a);if(c&1){b.Ld=true;b.Rc=V(this.a)}return b;case 13:a=new qc;a.Vh=V(this.a);a.be=V(this.a);a.Pi=W(this.a);a.mf=V(this.a);a.Sc=W(this.a);c=V(this.a);if(c&1){a.lf=V(this.a);a.Rj=S(this.a);a.Tg=this.Q()}if(c&2)a.Qg=this.gb(b);if(c&4)a.Qj=this.Q();return a;case 14:this.xa();return null;case 15:c=new Rb;V(this.a);c.Ub=V(this.a);c.ba=S(this.a);c.bb=this.R();return c;case 16:c=new Ac;V(this.a);c.Gb=this.R();c.hl=V(this.a);c.vf=V(this.a);c.Md=this.R();
return c;case 17:a=new Gc;c=V(this.a);a.Gb=this.R();a.Ri=V(this.a);a.vf=V(this.a);a.Md=this.R();a.o=this.gb(b);if(c&1)a.bi=this.gb(b);return a;case 18:c=new Hc;c.Uh=V(this.a);c.ba=S(this.a);V(this.a);return c;case 19:c=new Nc;V(this.a);c.Gb=this.R();c.qj=S(this.a);return c;case 20:c=new Tc(this.N);V(this.a);c.jf=this.R();this.Mm=true;return c;case 22:c=new Wc;c.og=V(this.a);c.xk=S(this.a);V(this.a);c.o=this.gb(b);return c;case 23:c=new Uc;c.pg=V(this.a);c.Ck=S(this.a);c.Dl=V(this.a);V(this.a);return c;
case 24:c=new Hg;c.Nb=this.R();V(this.a);this.Xm(c.ic,b);return c;case 25:a=new Zc(this.N);c=V(this.a);a.Ze=(c&1)!=0;a.Qi=V(this.a);a.Il=this.R();V(this.a);a.Oc=V(this.a);a.gg=S(this.a);a.Tk=V(this.a);a.Ii=this.gb(b);a.Hi=this.gb(b);return a;case 26:c=new Kc;V(this.a);c.Eb=this.ql();return c;default:this.xa()}return null}};function Ig(){this.i=-1}l=Ig.prototype;l.k=k("none");l.fb=k(false);l.Rd=aa();l.Ef=aa();l.pd=aa();l.De=aa();l.Be=k(false);l.Ce=k(false);l.reset=aa();l.Af=k(null);l.h=k(null);function Re(a,b){this.i=-1;this.oc=0;this.ke=false;this.Jg=true;this.ri=this.we=this.Ge=this.Ee=this.ze=this.cm=this.kk=false;this.yj=0;this.Ig=new s(0,0,0);this.fm=this.Sd=this.$l=0;this.io=20;this.bm=100;this.yq=(this.bm-this.io)/50;this.Eo=90;this.oc=q();this.oa=a;this.N=b;a&&pc(this,a.fa)}Re.prototype=new Ig;l=Re.prototype;l.k=k("camerafps");l.Xf=88;l.Sb=0.06;l.Tb=200;l.fe=0;l.ke=false;l.vj=true;function Se(a,b){a.vj=b}
function pc(a,b){if(a.oa!=null){b=b.substract(a.oa.f);b=Ja(b);a.Sd=b.c;a.fm=b.b;if(a.Sd>a.Xf)a.Sd-=360}}l=Re.prototype;
l.fb=function(a){if(this.oa==null)return false;if(this.oa.r.ga!==this.oa)return false;var b=q(),c=b-this.oc;if(c==0)return false;if(c>250)c=250;this.oc=b;var d=this.oa.f.e();if(this.vj&&(this.Ge||this.we)){var e=this.oa.f.substract(this.oa.fa);if(this.ke)e.b=0;e.normalize();this.Ge&&d.ta(w(e,this.Sb*-c));this.we&&d.ta(w(e,this.Sb*c))}if(this.vj&&(this.ze||this.Ee)){e=Ia(this.oa.f.substract(this.oa.fa),this.oa.Fb);e.normalize();if(this.ze){e=w(e,this.Sb*-c);d.ta(e);oc(this.oa,this.oa.fa.add(e))}if(this.Ee){e=
w(e,this.Sb*c);d.ta(e);oc(this.oa,this.oa.fa.add(e))}}if(this.yj!=0){e=d.substract(this.oa.f);if(xa(e)){if(this.$l!=0&&!xa(this.Ig)){e=b-this.$l;if(e>0&&e<this.yj){e=this.Ig.getLength()*(1-e/this.yj)*c;var f=this.Ig.e();f.normalize();Ca(f,e*0.5);d.ta(f)}else this.Ig.set(0,0,0)}}else{this.Ig=e;Ca(this.Ig,1/c);this.$l=b}}this.oa.f=d;d=new s(0,0,1);e=new D;vb(e,new s(this.Sd,this.fm,0));mb(e,d);e=false;if(this.N!=null)e=this.N.ui;var g=0;var i=f=2.0E-5,j=false;if(this.N!=null&&a.r!=null&&!e){j=a.r;j=
j.Ja==null||j.th==null?null:pg(j,j.Ja,this.N.fc,this.N.gc,true);j=j!=null}if(this.Jg){f*=3;i*=3}if(!j)if(e)g=this.N.gc;else if(this.kk){var m=this.N.T.Hb(),o=this.N.gc;if(m>0&&o>0&&this.N.Eh)g=Math.sin((o-m/2)/m)*100*0.5}else if(this.Jg||this.cm)if(this.N.Dh){g=this.N.gc-this.N.Ch;if(g!=0)this.N.Pk=b}g+=0;c=c;if(c>100)c=100;if(g>300)g=300;if(g<-300)g=-300;this.Sd+=g*c*this.Tb*i;if(this.Sd<-this.Xf)this.Sd=-this.Xf;if(this.Sd>this.Xf)this.Sd=this.Xf;g=0;if(!j)if(e)g=this.N.fc;else if(this.kk){b=this.N.T.Ib();
i=this.N.fc;if(b>0&&i>0&&this.N.Eh)g=Math.sin((i-b/2)/b)*100*0.5}else if(this.Jg||this.cm)if(this.N.Dh){g=this.N.fc-this.N.Bh;if(g!=0)this.N.Pk=b}g+=0;if(g>300)g=300;if(g<-300)g=-300;this.fm+=g*c*this.Tb*f;if(e||this.Jg||this.cm)Xe(this.N);if(this.vj&&this.ri)(a=N(a,"collisionresponse"))&&!a.ce&&Jg(a,this.fe);oc(this.oa,this.oa.f.add(d));return false};l.Rd=function(a){Ig.prototype.Rd.call(this,a)};l.Ef=aa();l.pd=function(a){Ig.prototype.pd.call(this,a)};
l.De=function(a){Ig.prototype.De.call(this,a)};l.yi=function(a,b){if(b==37||b==65){if(this.ze=a)this.Ee=false;return true}if(b==39||b==68){if(this.Ee=a)this.ze=false;return true}if(b==38||b==87){if(this.Ge=a)this.we=false;return true}if(b==40||b==83){if(this.we=a)this.Ge=false;return true}if(b==32){this.ri=a;return true}return false};l.Be=function(a){return this.yi(true,a.keyCode)};l.Ce=function(a){return this.yi(false,a.keyCode)};function ug(a,b){this.i=-1;this.Tb=1E4;this.Da=100;this.ke=false;this.oc=q();this.oa=a;this.N=b;this.mn=false;this.Id=this.Hd=this.Bb=0;this.sm=false;this.ki=this.he=this.je=0;this.Ac=90;this.bl=-66666}ug.prototype=new Ig;l=ug.prototype;l.k=k("cameramodelviewer");l.Tb=0.06;l.Da=100;l.ke=false;
l.fb=function(){if(this.oa==null)return false;if(this.oa.r.ga!==this.oa)return false;var a=q(),b=a-this.oc;if(b>250)b=250;this.oc=a;a=this.oa.f.e();var c=this.oa.fa.e(),d=c.substract(O(this.oa)),e=0,f=0;if(this.N.Dh){e=(this.N.fc-this.N.Bh)*this.Tb/5E4;f=(this.N.gc-this.N.Ch)*this.Tb/5E4}if(this.mn&&this.Bb!=0){if(n.pa(e)){e=this.Hd;this.Hd*=0.9;if(this.Hd>0)this.Hd=Math.max(0,this.Hd-b/this.Bb);else if(this.Hd<0)this.Hd=Math.min(0,this.Hd+b/this.Bb)}else this.Hd=e*(this.Bb/1E3);if(n.pa(f)){f=this.Id;
this.Id*=0.9;if(this.Id>0)this.Id=Math.max(0,this.Id-b/this.Bb);else if(this.Id<0)this.Id=Math.min(0,this.Id+b/this.Bb)}else this.Id=f*(this.Bb/1E3)}d=Ia(d,this.oa.Fb);d.b=0;d.normalize();if(!n.pa(e)){Ca(d,b*e);a.ta(d)}if(!this.ke&&!n.pa(f)){e=this.oa.Fb.e();e.normalize();b=a.add(w(e,b*f));f=b.e();f.b=c.b;e=this.Da/10;if(f.tb(c)>e)a=b}if(this.ke){if(n.D(this.bl,-66666))this.bl=a.b;a.b=this.bl}Xe(this.N);if(this.sm){b=n.wi(this.oa.ed);if(this.Ac<this.je)this.Ac=this.je;if(this.Ac>this.he)this.Ac=this.he;
f=this.ki;f=Math.abs(this.Ac-b)/8;if(f<this.ki)f=this.ki;if(b<this.he-f&&b<this.Ac){b+=f;if(b>this.he)b=this.he}if(b>this.je+f&&b>this.Ac){b-=f;if(b<this.je)b=this.je}gf(this.oa,n.Mn(b))}d=a.substract(c);va(d,this.Da);a=c.add(d);this.oa.f=a;return false};l.Ef=function(a){this.Ac+=a*this.ki;if(this.Ac<this.je)this.Ac=this.je;if(this.Ac>this.he)this.Ac=this.he};function vg(a){this.ei=5E3;this.sj=this.Jk=this.tn=false;this.Bj=true;this.ci=0;this.Sk=true;this.Nf=Kg;this.Tj=false;this.Bd=a;this.Ka=0;this.tn=false;this.Ed=this.oj=null;this.Tj=false;this.Kh=null;this.ci=0;this.Zg=this.Ie=null;this.Jm=0;this.En=false}vg.prototype=new Ig;var Kg=0;vg.prototype.k=k("followpath");
vg.prototype.h=function(a,b,c,d){a=new vg;a.ei=this.ei;a.sj=this.sj;a.Bj=this.Bj;a.Kh=this.Kh;a.ci=this.ci;a.Ie=this.Ie?this.Ie.e():null;a.Nf=this.Nf;a.Zg=this.Zg;a.o=this.o?this.o.h(c,d):null;return a};
vg.prototype.fb=function(a,b){if(a==null||!this.Bd||!this.ei)return false;if(a!==this.oj){if(this.oj=a)this.Jk=this.oj.k()=="camera";return false}if(!this.Ed)if(!this.tn)if(this.Kh.length)if(this.Bd){var c=cg(this.Bd,this.Kh);c&&c.k()=="path"&&Lg(this,c)}if(this.Ed==null)return false;c=false;var d=null;if(this.Jk&&this.Bj){c=!this.Sk;d=a;if(this.Bd.ga!==d){if(this.Ed.zb.length)d.f=vf(this.Ed,0);this.Sk=true;return false}else this.Sk=false;if(!this.Ka||!c)this.Ka=b}if(!this.Ka)this.Ka=this.Bd.Ka;d=
(b-this.Ka+this.ci)/this.ei;if(d>1&&!this.Ed.Re)switch(this.Nf){case Kg:d%=1;break;case 1:d=1;break;case 2:d=1;if(!this.Tj){if(this.Bd)if(this.Zg.length)if((c=cg(this.Bd,this.Zg))&&c.k()=="camera"){(b=this.Bd.th)&&Oe(c,b.Ib(),b.Hb());this.Bd.ga=c}this.Tj=true}break;case 3:if(d>this.Jm+1&&this.o!=null){this.o.execute(a);this.Jm=d}d%=1;break;case 4:d=1;if(!this.En&&this.o!=null){this.o.execute(a);this.En=true}break}else this.Tj=false;b=xf(this.Ed,d);c=!b.D(a.f);a.f=b;if(this.sj&&this.Ed.zb.length){d=
xf(this.Ed,d+0.0010);if(!n.pa(d.tb(b))){var e=d.substract(b);va(e,100);if(this.Jk){d=a;a=b.add(e);c=c||!a.D(d.fa);oc(d,a)}else{if(!this.Ie||xa(this.Ie))d=Ja(e);else{d=new D;vb(d,Ja(e));b=new D;vb(b,this.Ie);d=E(d,b);d=wb(d)}c=c||!d.D(a.S);a.S=d}}}return c};function Lg(a,b){a.Ed=b}vg.prototype.Af=function(a){if(this.o)return Sc(this.o,a);return null};function Wb(a,b,c,d,e,f){this.Z=new s(0,0,0);this.O=new s(40,40,40);this.Ka=q();this.kd=3E3;this.rn=this.Ug=this.eh=this.Pb=false;this.kn=null;this.jn=0;this.Gf=this.$i=false;this.ih=0;if(a)this.Z=a.e();if(b)this.O=b.e();if(c)this.kd=c;if(d)this.Pb=d;Xb(this);if(e)this.eh=e;if(f)this.Ug=f}Wb.prototype=new Ig;Wb.prototype.k=k("flystraight");
Wb.prototype.h=function(a,b,c,d){a=new Wb;a.Z=this.Z.e();a.O=this.O.e();a.ha=this.ha.e();a.Jl=this.Jl;a.El=this.El;a.kd=this.kd;a.Pb=this.Pb;a.Ug=this.Ug;a.$i=this.$i;a.Gf=this.Gf?this.Gf.h(c,d):null;a.ih=this.ih;return a};
Wb.prototype.fb=function(a,b){var c=b-this.Ka,d=false;if(c!=0){var e=this.Z.e();if(!this.Pb&&c>=this.kd){e=this.O.e();d=true}else e.ta(w(this.ha,c%this.kd*this.El));if(this.Ug){if(a.k()=="camera"){oc(a,e);var f=N(a,"camerafps");f!=null&&pc(f,e)}}else a.f=e;if(this.rn&&this.Ka!=b){if(a){P(a);b=bf(a);e=false;f=rc(a.r,"gameai");for(var g=0;g<f.length;++g)if(f[g]!==this.kn){var i=N(f[g],"gameai");if(!(i&&!(i.Mb>0)))if(Va(b,bf(f[g]))){wc(i,this.jn,f[g]);e=true;break}}b=e}else b=false;d=b||d}if(d){if(a.r)a.r.Ok=
a.f.e();if(this.Gf){d=true;if(this.ih>0&&c>this.ih)d=false;d&&this.Gf.execute(a)}this.eh&&df(a,this);this.$i&&a.r&&Vc(a.r,a,0)}return true}return false};function Xb(a){a.ha=a.O.substract(a.Z);a.Jl=a.ha.getLength();a.ha.normalize();a.El=a.Jl/a.kd};function sg(a,b,c,d){this.$g=new s;this.Ta=new s(0,1,0);this.gi=new s;this.ve=new s;this.Ka=q();this.Xh=0.01;this.Da=100;if(a)this.$g=a.e();if(b)this.Da=b;if(c)this.Ta=c.e();if(d)this.Xh=d;this.db()}sg.prototype=new Ig;sg.prototype.k=k("flycircle");sg.prototype.h=function(){var a=new sg;a.$g=this.$g.e();a.Ta=this.Ta.e();a.gi=this.gi.e();a.ve=this.ve.e();a.Xh=this.Xh;a.Da=this.Da;return a};
sg.prototype.fb=function(a,b){b=b-this.Ka;if(b!=0){b=b*this.Xh;b=w(this.gi,Math.cos(b)).add(w(this.ve,Math.sin(b)));Ca(b,this.Da);a.f=this.$g.add(b);return true}return false};sg.prototype.db=function(){this.Ta.normalize();this.ve=this.Ta.b!=0?new s(50,0,0):new s(0,50,0);this.ve=Ia(this.ve,this.Ta);this.ve.normalize();this.gi=Ia(this.ve,this.Ta);this.gi.normalize()};function $b(a){this.oe=new s;if(a)this.oe=a.e();this.Ka=q();this.dn=false;this.ul=0;this.um=null}$b.prototype=new Ig;$b.prototype.k=k("rotation");$b.prototype.h=function(){var a=new $b(this.sa,this.Oa);a.oe=this.oe.e();a.Ka=this.Ka;return a};
$b.prototype.fb=function(a,b){var c=b-this.Ka;if(this.dn){if(this.ul-this.Ka==0)return false;b=(b-this.Ka)/(this.ul-this.Ka);if(b>1){a.S=this.oe.e();df(a,this)}else{c=new Ab;var d=w(this.oe,n.yd);Fb(c,d.c,d.b,d.d);var e=new Ab;d=w(this.um,n.yd);Fb(e,d.c,d.b,d.d);Cb(e,e,c,b);d=new s;Eb(e,d);Ca(d,n.me);a.S=d;return true}}else if(c!=0){a.S.ta(w(this.oe,c/10));this.Ka=b;return true}return false};function xg(a,b,c){this.Va=[];this.Pb=true;this.tf=20;this.Xk=this.xg=this.jd=0;if(a)this.Va=a;if(b)this.tf=b;if(c==true)this.loop=false}xg.prototype=new Ig;xg.prototype.k=k("animatetexture");xg.prototype.h=function(){var a=new xg;a.Va=this.Va;a.Pb=this.Pb;a.tf=this.tf;a.jd=this.jd;a.xg=this.xg;return a};
xg.prototype.fb=function(a,b){if(a==null||this.Va==null)return false;var c=false,d=null;if(this.Va.length){var e=this.Xk==0?a.r.Ka:this.Xk;d=b-e;var f=e+this.tf*this.Va.length;e=0;e=!this.Pb&&b>=f?this.Va.length-1:this.tf>0?Math.floor(d/this.tf%this.Va.length):0;if(e<this.Va.length)if(this.jd==1){if(this.xg>=0&&this.xg<a.Wc())if((d=a.nc(this.xg))&&d.ab!==this.Va[e]){d.ab=this.Va[e];c=true}}else{b=a.Wc();for(f=0;f<b;++f)if((d=a.nc(f))&&d.ab!==this.Va[e]){d.ab=this.Va[e];c=true}}}return c};
xg.prototype.reset=function(){this.Xk=q()};function yc(a,b,c,d){this.Oa=b;this.yp=0;this.np=false;this.Eq=null;this.sa=a;this.mh=c;this.Ue=false;this.Me=true;this.sc=false;this.te=this.ja=this.o=null;d!=true&&eg(a,this)}yc.prototype=new Ig;l=yc.prototype;l.k=k("onclick");l.h=function(a,b,c,d){a=new yc(this.sa,this.Oa);a.Me=this.Me;a.sc=this.sc;a.o=this.o?this.o.h(c,d):null;a.ja=this.ja;return a};l.fb=function(a){this.te=a;a=this.Ue;this.Ue=false;return a};
l.pd=function(a){var b=this.te;if(!b)return false;if(b.r!==this.sa)return false;if(q()-this.Oa.Pk<250)return false;var c=Ve(this.Oa,a);a=We(this.Oa,a);if(this.Oa.ui){a=this.sa.th;if(!a)return false;c=a.Ib()/2;a=a.Hb()/2}if(this.te.sb==null){this.te=null;return false}if(ef(b)&&Mg(this,b,c,a)){this.Ue=true;this.mh&&this.mh();this.jk(b);Ge(this.sa);return true}};l.jk=function(a){this.o&&this.o.execute(a)};
function Mg(a,b,c,d){if(b==null)return false;if(b.k()=="2doverlay"){var e=Cf(b,false,a.Oa.T);if(e.x<=c&&e.y<=d&&e.x+e.Sa>=c&&e.y+e.Pa>=d)return true}c=Ye(a.Oa,c,d);if(c==null)return false;d=a.sa.ga;if(d==null)return false;d=O(d);e=new Ma;e.Z=d;e.O=c;return zc(a,a.sa,b,e,a.Me,a.sc,a.ja,null)}function xc(a,b,c,d,e,f){if(!e||!b)return 999999999999;if(a=e.Eg(c,d,true,null,f))return c.tb(a);return 999999999999}
function zc(a,b,c,d,e,f,g,i){var j=c.kb(),m=0;m=new D(false);if(pb(c.aa,m))if(Ua(j,lb(m,d.Z),lb(m,d.O))){m=null;if(c.Qp&&c.V)m=c;e=m==null||e;if(!e){j=m.$a;if(j==null){j=m.V&&ld(m.V)>100?new mg(m.V,m,0):new ng(m.V,m);m.$a=j}if(j){j=j.Eg(d.Z,d.O,true,null,true);if(j!=null)if(f){m=xc(a,b,d.Z,j,g,true);a=j.tb(d.Z);if(m+n.wp<a)return false;else{if(i!=null)i.Ha=j.tb(d.Z);return true}}else{if(i!=null)i.Ha=d.Z.tb(Ra(bf(c)));return true}}else e=true}if(e)if(f){d=d.Z.e();j=bf(c);m=Sa(j);Ca(m,0.5);f=n.Wp(m.c,
m.b,m.d);f=Math.sqrt(f*f+f*f);c=Ra(bf(c));m=xc(a,b,d,c,g,true);a=c.tb(d)-f;if(m<a)return false;else{if(i!=null)i.Ha=a;return true}}else{if(i!=null)i.Ha=d.Z.tb(Ra(bf(c)));return true}}return false}yc.prototype.Af=function(a){if(this.o)return Sc(this.o,a);return null};function yg(a,b){this.Oa=b;this.sa=a;this.Xd=this.Vd=null;this.Ol=this.Fl=0}yg.prototype=new yc(null,null,null,true);yg.prototype.k=k("onmove");yg.prototype.h=function(a,b,c,d){a=new yg(this.sa,this.Oa);a.Me=this.Me;a.sc=this.sc;a.o=this.o?this.o.h(c,d):null;a.ja=this.ja;a.Vd=this.Vd?this.Vd.h(c,d):null;a.Xd=this.Xd?this.Xd.h(c,d):null;return a};
yg.prototype.fb=function(a){var b=this.Fl==0,c=q();if(b||c-this.Fl>100){this.Fl=c;c=Mg(this,a,this.Oa.fc,this.Oa.gc);if(b)this.Ol=c;else if(c!=this.Ol){if((this.Ol=c)&&this.Vd)this.Vd.execute(a);else!c&&this.Xd&&this.Xd.execute(a);return true}}return false};yg.prototype.Af=function(a){var b=null;if(this.Xd)if(b=Sc(this.Xd,a))return b;if(this.Vd)if(b=Sc(this.Vd,a))return b;return null};function wg(a,b,c,d,e){this.yp=0;this.mk=a;this.Ph=this.tm=this.Gj=this.hh=0;this.nl=null;this.qg=0;this.o=null;this.mh=d;if(b)this.Ph=b;if(c)this.qg=c;if(e)this.hh=1;this.Kk=false}wg.prototype=new Ig;l=wg.prototype;l.k=k("oncollide");l.h=function(a,b,c,d){a=new wg(this.mk);a.hh=this.hh;a.Gj=this.Gj;a.Ph=this.Ph;a.qg=this.qg;a.o=this.o?this.o.h(c,d):null;return a};
l.fb=function(a){if(a==null||this.mk==null)return false;var b=false,c=null;if(this.Gj==0)c=this.mk.ga;else if(this.qg!=-1)c=G(this.mk,this.qg);if(c){if(a===c)return false;var d=O(c),e=O(a),f=false;switch(this.tm){case 0:f=d.tb(e)<this.Ph;break;case 1:e=new D(false);if(pb(a.aa,e)){d=d.e();mb(e,d);f=new y;f.C=w(this.nl,-0.5);f.M=w(this.nl,0.5);f=f.Hg(d)}}switch(this.hh){case 0:if(f&&!this.Kk){this.jk(c,a);b=true}break;case 1:if(!f&&this.Kk){this.jk(c,a);b=true}break}this.Kk=f}return b};
l.jk=function(a,b){this.mh&&this.mh.call(a,b);this.o&&this.o.execute(a)};l.Af=function(a){if(this.o)return Sc(this.o,a);return null};function tg(a,b,c,d){this.Da=a;this.Ji=true;this.uf=b;this.ja=c;this.Bb=d;this.vn=false;this.Te=this.wa=null;this.ge=new s(0,0,0);this.ce=false;this.Se=this.Dm=0;this.Yj=false;if(this.Da==null)this.Da=new s(30,50,30);if(this.uf==null)this.uf=new s(0,0,0);if(this.Bb==null)this.Bb=5.0E-4;this.reset()}tg.prototype=new Ig;l=tg.prototype;l.k=k("collisionresponse");l.h=function(){var a=new tg;a.Da=this.Da.e();a.Ji=this.Ji;a.uf=this.uf.e();a.ge=this.ge.e();a.Yj=this.Yj;a.ja=this.ja;return a};
l.reset=function(){this.wa=null;this.Te=q()};l.Yc=ca("ja");
l.fb=function(a,b){var c=b-this.Te;if(!this.ja)return false;if(c>150)c=150;if(c==0)return false;this.Te=b;if(this.wa!==a){this.wa=a;this.ge=a.f.e()}var d=a.f.e(),e=a.f.substract(this.ge),f=new s(0,-0.1*a.r.zd,0);if(!this.Ji)f.b=0;d=w(f,c);if(this.ce){f=(b-this.Dm)/1E3;if(f>5)f=5;Ca(d,f)}else Ca(d,0.0010);if(this.Se>0){e.b+=this.Se*0.0010*c;this.Se-=c;if(this.Se<0)this.Se=0}c=e.add(d);if(!xa(c)){if(!this.vn)this.Bb=this.Da.getLength()*1.0E-6;c=null;if(a&&a.k()=="camera")c=a;var g;if(c)g=c.fa.substract(c.f);
f=new C;var i={};i.Ha=0;this.ja.zi(a);var j=this.ja,m=this.ge.substract(this.uf),o=this.Da,p=this.Bb;if(!j||o.c==0||o.b==0||o.d==0)d=m;else{var h={};h.Nh=m.e();h.ml=e.e();h.mc=o.e();h.si=9.99999999E7;h.oq=j;h.pq=p;h.ok=0;h.pi=new s;j=Ha(h.Nh,h.mc);e=Ha(h.ml,h.mc);j=Ng(this,0,h,j,e);i.Ha=0;if(!xa(d)){h.Nh=Fa(j,h.mc);h.ml=d.e();h.ok=0;e=Ha(d,h.mc);j=Ng(this,0,h,j,e);i.Ha=h.ok==0?1:0;if(i.Ha<0.5&&h.qi){d=fb(h.qi);d.normalize();if(!(Math.abs(d.b)>Math.abs(d.c)&&Math.abs(d.b)>Math.abs(d.d)))i.Ha=1}}if(h.ok&&
f!=null){f.U=h.qi.U.e();f.ca=h.qi.ca.e();f.da=h.qi.da.e();Ea(f.U,h.mc);Ea(f.ca,h.mc);Ea(f.da,h.mc)}Ea(j,h.mc);d=j}this.ja.zi(null);d.ta(this.uf);if(i.Ha<0.5)this.ce=false;else{if(!this.ce)this.Dm=b;this.ce=true}if(a.f.D(d)){this.ge=a.f.e();return false}a.f=d.e();if(this.Yj)if(!this.ce)if(!(xa(f.U)&&xa(f.ca)&&xa(f.da))){b=a.S.b;d=f.U.add(f.ca).add(f.da);Ca(d,1/3);f.U.c-=d.c;f.U.d-=d.d;f.ca.c-=d.c;f.ca.d-=d.d;f.da.c-=d.c;f.da.d-=d.d;Ka(f.U,b);Ka(f.ca,b);Ka(f.da,b);f.U.c+=d.c;f.U.d+=d.d;f.ca.c+=d.c;
f.ca.d+=d.d;f.da.c+=d.c;f.da.d+=d.d;b=fb(f);f=new s;f.c=Math.atan2(b.d,b.b)*n.me;f.b=a.S.b;f.d=-Math.atan2(b.c,b.b)*n.me;a.S=f}if(c&&g){b=true;for(f=0;f<a.ia.length;++f)if((d=a.ia[f])&&d.k()=="cameramodelviewer"){b=false;break}if(b)c.fa=a.f.add(g)}}this.ge.D(a.f);this.ge=a.f.e();return false};
function Ng(a,b,c,d,e){var f=c.pq;if(b>5){a=e.e();va(a,f);return d.add(a)}c.pk=e.e();c.lo=e.e();c.lo.normalize();c.ak=d.e();c.Rl=false;c.si=9.99999999E7;var g=new y;c.Nh.Ba(g.C);c.Nh.Ba(g.M);z(g,c.Nh.add(c.ml));ta(g.C,c.mc);g.M.ta(c.mc);var i=[],j=new D,m=1/c.mc.b,o=1/c.mc.d;j.p=1/c.mc.c;j.q=m;j.n=o;j.Ma=false;c.oq.Gg(g,j,i);for(g=0;g<i.length;++g)a:{j=i[g];var p=db(j);if(cb(p,c.lo)){var h=m=0,x=false,t=0;m=p.tb(c.ak);o=p.j.ka(c.pk);if(n.pa(o))if(Math.abs(m)>=1)break a;else{x=true;h=0}else{o=1/o;
h=(-1-m)*o;m=(1-m)*o;if(h>m){o=m;m=h;h=o}if(h>1||m<0)break a;h=n.lc(h,0,1);n.lc(m,0,1)}m=new s;o=false;var L=1;if(!x){p=c.ak.substract(p.j).add(w(c.pk,h));t=j.ca.substract(j.U);var A=j.da.substract(j.U);x=t.ka(t);var u=t.ka(A),H=A.ka(A),M=p.substract(j.U);t=M.ka(t);M=M.ka(A);A=t*H-M*u;t=M*x-t*u;if(A+t-(x*H-u*u)<0&&!(A<0||t<0)){o=true;L=h;m=p.e()}}if(!o){h=c.pk.e();p=c.ak.e();x=za(h);var J=A=t=0;u={};u.Ha=0;t=x;A=2*h.ka(p.substract(j.U));J=za(j.U.substract(p))-1;if(Og(a,t,A,J,L,u)){L=u.Ha;o=true;m=
j.U.e()}if(!o){A=2*h.ka(p.substract(j.ca));J=za(j.ca.substract(p))-1;if(Og(a,t,A,J,L,u)){L=u.Ha;o=true;m=j.ca.e()}}if(!o){A=2*h.ka(p.substract(j.da));J=za(j.da.substract(p))-1;if(Og(a,t,A,J,L,u)){L=u.Ha;o=true;m=j.da.e()}}H=j.ca.substract(j.U);J=j.U.substract(p);M=za(H);var X=H.ka(h),da=H.ka(J);t=M*-x+X*X;A=M*2*h.ka(J)-2*X*da;J=M*(1-za(J))+da*da;if(Og(a,t,A,J,L,u)){t=(X*u.Ha-da)/M;if(t>=0&&t<=1){L=u.Ha;o=true;m=j.U.add(w(H,t))}}H=j.da.substract(j.ca);J=j.ca.substract(p);M=za(H);X=H.ka(h);da=H.ka(J);
t=M*-x+X*X;A=M*2*h.ka(J)-2*X*da;J=M*(1-za(J))+da*da;if(Og(a,t,A,J,L,u)){t=(X*u.Ha-da)/M;if(t>=0&&t<=1){L=u.Ha;o=true;m=j.ca.add(w(H,t))}}H=j.U.substract(j.da);J=j.da.substract(p);M=za(H);X=H.ka(h);da=H.ka(J);t=M*-x+X*X;A=M*2*h.ka(J)-2*X*da;J=M*(1-za(J))+da*da;if(Og(a,t,A,J,L,u)){t=(X*u.Ha-da)/M;if(t>=0&&t<=1){L=u.Ha;o=true;m=j.da.add(w(H,t))}}}if(o){o=L*c.pk.getLength();if(!c.Rl||o<c.si){c.si=o;c.pi=m.e();c.Rl=true;c.qi=j;++c.ok}}}}if(!c.Rl)return d.add(e);i=d.add(e);d=d.e();if(c.si>=f){e=e.e();va(e,
c.si-f);d=c.ak.add(e);e.normalize();ta(c.pi,w(e,f))}e=c.pi.e();g=d.substract(c.pi);g.normalize();j=new Wa;j.j=g.e();ab(j,e);e=i.substract(w(g,j.tb(i))).substract(c.pi);if(e.getLength()<f)return d;return Ng(a,b+1,c,d,e)}function Og(a,b,c,d,e,f){a=c*c-4*b*d;if(a<0)return false;d=Math.sqrt(a);a=(-c-d)/(2*b);b=(-c+d)/(2*b);if(a>b){c=b;b=a;a=c}if(a>0&&a<e){f.Ha=a;return true}if(b>0&&b<e){f.Ha=b;return true}return false}function Jg(a,b){if(a.Se==0)a.Se=b*100};function zg(a){this.di=0;this.sa=a;this.o=null;this.zg=0;this.di=q()}zg.prototype=new Ig;zg.prototype.k=k("timer");zg.prototype.h=function(a,b,c,d){a=new zg(this.sa);a.o=this.o?this.o.h(c,d):null;a.di=this.di;a.zg=this.zg;return a};zg.prototype.fb=function(a){if(a==null)return false;if(this.zg>0){var b=q();if(b-this.di>this.zg){this.di=b;this.o&&this.o.execute(a);return true}}return false};
function Ag(a,b){this.sa=a;this.za=b;this.o=null;this.zg=0;this.Dd=null;this.Ue=false;this!=null&&b.hg.push(this);this!=null&&b.Ij.push(this);eg(a,this)}Ag.prototype=new Ig;l=Ag.prototype;l.k=k("keypress");l.h=function(a,b,c,d){a=new Ag(this.sa,this.za);a.Uf=this.Uf;a.Ic=this.Ic;a.o=this.o?this.o.h(c,d):null;return a};l.fb=function(a){this.Dd=a;a=this.Ue;this.Ue=false;return a};l.Be=function(a){if(this.Uf==0&&a.keyCode==this.Ic){Pg(this);return true}return false};
l.Ce=function(a){if(this.Uf==1&&a.keyCode==this.Ic){Pg(this);return true}return false};l.pd=function(a){if(this.Uf==1)if(a.button>1&&this.Ic==2)Pg(this);else a.button<=1&&this.Ic==1&&Pg(this)};l.Rd=function(a){if(this.Uf==0)if(a.button>1&&this.Ic==2)Pg(this);else a.button<=1&&this.Ic==1&&Pg(this)};l.Af=function(a){if(this.o)return Sc(this.o,a);return null};
function Pg(a){if(a.Dd&&a.Dd.r===a.sa&&ef(a.Dd)&&oe(a.za)===a.Dd.r){if(a.Dd.sb==null&&a.Dd.i!=-1){a.Dd=null;return}a.Ue=true;a.o&&a.o.execute(a.Dd);Ge(a.sa);return true}return null}
function Bg(a){this.Sg=this.Cd=this.Zc=0;this.If=false;this.Mb=100;this.eg=3E3;this.Jh=-1;this.Xg=this.Uj="";this.Lh=100;this.Sh=0;this.ub=new s;this.Li=this.aj=this.Od=this.Jd="";this.Ud=this.Wd=this.Td=this.$c=null;this.Qk=this.al=this.Gc=0;this.Kf=null;this.Oi=this.Ne=this.xd=this.ah=0;this.Uo=null;this.yk=this.qm=this.uk=false;this.zk=new Ma;this.zj=0;this.te=this.ja=null;this.sf=a;this.Lm=0;this.Bl=new s;this.Zk=null;this.$k=0}Bg.prototype=new Ig;Bg.prototype.k=k("gameai");
Bg.prototype.h=function(a,b,c,d){a=new Bg(this.sf);a.Zc=this.Zc;a.Cd=this.Cd;a.Sg=this.Sg;a.If=this.If;a.Mb=this.Mb;a.Uj=this.Uj;a.Xg=this.Xg;a.Lh=this.Lh;a.Sh=this.Sh;a.Jh=this.Jh;a.eg=this.eg;a.ub=this.ub?this.ub.e():null;a.Jd=this.Jd;a.Od=this.Od;a.aj=this.aj;a.Li=this.Li;a.$c=this.$c?this.$c.h(c,d):null;a.Td=this.Td?this.Td.h(c,d):null;a.Wd=this.Wd?this.Wd.h(c,d):null;a.Ud=this.Ud?this.Ud.h(c,d):null;return a};
Bg.prototype.fb=function(a,b){if(a==null||this.sf==null)return false;var c=b-this.Lm;if(c>150)c=150;this.Lm=b;var d=0,e=false;if(this.te!==a){this.te=a;P(a);this.Bl=O(a)}var f=O(a);if(this.Gc!=3)if(this.Gc==1){d=Qg(this,a);if(this.Kf.substract(f).getLength()<d){this.Gc=0;this.Wb(a,0);e=true}else{e=false;if(this.xd>2){d=this.xd*(this.Cd/1E3);if(this.Oi.substract(f).getLength()*1.2<d){this.Gc=0;this.Wb(a,0);e=true}}if(!e){this.xd+=c;e=this.Kf.substract(f);va(e,this.Cd/1E3*c);if(!this.If)e.b=0;a.f.ta(e)}e=
Rg(this,a,b-this.ah,this.Kf.substract(f),this.Sh)}}else if(this.Gc==2){this.xd+=c;if(!this.uk&&this.xd>this.Ne/2){this.yk=true;this.$c&&this.$c.execute(a);this.yk=false;e=this.uk=true}if(this.xd>this.Ne)this.Gc=0;else e=Rg(this,a,b-this.ah,this.Kf.substract(f),Math.min(this.Sh,this.Ne))}else if(this.Gc==0)if(this.Zc==1||this.Zc==2||this.Zc==3){if(this.Sg<=0||!this.te||this.Xg.length==0||!this.sf)c=null;else if(!this.al||b>this.al){this.$k=this.Sg;this.Zk=null;Sg(this,this.sf.Ja,f,this.Xg);this.al=
b+500+Math.random()*1E3;c=this.Zk}else c=null;if(c!=null){e=1E3;if(this.$c)if(d=Sc(this.$c,"Shoot"))e=d.Sc;d=e;!this.qm&&this.Td&&this.Td.execute(a);e=this.qm=true;if(O(c).tb(f)<d)if(!c||!a?false:Tg(this,Ra(bf(c)),Ra(bf(a)))){this.zk.Z=Ra(bf(a));this.zk.O=Ra(bf(c));Ug(this,a,c,O(c),f,b)}else Vg(this,a,O(c),f,b);else Vg(this,a,O(c),f,b)}else if(this.Zc==2||this.Zc==3)if(!this.Qk||b>this.Qk+this.eg){d=Qg(this,a);c=null;if(this.Zc==3){var g=null;if(this.Jh!=-1&&this.sf!=null)g=G(this.sf,this.Jh);if(g!=
null&&g.k()=="path"){if(this.zj>=g.zb.length)this.zj=0;c=vf(g,this.zj)}++this.zj}else{c=this.Lh;this.Qk=b;c=new s((Math.random()-0.5)*c,(Math.random()-0.5)*c,(Math.random()-0.5)*c);c.ta(this.Bl);if(!this.If)c.b=this.Bl.b}if(!(c.substract(f).getLength()<d)){Vg(this,a,c,f,b);e=true}}}return e};
function Rg(a,b,c,d,e){if(!b)return false;if(b.k()=="camera")return false;if(!a.If)d.b=0;var f=new D;vb(f,Ja(d));d=new D;vb(d,a.ub);f=E(f,d);a=wb(f);f=b.S.e();c=Math.min(c,e)/e;c=n.lc(c,0,1);Ca(a,n.yd);Ca(f,n.yd);e=new Ab;Fb(e,a.c,a.b,a.d);d=new Ab;Fb(d,f.c,f.b,f.d);Cb(d,d,e,c);Eb(d,a);Ca(a,n.me);if(b.S.D(a))return false;b.S=a;return true}function Vg(a,b,c,d,e){a.Gc=1;a.Kf=c;a.ah=e;a.Oi=d;a.xd=0;a.Ne=0;a.Wb(b,1)}
function Ug(a,b,c,d,e,f){a.Gc=2;a.Kf=d;a.ah=f;a.Uo=c;a.Oi=e;a.xd=0;a.Ne=500;a.uk=false;b=a.Wb(b,2);if(b!=0)a.Ne=b}function Tg(a,b,c){if(!a.ja||!a.sf)return true;if(a.ja.Eg(b,c,true,null,true)!=null)return false;return true}function Sg(a,b,c,d){if(b&&b.X){var e=false,f=c.tb(O(b));if(f<a.$k){var g=N(b,"gameai");if(g&&d!=""&&g!==a&&g.Mb>0)e=g.Uj.indexOf(d)!=-1}if(e){a.$k=f;a.Zk=b}for(e=0;e<b.Y.length;++e)Sg(a,b.Y[e],c,d)}}function Qg(a,b){if(b!=null)return 10;a=Sa(bf(b));a.b=0;return a.getLength()}
Bg.prototype.Vl=function(a){switch(a){case 0:return this.Jd;case 1:return this.Od;case 2:return this.Li;case 3:return this.aj}return""};Bg.prototype.Wb=function(a,b){if(!a||a.k()!="animatedmesh")return 0;var c=a.Fa;if(!c)return 0;if(c=rd(c,this.Vl(b))){Hf(a,c.ud,c.O);c.wc!=0&&If(a,c.wc);a.Qb=b==1||b==0;return(c.O-c.ud)*c.wc*1E3}else{Hf(a,1,1);a.Qb=false}return 0};
function wc(a,b,c){if(c)if(a.Mb!=0){a.Mb-=b;if(a.Mb<0)a.Mb=0;if(a.Mb==0){a.Ud!=null&&a.Ud.execute(c);b=O(c);a.Gc=3;a.ah=0;a.Oi=b;a.xd=0;a.Ne=500;a.Wb(c,3)}else a.Wd!=null&&a.Wd.execute(c)}}Bg.prototype.Af=function(a){var b=null;if(this.$c)if(b=Sc(this.$c,a))return b;if(this.Td)if(b=Sc(this.Td,a))return b;if(this.Wd)if(b=Sc(this.Wd,a))return b;if(this.Ud)if(b=Sc(this.Ud,a))return b;return null};n.Po=[];function Bc(){this.Qc=this.l="";this.cc=this.dc=this.Yb=0}
function Sb(a,b,c){if(a==null)return null;for(var d=a.toLowerCase(),e=n.Po,f=0;f<e.length;++f){var g=e[f];if(g!=null&&g.getName().toLowerCase()==d)return g}f=Wg(a,c);if(f==null)c=null;else{c=new Bc;c.im(a);Ec(c,0);d=f.Ae;if(f.Tc=="health"&&d!=null){d=N(d,"gameai");d!=null&&Ec(c,d.Mb)}else if(f.Tc=="movementspeed"&&d!=null){f=N(d,"gameai");g=N(d,"keyboardcontrolled");if(d=N(d,"camerafps"))Dc(c,d.Sb);else if(g)Dc(c,g.Sb);else f&&Dc(c,f.Cd)}else if(f.Tc=="damage"&&d!=null)(d=af(d,"Shoot"))&&Ec(c,d.be);
else if(f.Tc=="colsmalldistance"&&d!=null){d=N(d,"collisionresponse");d!=null&&Dc(c,d.Bb)}else f.Tc=="soundvolume"&&Dc(c,n.Pd.ee*100);c=c}if(c)return c;if(b==true){b=new Bc;b.im(a);e.push(b);return b}return null}
function Fc(a,b){var c=Wg(a.l,b);if(c!=null){b=c.Ae;if(c.Tc=="health"&&b!=null){c=N(b,"gameai");if(c!=null){var d=c.Mb;a=Xg(a);d=d-a;if(d>0)wc(c,d,b);else c.Mb=a}}else if(c.Tc=="movementspeed"&&b!=null){c=N(b,"gameai");d=N(b,"keyboardcontrolled");if(b=N(b,"camerafps"))b.Sb=Q(a);else if(d)d.Sb=Q(a);else if(c)c.Cd=Q(a)}else if(c.Tc=="damage"&&b!=null){if(b=af(b,"Shoot"))b.be=Xg(a)}else if(c.Tc=="damage"&&b!=null){if(b=af(b,"Shoot"))b.be=Xg(a)}else if(c.Tc=="colsmalldistance"&&b!=null){b=N(b,"collisionresponse");
if(b!=null){b.Bb=Xg(a);b.vn=true}}else c.Tc=="soundvolume"&&ee(n.Pd,Q(a)/100)}}function Wg(a,b){if(a.length==0||b==null)return null;if(a[0]!="#")return null;var c=a.indexOf(".");if(c==-1)return null;var d=a.substr(c+1,a.length-c);if(d.length==0)return null;c=a.substr(1,c-1);a=null;if(c!="system"){a=cg(b,c);if(a==null)return null}b={};b.Ae=a;b.Tc=d;return b}Bc.prototype.getName=ea("l");Bc.prototype.im=ca("l");
function Tb(a){switch(a.Yb){case 1:return String(a.dc);case 2:return a.cc%1==0?String(a.cc):a.cc.toFixed(6)}return a.Qc}function Xg(a){switch(a.Yb){case 0:return Math.floor(a.Qc);case 1:return a.dc;case 2:return a.cc}return 0}function Q(a){switch(a.Yb){case 0:return Number(a.Qc);case 1:return a.dc;case 2:return a.cc}return 0}function Cc(a,b){a.Yb=0;a.Qc=b}function Ec(a,b){a.Yb=1;a.dc=b}function Dc(a,b){a.Yb=2;a.cc=b}
function Dg(a,b){this.oc=0;this.sa=a;this.fe=this.Tb=this.Mj=this.Sb=0;this.fi=this.jl=false;this.Mf=this.Gi=0;this.de=15;this.ub=new s;this.Lj=this.mj=this.Od=this.Jd="";this.Hm=this.Te=q();this.ri=this.we=this.Ge=this.Ee=this.ze=this.np=this.yl=this.zn=false;this.pc=0;this.sk=false;this.bk=true;this.cj=false;this.za=b;this!=null&&b.hg.push(this);this!=null&&b.Ij.push(this)}Dg.prototype=new Ig;l=Dg.prototype;l.k=k("keyboardcontrolled");
l.h=function(){var a=new Dg(this.sa,this.za);a.Sb=this.Sb;a.Mj=this.Mj;a.Tb=this.Tb;a.fe=this.fe;a.de=this.de;a.ub=this.ub?this.ub.e():null;a.Jd=this.Jd;a.Od=this.Od;a.mj=this.mj;a.Lj=this.Lj;a.fi=this.fi;a.Gi=this.Gi;a.Mf=this.Mf;a.cj=this.cj;return a};
l.yi=function(a,b){if(b==37||b==65){if(this.ze=a)this.Ee=false;return true}if(b==39||b==68){if(this.Ee=a)this.ze=false;return true}if(b==38||b==87){if(this.Ge=a)this.we=false;return true}if(b==40||b==83){if(this.we=a)this.Ge=false;return true}if(b==32){this.ri=a;return true}return false};l.Be=function(a){this.yl=a.shiftKey==1;return this.yi(true,a.keyCode)};l.Ce=function(a){this.yl=a.shiftKey==1;return this.yi(false,a.keyCode)};
l.fb=function(a,b){var c=b-this.oc;if(c>250)c=250;this.oc=b;var d=false;this.Te=b;if(this.cj){var e=a.r.ga;if(e!=null){e=N(e,"3rdpersoncamera");if(e!=null){if(e.hc!==a)return false}else return false}}e=a.S;if(this.ze){e.b-=c*this.Tb*0.0010;d=true}if(this.Ee){e.b+=c*this.Tb*0.0010;d=true}var f=new D;vb(f,e);e=new s(0,0,1);var g=new D;vb(g,this.ub);f=E(f,g);jb(f,e);f=this.yl;var i=(f?this.Mj:this.Sb)*c,j=0;g=this.we;var m=this.Ge;if(this.fi&&c)if(m||g){if(this.sk!=m)if(this.Mf==0)this.pc*=-1;else this.pc=
0;this.sk=!g;j=i/c;this.pc+=this.Gi*j*(c/1E3);if(this.pc>j)this.pc=j;i=this.pc*c}else if(this.Mf==0)this.pc=0;else{j=i/Number(c);this.pc-=this.Mf*j*(c/1E3);if(this.pc<0)this.pc=0;i=this.pc*c}va(e,i);if(m||g||this.fi&&this.pc!=0){d=e.e();if(g||!(m||g)&&!this.sk)Ca(d,-1);a.f.ta(d);this.zn=d=true}if(m||g){this.Wb(a,f?3:1,g);d=this.zn=true}else{c=false;if(e=N(a,"collisionresponse"))c=e.ce;if(!c&&(this.Wb(a,1,false,true)||this.Wb(a,3,false,true)||this.Wb(a,2,false,true)))this.Wb(a,0,false)}if(this.ri)if((c=
N(a,"collisionresponse"))&&!c.ce){e=0;if(this.sa&&this.sa.zd!=0)e=Math.floor(this.fe*(1/this.sa.zd)*2E3);if(!this.jl||this.jl&&b-this.Hm>e){Jg(c,this.fe);this.Wb(a,2,false);this.Hm=b;d=true}}return d};l.Vl=function(a){switch(a){case 0:return this.Jd;case 1:return this.Od;case 2:return this.mj;case 3:return this.Lj}return""};
l.Wb=function(a,b,c,d){if(!a||a.k()!="animatedmesh")return false;var e=a.Fa;if(!e)return false;if(e=rd(e,this.Vl(b))){var f=1*e.wc;if(c)f*=-1;if(d)return a.pb==e.O&&a.Qa==e.ud;if(!(a.pb==e.O&&a.Qa==e.ud&&n.D(a.wb,f))){Hf(a,e.ud,e.O);f&&If(a,f);a.Qb=b==0||b==1||b==3}return false}else if(!d){Hf(a,1,1);a.Qb=false}return false};
function Cg(a){this.oc=0;this.sa=a;this.Th=-1;this.de=15;this.ub=new s;this.Wj=this.fj=0;this.sc=false;this.Te=this.ja=0;this.Qe=new s;this.gh=new s;this.hc=null;this.sn=false;this.bk=true}Cg.prototype=new Ig;Cg.prototype.k=k("3rdpersoncamera");Cg.prototype.h=function(){var a=new Cg(this.sa);a.Th=this.Th;a.de=this.de;a.ub=this.ub.e();a.fj=this.fj;a.Wj=this.Wj;a.sc=this.sc;a.ja=this.ja;return a};
Cg.prototype.fb=function(a,b){var c=b-this.oc;if(c>250)c=250;this.oc=b;var d=false;if(a==null)return false;d=a.r;if(!this.sn)if(this.Th!=-1)if(d!=null){if((d=G(d,this.Th))&&d!==this.hc){this.hc=d;this.bk=true}this.sn=true}if(!this.hc)return false;d=false;var e=a.fa.e();a.fa=O(this.hc);a.fa.ta(this.gh);a.fa.b+=this.Wj;a.fa.D(e)||(d=true);if(this.bk){P(this.hc);P(a);this.gh=Sa(this.hc.kb());this.gh.b/=2;this.gh.c=0;this.gh.d=0;this.oc=b;this.bk=false}if(a.r.ga!==a)return false;if(xa(this.Qe)){this.Qe=
O(this.hc).substract(O(a));b=new D;vb(b,this.hc.S);e=this.Qe;var f=e.e();e.c=f.c*b.p+f.b*b.u+f.d*b.s;e.b=f.c*b.v+f.b*b.q+f.d*b.t;e.d=f.c*b.w+f.b*b.A+f.d*b.n}b=this.hc.S;e=new D;vb(e,b);b=new D;vb(b,this.ub);e=E(e,b);b=a.f.e();switch(this.fj){case 0:break;case 2:b=O(this.hc).substract(this.Qe);break;case 1:b=this.Qe.e();jb(e,b);b=O(this.hc).substract(b);e=O(a).tb(b);f=this.Qe.getLength();f=e>f*2.2;if(n.D(this.de,0)||f)b=b;else{c=Math.sqrt(e)*(c/1E3)*this.de;if(c>e)c=e;b=b.substract(a.f);va(b,c);b.ta(a.f);
b=b}break}if(this.sc&&this.ja!=null&&!a.f.D(b)){this.ja.zi(this.hc);c=new Ma;c.Z=a.fa.e();c.O=b.e();var g=Na(c);e=g.getLength();f=this.Qe.getLength()/10;va(g,f);c.O.ta(g);g=new C;g=this.ja.Eg(c.Z,c.O,true,g,true);if(g!=null){b=g.substract(c.Z);g=b.getLength();if(g<f)g=f;g-=f;if(g>e)g=e;va(b,g);b=c.Z.add(b)}this.ja.zi(null)}if(!a.f.D(b)){d=true;a.f=b}return d};function Eg(a){this.Lo=this.en=false;this.sa=a;this.o=null}Eg.prototype=new Ig;Eg.prototype.k=k("onfirstframe");
Eg.prototype.fb=function(a){if(this.en)return false;this.en=true;if(this.o){this.o.execute(a);return true}return false};function Ff(a,b,c){this.sa=b;this.ra=c;this.Oa=a;this.ag=false;eg(b,this);this.Mk=[];for(a=0;a<255;++a)this.Mk.push(false);this.Jf=[];this.Jf.push(new Qa(-1,0));this.Jf.push(new Qa(0,-1));this.Jf.push(new Qa(1,0));this.Jf.push(new Qa(0,1))}Ff.prototype=new Ig;Ff.prototype.k=k("mobileinput");
Ff.prototype.fb=function(){var a=false;if(this.ra.jj==1)Yg(this,this.ag&&this.ra.xj,this.ra.Ic);else if(Math.sqrt(this.ra.ac*this.ra.ac+this.ra.bc*this.ra.bc)<0.3||!this.ag){if(!this.ag){a=this.ra.ac!=0&&this.ra.bc!=0;this.ra.ac=0;this.ra.bc=0}Yg(this,false,37);Yg(this,false,38);Yg(this,false,39);Yg(this,false,40)}else for(var b=0;b<4;++b){var c=this.Jf[b].c-this.ra.ac,d=this.Jf[b].b-this.ra.bc;c=Math.sqrt(c*c+d*d)<1;Yg(this,c,37+b)}return a};
function Yg(a,b,c){if(a.Mk[c]!=b){a.Mk[c]=b;var d={};d.keyCode=c;b?se(a.Oa,d):te(a.Oa,d)}}Ff.prototype.pd=function(){this.ag=false};Ff.prototype.Rd=function(){this.ag=true};Ff.prototype.De=function(a){if(this.ag&&this.ra.xj&&this.ra.sl!=0&&this.ra.rl!=0){var b=Ve(this.Oa,a)-this.ra.bn;a=We(this.Oa,a)-this.ra.cn;this.ra.ac=b/this.ra.sl;this.ra.bc=a/this.ra.rl;this.ra.ac=n.lc(this.ra.ac,0,1);this.ra.bc=n.lc(this.ra.bc,0,1);this.ra.ac=this.ra.ac*2-1;this.ra.bc=this.ra.bc*2-1}};function vector3d(a,b,c){if(a!==null){this.x=a;this.y=b;this.z=c}else this.z=this.y=this.x=0}l=vector3d.prototype;l.add=function(a){return new vector3d(this.x+a.x,this.y+a.y,this.z+a.z)};l.substract=function(a){return new vector3d(this.x-a.x,this.y-a.y,this.z-a.z)};l.getLength=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};l.normalize=function(){var a=this.getLength();if(a!=0){a=1/a;this.x*=a;this.y*=a;this.z*=a}};
l.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"};l.x=0;l.y=0;l.z=0;function Zg(){this.jo=-1;this.ug=[];this.qh=false;this.za=this.T=this.cb=this.Yi=this.uc=null;this.zf=[];this.Ln=[];this.Gm=0;this.gn=false;this.il=null;this.hn={};this.Am=0}n.Ra=null;function Z(){if(n.Ra==null)n.Ra=new Zg;return n.Ra}function ne(a,b){a.za=b}function Ie(a){return a.zf.length!=0}function Gg(a,b){try{eval(b)}catch(c){ma(n.na,c)}}function $g(a){++a.jo;return a.jo}
function Me(a,b){a.qh=true;if(a.zf.length!=null){a.T=b;for(b=0;b<a.zf.length;++b)a.zf[b]();a.T=null}a.qh=false}
function ah(a,b,c,d){switch(c){case "Position Mode":b.Gd=d=="absolute (pixels)";break;case "Pos X (percent)":b.bf=d/100;break;case "Pos Y (percent)":b.cf=d/100;break;case "Width (percent)":b.of=d;break;case "Height (percent)":b.nf=d;break;case "Pos X (pixels)":b.$e=d;break;case "Pos Y (pixels)":b.af=d;break;case "Width (pixels)":b.qf=d/100;break;case "Height (pixels)":b.pf=d/100;break;case "Alpha":b.Fc=(d&255)<<24|b.Fc&16777215;break;case "Image":a=ud(a.cb,d);b.Ga=a;break;case "Background Color":b.Fc=
d;break;case "Draw Text":b.Oe=d?true:false;break;case "TextColor":b.rf=d;break;case "Text":b.bb=d;break}}
function bh(a,b,c){switch(c){case "Position Mode":return b.Gd;case "Pos X (percent)":return b.bf*100;case "Pos Y (percent)":return b.cf*100;case "Width (percent)":return b.of;case "Height (percent)":return b.nf;case "Pos X (pixels)":return b.$e;case "Pos Y (pixels)":return b.af;case "Width (pixels)":return b.qf*100;case "Height (pixels)":return b.pf*100;case "Alpha":return n.xe(b.Fc);case "Image":return b.Ga?b.Ga.l:null;case "Background Color":return b.Fc;case "Draw Text":return b.Oe;case "TextColor":return b.rf;
case "Text":return b.bb}return null}n.Je=function(a){this.Nb=null;this.ic=[];this.Nl=this.Dn=false;this.Fd=-1;this.Fn=false;this.sa=a};n.Je.prototype=new Ig;function ch(a,b,c){a.Dn=b;a.Nl=c;if(!a.Fn&&a.sa){b=Z().za;if(c){a!=null&&b.hg.push(a);a!=null&&b.Ij.push(a)}eg(a.sa,a)}}n.Je.prototype.k=k("extensionscript");n.Je.prototype.h=function(a,b,c,d){a=new n.Je(b);a.Nb=this.Nb;for(b=0;b<this.ic.length;++b){var e=this.ic[b];e!=null?a.ic.push(e.h(c,d)):a.ic.push(null)}return a};
n.Je.prototype.fb=function(a,b){if(a==null)return false;if(this.Nb==null||this.Nb.length==0)return false;var c=Z();c.Yi=this;this.Fd==-1&&dh(this,a,c);if(this.Fd!=-1)try{_ccbScriptCache[this.Fd].onAnimate(a,b)}catch(d){ma(n.na,this.Nb+": "+d)}c.Yi=null;return true};
function dh(a,b,c){var d="";a.Fd=$g(c);d+="if (typeof _ccbScriptCache == 'undefined') _ccbScriptCache = new Array(); ";d+="_ccbScriptCache[";d+=a.Fd;d+="] = new ";d+=a.Nb;d+="();";Gg(c,d);var e="_ccbScriptCache[";e+=a.Fd;e+="].";d="try {";d+=eh(e,a.ic);d+="} catch(e) { }";Gg(c,d);d=false;if(b.k()=="camera")d=true;a.Fn=d;d="try { ccbRegisterBehaviorEventReceiver(typeof ";d+=e;d+="onMouseEvent != 'undefined', typeof ";d+=e;d+="onKeyEvent != 'undefined'); } catch(e) { }";Gg(c,d)}
function fh(a,b,c){a.Dn&&_ccbScriptCache[a.Fd].onMouseEvent(b,c)}l=n.Je.prototype;l.pd=function(a){var b=false;if(a&&a.button==2)b=true;fh(this,b?4:2,0)};l.Ef=function(a){fh(this,1,a)};l.Rd=function(a){var b=false;if(a&&a.button==2)b=true;fh(this,b?5:3,0)};l.De=function(){fh(this,0,0)};l.Be=function(a){this.Nl&&_ccbScriptCache[this.Fd].onKeyEvent(a.keyCode,true)};l.Ce=function(a){this.Nl&&_ccbScriptCache[this.Fd].onKeyEvent(a.keyCode,false)};
function Fg(){this.i=-1;this.wf=this.Qc=this.l=null;this.dc=this.cc=0;this.ai=this.Rg=null}Fg.prototype.h=function(a,b){var c=new Fg;c.i=this.i;c.l=this.l;c.Qc=this.Qc;c.wf=this.wf?this.wf.e():null;c.cc=this.cc;c.dc=this.dc;if(this.Rg)c.Rg=this.Rg.h(a,b);c.ai=this.ai;return c};
function eh(a,b){for(var c="",d=0;d<b.length;++d){var e=b[d];if(e!=null){c+=a;c+=e.l;c+=" = ";switch(e.i){case 1:c+=e.cc;c+="; ";break;case 2:c+='"';var f=e.Qc.split('"').join('\\"');c+=f;c+='"; ';break;case 3:c+=e.dc?"true":"false";c+="; ";break;case 6:c+="new vector3d(";c+=e.wf.c;c+=", ";c+=e.wf.b;c+=", ";c+=e.wf.d;c+="); ";break;case 7:c+='"';c+=e.ai?e.ai.l:"";c+='"; ';break;case 8:c+="ccbGetSceneNodeFromId(";c+=e.dc;c+="); ";break;case 9:a:{f=Z();e=e.Rg;for(var g=0;g<f.ug.length;++g)if(f.ug[g]===
e){f=g;break a}f.ug.push(e);f=f.ug.length-1}c+=f;c+="; ";break;case 0:case 5:case 4:default:c+=e.dc;c+="; ";break}}}return c}function Hg(){this.i="ExtensionScript";this.ic=[];this.Nb=null}Hg.prototype.h=function(a,b){var c=new Hg;c.Nb=this.Nb;for(var d=0;d<this.ic.length;++d){var e=this.ic[d];e!=null?c.ic.push(e.h(a,b)):c.ic.push(null)}return c};
Hg.prototype.execute=function(a){if(!(this.Nb==null||this.Nb.length==0||a==null)){var b=Z(),c="";c="_ccbScriptTmp = new ";c+=this.Nb;c+="();";Gg(b,c);c="try { ";c+=eh("_ccbScriptTmp.",this.ic);c+="} catch(e) { }";Gg(b,c);c="try { _ccbScriptTmp.execute(ccbGetSceneNodeFromId(";c+=a.Ea;c+=")); } catch(e) { }";Gg(b,c)}};function gh(a){var b=n.Ra.uc;if(b==null)return null;return G(b,a)}
function hh(a){var b=n.Ra.uc;if(a==null)return null;var c=a.Ea,d=Xc(b);c=a.h(a.sb,c,d);if(c!=null){c.Ea=d;b.xi(a,c)}if((a=a.$a)&&b)if(a=a.h(c)){c.$a=a;b.wd&&Yc(b.wd,a)}return c}function ih(){var a=n.Ra.uc;if(a==null)return null;return a.ga}function jh(a){var b=n.Ra.uc;b!=null&&a!=null&&a.k()=="camera"&&$f(b,a)}function kh(a,b){if(a==null)return-1;if(b<0||b>=a.Y.length)return null;return a.Y[b]}function lh(){var a=n.Ra.uc;if(a==null)return null;return a.Ja}
function mh(a){if(a==null)return 0;return a.Y.length}function nh(a){var b=n.Ra.uc;if(b==null)return null;return cg(b,a)}function oh(a){var b=n.Ra.uc;b!=null&&Vc(b,a,0)}function ph(a,b){a&&b&&vc(b,a)}function qh(a){if(a==null)return 0;return a.Wc()}
function rh(a,b,c){if(a==null)return null;if(b<0||b>=a.Wc())return null;a=a.nc(b);if(a==null)return null;if(c=="Type")switch(a.i){case 0:return"solid";case 2:return"lightmap";case 3:return"lightmap_add";case 4:return"lightmap_m2";case 5:return"lightmap_m4";case 11:return"reflection_2layer";case 12:return"trans_add";case 13:return"trans_alphach";case 16:return"trans_reflection_2layer"}else if(c=="Texture1")return a.ab==null?"":a.ab.l;else if(c=="Texture2")return a.kc==null?"":a.kc.l;else if(c=="Lighting")return a.yc;
else if(c=="Backfaceculling")return a.Oo;return null}function sh(){}
function th(a,b,c,d){if(a!=null)if(!(b<0||b>=a.Wc())){a=a.nc(b);if(a!=null){b=typeof d=="string"?d:null;var e=null;e=Z();if(c=="Type")if(b)switch(b){case "solid":a.i=0;break;case "lightmap":case "lightmap_add":case "lightmap_m2":case "lightmap_m4":a.i=2;break;case "reflection_2layer":a.i=11;break;case "trans_add":a.i=12;break;case "trans_alphach":a.i=13;break;case "trans_reflection_2layer":a.i=16;break}else{c=parseInt(d);if(c!=NaN)a.i=c}else if(c=="Texture1"){if(b!=null&&e.cb!=null){e=ud(e.cb,b);
if(e!=null)a.ab=e}}else if(c=="Texture2"){if(b!=null&&e.cb!=null){e=ud(e.cb,b);if(e!=null)a.kc=e}}else if(c=="Lighting")a.yc=d;else if(c=="Backfaceculling")a.Oo=d}}}
function uh(a,b,c,d,e){if(a!=null){var f=0,g=0,i=0;if(d==null&&c!=null&&typeof c.x!="undefined"){f=c.x;g=c.y;i=c.z}if(d!=null&&e!=null){f=c;g=d;i=e}var j=e=d=null,m=null,o=a.k();if(o=="camera")d=a;else if(o=="animatedmesh")e=a;else if(o=="light")j=a;else if(o=="2doverlay")m=a;if(b=="Visible")a.X=c;else if(b=="Position"){a.f.c=f;a.f.b=g;a.f.d=i}else if(b=="Rotation"){a.S.c=f;a.S.b=g;a.S.d=i}else if(b=="Scale"){a.ma.c=f;a.ma.b=g;a.ma.d=i}else if(b=="Target")d!=null&&oc(d,new s(f,g,i));else if(b=="UpVector"){if(d!=
null)d.Fb=new s(f,g,i)}else if(b=="FieldOfView_Degrees")d!=null&&gf(d,n.Mn(c));else if(b=="AspectRatio")d!=null&&Qe(d,c);else if(b=="Animation")e!=null&&ic(e,c,e.Qb);else if(b=="Looping")e!=null&&Jf(e,c);else if(b=="FramesPerSecond")e!=null&&If(e,c*0.0010);else if(b=="AnimationBlending"){if(e!=null)e.Yd=c}else if(b=="BlendTimeMs"){if(e!=null)e.bd=c}else if(b=="Radius"){if(j!=null)j.Ob.Da=c}else if(b=="Name")a.l=c;else m!=null&&ah(Z(),m,b,c)}}
function vh(a,b){if(a==null)return null;var c=null,d=null,e=null,f=null,g=a.k();if(g=="camera")c=a;else if(g=="animatedmesh")d=a;else if(g=="light")e=a;else if(g=="2doverlay")f=a;if(b=="Visible")return a.X;else if(b=="Position")return new vector3d(a.f.c,a.f.b,a.f.d);else if(b=="Rotation")return new vector3d(a.S.c,a.S.b,a.S.d);else if(b=="Scale")return new vector3d(a.ma.c,a.ma.b,a.ma.d);else if(b=="Target"){if(c!=null)return new vector3d(c.fa.c,c.fa.b,c.fa.d)}else if(b=="UpVector"){if(c!=null)return new vector3d(c.Fb.c,
c.Fb.b,c.Fb.d)}else if(b=="FieldOfView_Degrees"){if(c!=null)return n.wi(c.ed)}else if(b=="AspectRatio"){if(c!=null)return c.Dc}else if(b=="Animation")return"";else if(b=="Looping"){if(d!=null)return d.Qb}else if(b=="FramesPerSecond"){if(d!=null)return d.wb*1E3}else if(b=="AnimationBlending"){if(d!=null)return d.Yd}else if(b=="BlendTimeMs"){if(d!=null)return d.bd}else if(b=="Radius"){if(e!=null)return e.Ob.Da}else if(b=="Name")return a.l;else if(f!=null)return bh(Z(),f,b);return null}
function wh(a,b,c,d){if(a!=null){a.f.c=b;a.f.b=c;a.f.d=d;for(b=0;b<a.ia.length;++b){c=a.ia[b];c!=null&&c.k()=="collisionresponse"&&c.reset()}}}function xh(a){Z().zf.push(a)}function yh(a){var b=Z();a=b.zf.indexOf(a);a!=-1&&b.zf.splice(a,1)}function zh(a,b,c,d,e){var f=Z();!f.qh||f.T==null||Md(f.T,b,c,d-b,e-c,a,true)}function Ah(a,b,c,d,e){a=Z();!a.qh||a.T==null||Md(a.T,b,c,d-b,e-c,4278190080,true)}function Bh(a,b,c,d,e){a=Z();!a.qh||a.T==null||Md(a.T,b,c,d-b,e-c,4278190080,true)}
function Ch(a,b){var c=Z().za;a=Ye(c,a,b);if(a!=null)return new vector3d(a.c,a.b,a.d);return null}function Dh(a,b,c){var d=Z().za;a=Ze(d,new s(a,b,c));return new vector3d(a.c,a.b,0)}function Eh(a,b,c,d,e,f){var g=new Ma;g.Z=new s(a,b,c);g.O=new s(d,e,f);a=n.Ra.uc;a=xc(yc.prototype,a,g.Z,g.O,a.wd,true);if(a<999999999){b=Na(g);va(b,a);g=g.Z.add(b);return new vector3d(g.c,g.b,g.d)}return null}
function Fh(a,b,c,d,e,f,g){if(a==null)return false;if(a.aa==null)return false;b=new s(b,c,d);e=new s(e,f,g);return Ua(bf(a),b,e)}function Gh(){window.close()}function Hh(){}function Ih(a){var b=Z();a=td(b.cb,a,true);if(a!=null)return a.l;return null}function Jh(){var a=Z().za;if(a)return a.fc;return 0}function Kh(){var a=Z().za;if(a)return a.gc;return 0}function Lh(){var a=Z().za;if(a!=null&&a.T)return a.T.Ib();return 0}function Mh(){var a=Z().za;if(a!=null&&a.T)return a.T.Hb();return 0}
function Nh(){}function Oh(){}function Ph(a){var b=Z().za;if(b!=null)return kc(b,a,true);return false}function Qh(a){var b=n.Pd;a=$d(b,a);a!=null&&Jc(b,a,false,1)}function Rh(a){Lc(n.Pd,a)}function Sh(a){a=Sb(a,true,n.Ra.uc);if(a==null)return null;if(a.Yb==0)return Tb(a);if(a.Yb==1)return Xg(a);if(a.Yb==2)return Q(a);return null}function Th(a,b){var c=n.Ra.uc;a=Sb(a,true,c);if(a!=null){typeof b=="number"?Dc(a,b):Cc(a,b);Fc(a,c)}}function Uh(a,b){var c=Z().za;c&&$e(c,a,b)}
function Vh(){return null}function Wh(){}function Xh(){return"webgl"}function Yh(a,b){var c=n.Ra.uc;if(c!=null){if(b==null)b=c.Ja;if(a>=0&&a<n.Ra.ug.length){a=n.Ra.ug[a];a!=null&&a.execute(b)}}}function Zh(a){ma(n.na,a)}function $h(){}function ai(a,b){n.Ra.Yi!=null&&ch(n.Ra.Yi,a,b)}function bi(a,b){++n.Ra.Gm;var c=n.Ra.Gm;a=new na(a);var d=n.Ra.Ln,e={};e.Up=a;e.id=c;d.push(e);a.load(function(f){b&&b(f);for(f=0;f<d.length;++f)if(d[f].id==c){d.splice(f,1);break}});return c}
function ci(a){for(var b=n.Ra.Ln,c=0;c<b.length;++c)if(b[c].id==a){b[c].Up.abort();b.splice(c,1);break}}function di(a,b,c,d){var e=Z(),f=e.za.T;if(f==null)return-1;c=f.eb[c];a=Ud(f,a,b,c.In,c.Jn,c.Hn);if(a!=-1){if(d!=null)e.hn["_"+a]=d;if(!e.gn){e.gn=true;e.il=f.Gh;f.Gh=function(g){e.il&&e.il();var i=e.hn["_"+g];if(i!=null){e.Am=g;i()}}}}return a}function ei(a,b,c,d,e,f){var g=Z(),i=g.za.T;if(i!=null){a=i.$;g=Vd(i,g.Am);b=a.getUniformLocation(g,b);a.uniform4f(b,c,d,e,f)}}
function fi(a,b,c){if(a){var d=N(a,"gameai");if(d)if(b=="cancel"){d.Gc=0;d.Wb(a,0)}else if(b=="moveto"){b=new s(0,0,0);if(c!=null&&typeof c.x!="undefined"){b.c=c.x;b.b=c.y;b.d=c.z}Vg(d,a,b,O(a),q())}else b=="attack"&&Ug(d,a,c,O(c),O(a),q())}};function he(){this.bh=-1;this.Mo="";this.Db=[];this.zp=2;this.wn=false;this.Bq=320;this.Aq=200;this.Ml=function(a){this.Db.push(a)};this.Fg=function(){if(this.bh<0||this.bh>=this.Db.length)return null;return this.Db[this.bh]};this.yo=function(a){for(var b=0;b<this.Db.length;++b)if(this.Db[b]===a){this.bh=b;return}}};n.Dp=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1);
n.Ep=function(a){var b,c,d,e,f,g=n.Dp;e=a.length;d=0;for(f="";d<e;){do b=g[a.charCodeAt(d++)&255];while(d<e&&b==-1);if(b==-1)break;do c=g[a.charCodeAt(d++)&255];while(d<e&&c==-1);if(c==-1)break;f+=String.fromCharCode(b<<2|(c&48)>>4);do{b=a.charCodeAt(d++)&255;if(b==61)return f;b=g[b]}while(d<e&&b==-1);if(b==-1)break;f+=String.fromCharCode((c&15)<<4|(b&60)>>2);do{c=a.charCodeAt(d++)&255;if(c==61)return f;c=g[c]}while(d<e&&c==-1);if(c==-1)break;f+=String.fromCharCode((b&3)<<6|c)}return f};function gi(){}l=gi.prototype;l.Df=aa();l.Gg=function(a,b,c){this.Df(b,c)};
l.Eg=function(a,b,c,d,e){if(!a||!b)return null;if(this.wa!=null&&e&&this.wa.X==false)return null;var f=new y;f.C=a.e();f.M=a.e();z(f,b);e=[];this.Gg(f,null,e);f=b.substract(a);f.normalize();for(var g,i=9.999999999E8,j=za(b.substract(a)),m=Math.min(a.c,b.c),o=Math.max(a.c,b.c),p=Math.min(a.b,b.b),h=Math.max(a.b,b.b),x=Math.min(a.d,b.d),t=Math.max(a.d,b.d),L=null,A=0;A<e.length;++A){var u=e[A];if(!(c&&!cb(db(u),f)))if(!(m>u.U.c&&m>u.ca.c&&m>u.da.c))if(!(o<u.U.c&&o<u.ca.c&&o<u.da.c))if(!(p>u.U.b&&p>
u.ca.b&&p>u.da.b))if(!(h<u.U.b&&h<u.ca.b&&h<u.da.b))if(!(x>u.U.d&&x>u.ca.d&&x>u.da.d))if(!(t<u.U.d&&t<u.ca.d&&t<u.da.d))if(!(ya(a,u.U)>=i&&ya(a,u.ca)>=i&&ya(a,u.da)>=i))if(g=u.Wl(a,f)){var H=ya(g,a),M=ya(g,b);if(H<j&&M<j&&H<i){i=H;d&&u.Ba(d);L=g}}}if(L)return L.e();return null};l.ck=k(null);l.zi=aa();l.h=k(null);
function ng(a,b,c){if(a){this.wa=b;this.F=[];if(a!=null)for(b=0;b<a.va.length;++b){var d=a.va[b];if(d)if(!(c!=null&&d.P&&d.P.i==c))for(var e=d.ea.length,f=0;f<e;f+=3)this.F.push(new C(d.m[d.ea[f]].f,d.m[d.ea[f+1]].f,d.m[d.ea[f+2]].f))}}}ng.prototype=new gi;
ng.prototype.Df=function(a,b){if(this.wa.aa){a=a?E(a,this.wa.aa):this.wa.aa;var c;if(gb(a))for(c=0;c<this.F.length;++c)b.push(this.F[c]);else if(hb(a))for(c=0;c<this.F.length;++c)b.push(new C(nb(a,this.F[c].U),nb(a,this.F[c].ca),nb(a,this.F[c].da)));else for(c=0;c<this.F.length;++c)b.push(new C(lb(a,this.F[c].U),lb(a,this.F[c].ca),lb(a,this.F[c].da)))}};ng.prototype.Gg=function(a,b,c){this.Df(b,c)};ng.prototype.ck=ea("wa");ng.prototype.h=function(a){var b=new ng(null,a);b.wa=a;b.F=this.F;return b};
function og(a,b){if(b){this.wa=b;this.F=[];if(a!=null){a=Ta(a);this.F.push(new C(a[3],a[0],a[2]));this.F.push(new C(a[3],a[1],a[0]));this.F.push(new C(a[3],a[2],a[7]));this.F.push(new C(a[7],a[2],a[6]));this.F.push(new C(a[7],a[6],a[4]));this.F.push(new C(a[5],a[7],a[4]));this.F.push(new C(a[5],a[4],a[0]));this.F.push(new C(a[5],a[0],a[1]));this.F.push(new C(a[1],a[3],a[7]));this.F.push(new C(a[1],a[7],a[5]));this.F.push(new C(a[0],a[6],a[2]));this.F.push(new C(a[0],a[4],a[6]))}}}og.prototype=new ng;
og.prototype.h=function(a){var b=new og(null,a);b.wa=a;b.F=this.F;return b};function fg(){this.Pc=[];this.cl=null}fg.prototype=new gi;fg.prototype.Df=function(a,b){for(var c=this.cl,d=0;d<this.Pc.length;++d){var e=this.Pc[d];c!=null&&c==e.ck()||e.Df(a,b)}};fg.prototype.Gg=function(a,b,c){for(var d=this.cl,e=0;e<this.Pc.length;++e){var f=this.Pc[e];d!=null&&d==f.ck()||f.Gg(a,b,c)}};function Yc(a,b){a.Pc.push(b)}
function He(a,b){for(var c=0;c<a.Pc.length;)if(a.Pc[c]===b){a.Pc.splice(c,1);return}else++c}fg.prototype.clear=function(){this.Pc=[]};fg.prototype.Eg=function(a,b,c,d,e){var f=9.999999999E8,g=null,i=null;if(d)i=new C;for(var j=0;j<this.Pc.length;++j){var m=this.Pc[j].Eg(a,b,c,i,e);if(m!=null){var o=ya(m,a);if(o<f){g=m.e();f=o;d&&i.Ba(d)}}}return g};fg.prototype.zi=ca("cl");n.wl=function(){this.F=[];this.g=new y;this.cd=[]};
function mg(a,b,c,d){this.Ro=this.Qo=0;this.Pm=c==null?64:c;if(a){this.wa=b;this.ne=new n.wl;this.F=[];for(b=0;b<a.va.length;++b)if(c=a.va[b])if(!(d!=null&&c.P&&c.P.i==d))for(var e=c.ea.length,f=0;f<e;f+=3){var g=new C(c.m[c.ea[f]].f,c.m[c.ea[f+1]].f,c.m[c.ea[f+2]].f);this.ne.F.push(g);this.F.push(g)}hi(this,this.ne)}}mg.prototype=new gi;
function hi(a,b){++a.Qo;b.g.C=b.F[0].U.e();b.g.M=b.g.C.e();for(var c,d=b.F.length,e=0;e<d;++e){c=b.F[e];z(b.g,c.U);z(b.g,c.ca);z(b.g,c.da)}if(!b.g.C.D(b.g.M)&&d>a.Pm){d=Ra(b.g);for(var f=Ta(b.g),g=new y,i=0;i<8;++i){var j=[];g.C=d.e();g.M=d.e();z(g,f[i]);b.cd.push(new n.wl);for(e=0;e<b.F.length;++e){c=b.F[e];g.Hg(c.U)&&g.Hg(c.ca)&&g.Hg(c.da)?b.cd[i].F.push(c):j.push(c)}b.F=j;if(b.cd[i].F.length==0)b.cd[i]=null;else hi(a,b.cd[i])}}a.Ro+=b.F.length}
mg.prototype.Df=function(a,b){ng.prototype.Df.call(this,a,b)};mg.prototype.Gg=function(a,b,c){if(this.wa.aa){var d=new D;a=a.e();if(this.wa){d=this.wa.aa.e();qb(d);zb(d,a)}var e=d;e.p=1;e.u=0;e.s=0;e.G=0;e.v=0;e.q=1;e.t=0;e.H=0;e.w=0;e.A=0;e.n=1;e.I=0;e.J=0;e.K=0;e.B=0;e.L=1;e.Ma=true;if(b)d=b.e();if(this.wa)d=E(d,this.wa.aa);this.ne&&ii(this,this.ne,c,a,d)}};
function ii(a,b,c,d,e){if(Va(b.g,d)){var f=b.F.length,g;if(gb(e))for(g=0;g<f;++g)c.push(b.F[g]);else if(hb(e))for(g=0;g<f;++g)c.push(new C(nb(e,b.F[g].U),nb(e,b.F[g].ca),nb(e,b.F[g].da)));else for(g=0;g<f;++g)c.push(new C(lb(e,b.F[g].U),lb(e,b.F[g].ca),lb(e,b.F[g].da)));for(g=0;g<b.cd.length;++g){f=b.cd[g];f!=null&&ii(a,f,c,d,e)}}}mg.prototype.ck=ea("wa");function ji(a,b){var c=new n.wl;c.F=b.F;c.g=b.g.e();for(var d=0;d<b.cd.length;++d){var e=b.cd[d],f=null;if(e)f=ji(a,e);c.cd.push(f)}return c}
mg.prototype.h=function(a){var b=new mg(null,a,this.Pm);b.wa=a;b.F=this.F;b.ne=null;if(this.ne)b.ne=ji(this,this.ne);return b};(function(a){function b(){this.list=this.next=null}function c(){this.od=this.Uc=this.Cc=0;this.Ff=null}function d(K,T,U,r,v,ba){this.Ke=16;this.bp=288;this.status=0;this.Fe=null;this.Qd=0;var R=new Array(this.Ke+1),ob,ia,Ga,I,B,F,Oa,Pa=new Array(this.Ke+1),Aa,sa,oa,ja=new c,Ib=new Array(this.Ke);I=new Array(this.bp);var pa,Xa=new Array(this.Ke+1),ac,Ya,bc;bc=this.Fe=null;for(B=0;B<R.length;B++)R[B]=0;for(B=0;B<Pa.length;B++)Pa[B]=0;for(B=0;B<Ib.length;B++)Ib[B]=null;for(B=0;B<I.length;B++)I[B]=0;
for(B=0;B<Xa.length;B++)Xa[B]=0;ob=T>256?K[256]:this.Ke;Aa=K;sa=0;B=T;do{R[Aa[sa]]++;sa++}while(--B>0);if(R[0]==T){this.Fe=null;this.status=this.Qd=0}else{for(F=1;F<=this.Ke;F++)if(R[F]!=0)break;Oa=F;if(ba<F)ba=F;for(B=this.Ke;B!=0;B--)if(R[B]!=0)break;Ga=B;if(ba>B)ba=B;for(ac=1<<F;F<B;F++,ac<<=1)if((ac-=R[F])<0){this.status=2;this.Qd=ba;return}if((ac-=R[B])<0){this.status=2;this.Qd=ba}else{R[B]+=ac;Xa[1]=F=0;Aa=R;sa=1;for(oa=2;--B>0;)Xa[oa++]=F+=Aa[sa++];Aa=K;B=sa=0;do if((F=Aa[sa++])!=0)I[Xa[F]++]=
B;while(++B<T);T=Xa[Ga];Xa[0]=B=0;Aa=I;sa=0;I=-1;pa=Pa[0]=0;oa=null;for(Ya=0;Oa<=Ga;Oa++)for(K=R[Oa];K-- >0;){for(;Oa>pa+Pa[1+I];){pa+=Pa[1+I];I++;Ya=(Ya=Ga-pa)>ba?ba:Ya;if((ia=1<<(F=Oa-pa))>K+1){ia-=K+1;for(oa=Oa;++F<Ya;){if((ia<<=1)<=R[++oa])break;ia-=R[oa]}}if(pa+F>ob&&pa<ob)F=ob-pa;Ya=1<<F;Pa[1+I]=F;oa=new Array(Ya);for(ia=0;ia<Ya;ia++)oa[ia]=new c;bc=bc==null?(this.Fe=new b):(bc.next=new b);bc.next=null;bc.list=oa;Ib[I]=oa;if(I>0){Xa[I]=B;ja.Uc=Pa[I];ja.Cc=16+F;ja.Ff=oa;F=(B&(1<<pa)-1)>>pa-Pa[I];
Ib[I-1][F].Cc=ja.Cc;Ib[I-1][F].Uc=ja.Uc;Ib[I-1][F].od=ja.od;Ib[I-1][F].Ff=ja.Ff}}ja.Uc=Oa-pa;if(sa>=T)ja.Cc=99;else if(Aa[sa]<U){ja.Cc=Aa[sa]<256?16:15;ja.od=Aa[sa++]}else{ja.Cc=v[Aa[sa]-U];ja.od=r[Aa[sa++]-U]}ia=1<<Oa-pa;for(F=B>>pa;F<Ya;F+=ia){oa[F].Cc=ja.Cc;oa[F].Uc=ja.Uc;oa[F].od=ja.od;oa[F].Ff=ja.Ff}for(F=1<<Oa-1;(B&F)!=0;F>>=1)B^=F;for(B^=F;(B&(1<<pa)-1)!=Xa[I];){pa-=Pa[I];I--}}this.Qd=Pa[1];this.status=ac!=0&&Ga!=1?1:0}}}function e(){if(Kd.length==qe)return-1;return Kd.charCodeAt(qe++)&255}
function f(K){for(;da<K;){X|=e()<<da;da+=8}}function g(K){return X&ki[K]}function i(K){X>>=K;da-=K}function j(K,T,U){var r,v,ba;if(U==0)return 0;for(ba=0;;){f(Ba);v=Za.list[g(Ba)];for(r=v.Cc;r>16;){if(r==99)return-1;i(v.Uc);r-=16;f(r);v=v.Ff[g(r)];r=v.Cc}i(v.Uc);if(r==16){u&=h-1;K[T+ba++]=A[u++]=v.od}else{if(r==15)break;f(r);qa=v.od+g(r);i(r);f(Jb);v=re.list[g(Jb)];for(r=v.Cc;r>16;){if(r==99)return-1;i(v.Uc);r-=16;f(r);v=v.Ff[g(r)];r=v.Cc}i(v.Uc);f(r);cc=u-v.od-g(r);for(i(r);qa>0&&ba<U;){qa--;cc&=
h-1;u&=h-1;K[T+ba++]=A[u++]=A[cc++]}}if(ba==U)return U}$a=-1;return ba}function m(K,T,U){if(H==null){var r,v=new Array(288);for(r=0;r<144;r++)v[r]=8;for(;r<256;r++)v[r]=9;for(;r<280;r++)v[r]=7;for(;r<288;r++)v[r]=8;J=7;r=new d(v,288,257,gg,hg,J);if(r.status!=0){alert("HufBuild error: "+r.status);return-1}H=r.Fe;J=r.Qd;for(r=0;r<30;r++)v[r]=5;zip_fixed_bd=5;r=new d(v,30,0,ig,jg,zip_fixed_bd);if(r.status>1){H=null;alert("HufBuild error: "+r.status);return-1}M=r.Fe;zip_fixed_bd=r.Qd}Za=H;re=M;Ba=J;Jb=
zip_fixed_bd;return j(K,T,U)}function o(K,T,U){var r,v,ba,R,ob,ia,Ga,I=new Array(316);for(r=0;r<I.length;r++)I[r]=0;f(5);ia=257+g(5);i(5);f(5);Ga=1+g(5);i(5);f(4);r=4+g(4);i(4);if(ia>286||Ga>30)return-1;for(v=0;v<r;v++){f(3);I[kg[v]]=g(3);i(3)}for(;v<19;v++)I[kg[v]]=0;Ba=7;v=new d(I,19,19,null,null,Ba);if(v.status!=0)return-1;Za=v.Fe;Ba=v.Qd;R=ia+Ga;for(r=ba=0;r<R;){f(Ba);ob=Za.list[g(Ba)];v=ob.Uc;i(v);v=ob.od;if(v<16)I[r++]=ba=v;else if(v==16){f(2);v=3+g(2);i(2);if(r+v>R)return-1;for(;v-- >0;)I[r++]=
ba}else{if(v==17){f(3);v=3+g(3);i(3)}else{f(7);v=11+g(7);i(7)}if(r+v>R)return-1;for(;v-- >0;)I[r++]=0;ba=0}}Ba=t;v=new d(I,ia,257,gg,hg,Ba);if(Ba==0)v.status=1;if(v.status!=0)return-1;Za=v.Fe;Ba=v.Qd;for(r=0;r<Ga;r++)I[r]=I[r+ia];Jb=L;v=new d(I,Ga,0,ig,jg,Jb);re=v.Fe;Jb=v.Qd;if(Jb==0&&ia>257)return-1;if(v.status!=0)return-1;return j(K,T,U)}function p(K,T,U){var r,v;for(r=0;r<U;){if(sc&&$a==-1)return r;if(qa>0){if($a!=x)for(;qa>0&&r<U;){qa--;cc&=h-1;u&=h-1;K[T+r++]=A[u++]=A[cc++]}else{for(;qa>0&&r<
U;){qa--;u&=h-1;f(8);K[T+r++]=A[u++]=g(8);i(8)}if(qa==0)$a=-1}if(r==U)return r}if($a==-1){if(sc)break;f(1);if(g(1)!=0)sc=true;i(1);f(2);$a=g(2);i(2);Za=null;qa=0}switch($a){case 0:v=T+r;var ba=U-r,R=undefined;R=da&7;i(R);f(16);R=g(16);i(16);f(16);if(R!=(~X&65535))v=-1;else{i(16);qa=R;for(R=0;qa>0&&R<ba;){qa--;u&=h-1;f(8);K[v+R++]=A[u++]=g(8);i(8)}if(qa==0)$a=-1;v=R}break;case 1:v=Za!=null?j(K,T+r,U-r):m(K,T+r,U-r);break;case 2:v=Za!=null?j(K,T+r,U-r):o(K,T+r,U-r);break;default:v=-1;break}if(v==-1){if(sc)return 0;
return-1}r+=v}return r}var h=32768,x=0,t=9,L=6,A,u,H=null,M,J,X,da,$a,sc,qa,cc,Za,re,Ba,Jb,Kd,qe,ki=new Array(0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535),gg=new Array(3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0),hg=new Array(0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,99,99),ig=new Array(1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577),jg=new Array(0,
0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13),kg=new Array(16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15),lg={};a.JSInflate=lg;lg.Sp=function(K){var T,U,r;if(A==null)A=new Array(2*h);da=X=u=0;$a=-1;sc=false;qa=cc=0;Za=null;Kd=K;qe=0;T=new Array(1024);for(K="";(U=p(T,0,T.length))>0;)for(r=0;r<U;r++)K+=String.fromCharCode(T[r]);Kd=null;return K}})(this);window.startCopperLichtFromFile=function(a,b,c,d,e){a=new ge(a,true,null,false,c,d,e);a.load(b);return a};window.CL3D=n;window.ccbGetSceneNodeFromId=gh;window.ccbCloneSceneNode=hh;window.ccbGetActiveCamera=ih;window.ccbSetActiveCamera=jh;window.ccbGetChildSceneNode=kh;window.ccbGetRootSceneNode=lh;window.ccbGetSceneNodeChildCount=mh;window.ccbGetSceneNodeFromName=nh;window.ccbRemoveSceneNode=oh;window.ccbSetSceneNodeParent=ph;window.ccbGetSceneNodeMaterialCount=qh;
window.ccbGetSceneNodeMaterialProperty=rh;window.ccbSetSceneNodeMaterialProperty=th;window.ccbSetSceneNodeProperty=uh;window.ccbGetSceneNodeProperty=vh;window.ccbSetSceneNodePositionWithoutCollision=wh;window.ccbRegisterOnFrameEvent=xh;window.ccbDrawColoredRectangle=zh;window.ccbDrawTextureRectangle=Ah;window.ccbDrawTextureRectangleWithAlpha=Bh;window.ccbGet3DPosFrom2DPos=Ch;window.ccbGet2DPosFrom3DPos=Dh;window.ccbGetCollisionPointOfWorldWithLine=Eh;window.ccbEndProgram=Gh;
window.ccbDoesLineCollideWithBoundingBoxOfSceneNode=Fh;window.ccbLoadTexture=Ih;window.ccbGetMousePosX=Jh;window.ccbGetMousePosY=Kh;window.ccbGetScreenWidth=Lh;window.ccbGetScreenHeight=Mh;window.ccbSetCloseOnEscapePressed=Nh;window.ccbSetCursorVisible=Oh;window.ccbSwitchToScene=Ph;window.ccbPlaySound=Qh;window.ccbStopSound=Rh;window.ccbGetCopperCubeVariable=Sh;window.ccbSetCopperCubeVariable=Th;window.ccbReadFileContent=Vh;window.ccbWriteFileContent=Wh;window.ccbGetPlatform=Xh;
window.ccbInvokeAction=Yh;window.ccbCleanMemory=sh;window.print=Zh;window.system=$h;window.ccbRegisterBehaviorEventReceiver=ai;window.ccbUnregisterOnFrameEvent=yh;window.ccbSwitchToFullscreen=Uh;window.ccbDoHTTPRequest=bi;window.ccbCancelHTTPRequest=ci;window.ccbCreateMaterial=di;window.ccbSetShaderConstant=ei;window.ccbSetPhysicsVelocity=Hh;window.ccbUpdatePhysicsGeometry=Hh;window.ccbAICommand=fi;
